(()=>{var ds=Object.defineProperty;var hs=(r,e,t)=>e in r?ds(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(hs(r,typeof e!="symbol"?e+"":e,t),t),si=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var i=(r,e,t)=>(si(r,e,"read from private field"),t?t.call(r):e.get(r)),o=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},h=(r,e,t,s)=>(si(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var d=(r,e,t)=>(si(r,e,"access private method"),t);var v=(r,e)=>({code:r,emit:t=>{let s=r<80?"error":"warn",n=`[WUSE:${s.toUpperCase()}] ${r} | ${e(t)}`;if(window.Wuse&&window.Wuse.FATALS||r<10)throw new window.Error(n);return window.console[s](n),null}}),S=class{static get UNKNOWN_ERROR(){return v(0,e=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return v(1,e=>`Unsupported feature: ${e}.`)}static get UNREGISTERED_CLASS(){return v(2,e=>`Unregistered class: ${e}.`)}static get UNREGISTRABLE_CLASS(){return v(3,e=>`Unregistrable class: ${e}.`)}static get INVALID_CLASS(){return v(4,e=>`Invalid class: ${e}.`)}static get MISNAMED_CLASS(){return v(5,e=>`Misnamed class: ${e}.`)}static get INVALID_DEFINITION(){return v(10,e=>`Invalid definition: ${e}.`)}static get INVALID_ID(){return v(11,e=>`Invalid id: ${e}.`)}static get INVALID_KEY(){return v(12,e=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return v(13,e=>"Call first: this.allowRawContent(true).")}static get INVALID_STATE(){return v(14,e=>"Invalid state.")}static get INEXISTENT_TEMPLATE(){return v(20,e=>`Inexistent template: #${e}.`)}static get EXTINCT_TEMPLATE(){return v(21,e=>`Extinct template: #${e}.`)}static get INVALID_TEMPLATE(){return v(22,e=>`Invalid template: #${e}.`)}static get UNESPECIFIED_SLOT(){return v(30,e=>`Unespecified slot: #${e}.`)}static get LOCKED_DEFINITION(){return v(40,e=>`Locked definition: #${e}.`)}static get UNKNOWN_TAG(){return v(80,e=>`Unknown tag: ${e}.`)}static get BAD_TARGET(){return v(81,e=>`Bad target: ${e}.`)}static get ALREADY_REGISTERED(){return v(90,e=>`Already registered: ${e}.`)}};var Ae,ve,Ti=(r,e)=>(typeof e=="function"&&e(r),r),g=class{static get EMPTY_STRING(){return i(this,Ae)}static get EMPTY_ARRAY(){return i(this,ve)}static noop(){}static isNonEmptyString(e){return typeof e=="string"&&!!e.length}static forcedStringSplit(e,t){return typeof e=="string"?e.split(t):new window.Array}static buildArray(e){return Ti(new window.Array,e)}static buildObject(e){return Ti(new window.Object,e)}static ensureFunction(e,t=()=>{}){return typeof e=="function"?e:t}static isOf(e,t){return e!=null&&(e.constructor===t||t!=null&&e.constructor.name===t.name)}static hasObjectKeys(e){return!!(e&&!!window.Object.keys(e).length)}static cloneObject(e){return window.Object.assign(new window.Object,e)}static forEachOwnProperty(e,t){e&&window.Object.getOwnPropertyNames(e).forEach(t)}static isAssignedObject(e){return typeof e=="object"&&e!==null}static isAssignedArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"}static isNonEmptyArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"&&!!e.length}};Ae=new WeakMap,ve=new WeakMap,o(g,Ae,new window.String().valueOf()),o(g,ve,window.Object.freeze(new window.Array));var Nt,Ot,{noop:bi,ensureFunction:Si,isAssignedObject:cs}=g,dt=class{static fetch(e){let t=window.document.getElementById(e);return t===null?i(this,Nt).call(this,e):t.tagName!=="TEMPLATE"?i(this,Ot).call(this,e):t.innerHTML}static initialize(e){cs(e)&&(h(this,Nt,Si(e.onExtinctTemplate,i(this,Nt))),h(this,Ot,Si(e.onInvalidTemplate,i(this,Ot))))}};Nt=new WeakMap,Ot=new WeakMap,o(dt,Nt,bi),o(dt,Ot,bi);var Ut,Lt,Rt,Wt,kt,Mt,Ft,_e,vi,De,_i,Ce,Di,Ne,Ci,Oe,Ni,{noop:pt,ensureFunction:ht,isAssignedObject:Ii,isAssignedArray:en,isNonEmptyArray:Ai,isOf:us}=g,fs=r=>r.toLowerCase().replaceAll("_","-"),I=class{static registerClasses(e){Ai(e)&&window.Array.prototype.forEach.call(e,t=>typeof t=="function"?d(this,Ce,Di).call(this,t):i(this,Wt).call(this,t))}static instantiateClasses(e,t,s){Ai(e)&&window.Array.prototype.forEach.call(e,n=>window.customElements.get(n.tag)?d(this,Oe,Ni).call(this,n,t,Ii(s)?s:new window.Object):i(this,Mt).call(this,n.name))}static initialize(e){Ii(e)&&(h(this,Ut,ht(e.onBadTarget,i(this,Ut))),h(this,Lt,ht(e.onDeferredInstantiation,i(this,Lt))),h(this,Wt,ht(e.onInvalidClass,i(this,Wt))),h(this,Rt,ht(e.onMisnamedClass,i(this,Rt))),h(this,kt,ht(e.onUnregistrableClass,i(this,kt))),h(this,Mt,ht(e.onUnregisteredClass,i(this,Mt))),h(this,Ft,ht(e.onAlreadyRegistered,i(this,Ft))))}};Ut=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,Wt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,_e=new WeakSet,vi=function(e){window.HTMLElement.isPrototypeOf(e)?window.customElements.define(e.tag,e):i(this,kt).call(this,e.name)},De=new WeakSet,_i=function(e){window.customElements.get(e.tag=fs(e.name))?i(this,Ft).call(this,e.name):d(this,_e,vi).call(this,e)},Ce=new WeakSet,Di=function(e){e.name.indexOf("_")>0?d(this,De,_i).call(this,e):i(this,Rt).call(this,e.name)},Ne=new WeakSet,Ci=function(e,t,s){let n=null;try{n=window.document.querySelector(t)}catch(c){if(us(s.on_bad_target,window.Function)){if(s.on_bad_target(t)===!1)return}else{i(this,Ut).call(this,t);return}}finally{n=n||window.document.body}let l=window.document.createElement(e.tag);ht(s.on_element_instantiated)(l,t),n.appendChild(l)},Oe=new WeakSet,Ni=function(e,t,s){let n=()=>d(this,Ne,Ci).call(this,e,t,s);window.document.body?n():i(this,Lt).call(this,n)},o(I,_e),o(I,De),o(I,Ce),o(I,Ne),o(I,Oe),o(I,Ut,pt),o(I,Lt,pt),o(I,Rt,pt),o(I,Wt,pt),o(I,kt,pt),o(I,Mt,pt),o(I,Ft,pt);var A=class{static get TEMPLATES_KIND(){return"%templates%"}static get SLOTS_KIND(){return"%slots%"}static get TEXTNODE_TAG(){return"^text^"}static get DEFAULT_KIND(){return""}static get DEFAULT_TAG(){return"div"}static get DEFAULT_STYLE_MEDIA(){return"screen"}static get DEFAULT_STYLE_TYPE(){return"text/css"}static get DEFAULT_REPLACEMENT_OPEN(){return"~{"}static get DEFAULT_REPLACEMENT_CLOSE(){return"}~"}static get WUSEKEY_ATTRIBUTE(){return"data-wusekey"}static get WUSENODE_ATTRIBUTE(){return"data-wusenode"}};var qt,Ue,gt,Xt,Qt,{EMPTY_ARRAY:ws,buildArray:ni,buildObject:ms,isNonEmptyString:ps,isOf:gs}=g,$t=class{static initialize(e,t){this.begin=e,this.end=t}},V=$t;a(V,"begin",null),a(V,"end",null),a(V,"enclose",e=>$t.begin+e+$t.end),a(V,"makeRegExp",()=>new window.RegExp(`(?<=${$t.begin}).*?(?=${$t.end})`,"gs"));var Es=["contents","classes","styles","attributes"],xt=class{};a(xt,"rules",(e,t)=>ni(s=>e.forEach(n=>n.replacements.forEach(l=>l.field===t&&s.push(n))))),a(xt,"children",(e,t)=>ni(s=>{let n=l=>{let c=u=>u.forEach(_=>_.field===t&&s.push(l));Es.forEach(u=>c(l.replacements[u])),l.rules.forEach(u=>u.replacements.forEach(_=>_.field===t&&s.push(l)))};e.forEach(l=>l.included&&n(l))}));var U=class{static initialize(e){h(this,qt,e)}},F=U;qt=new WeakMap,Ue=new WeakMap,gt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,o(F,qt,null),o(F,Ue,(e,t,s)=>e.push({at:t,field:s.trim(),find:V.enclose(s)})),o(F,gt,(e,t,s)=>ps(s)&&(s.match(i(U,qt))||ws).forEach(n=>{var l;return i(l=U,Ue).call(l,e,t,n)})),o(F,Xt,(e,t,s)=>{var n;e[t]=new window.Array,i(n=U,gt).call(n,e[t],t,s)}),o(F,Qt,(e,t,s)=>{e[t]=new window.Array,window.Object.keys(s).forEach(n=>{var l,c;i(l=U,gt).call(l,e[t],t,n),i(c=U,gt).call(c,e[t],t,s[n])})}),a(F,"child",e=>ms(t=>{var s,n,l,c;i(s=U,Xt).call(s,t,"contents",e.content),i(n=U,Xt).call(n,t,"classes",e.classes.join(" ")),i(l=U,Qt).call(l,t,"styles",e.style),i(c=U,Qt).call(c,t,"attributes",e.attributes),e.rules.forEach(u=>u.replacements=U.rule(u))})),a(F,"rule",e=>ni(t=>{var n;if(gs(e.nested,window.Array))return e.nested.map(l=>U.rule(l));var s="";for(let l in e.properties)s+=`${l}:${e.properties[l]};`;i(n=U,gt).call(n,t,"rules",s)}));var W=class{static initialize(e,t){V.initialize(e,t),F.initialize(V.makeRegExp())}};a(W,"extractReplacementsFromRule",F.rule),a(W,"extractReplacementsFromChild",F.child),a(W,"scanRulesForReplacements",xt.rules),a(W,"scanChildrenForReplacements",xt.children);var q=class{static defaultRoutine(e=""){var t=0;for(let s=0;s<e.length;s++)t=(t=(t<<5)-t+e.charCodeAt(s))&t;return t}};var Oi=q.defaultRoutine,ys=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","content","col","colgroup","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","marquee","mark","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","shadow","select","slot","small","source","spacer","span","strike","strong","style","sub","sup","summary","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","xmp","wbr"].map(Oi),X=class{static onDOMContentLoaded(e){if(e&&e.constructor===window.Function){let t=()=>{e(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",t),100)};window.addEventListener("DOMContentLoaded",t)}}static getUniqueId(e="WUSE"){let t="_"+(e||"")+"_";for(var s;window.document.getElementById(s=t+(""+window.Math.random()).substring(2))!==null;);return s}static removeChildren(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static isHTMLTag(e){return ys.indexOf(Oi(e))>-1}static htmlEncode(e=""){return typeof e!="string"?null:e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static getCSSVendorPrefix(){let e=window.getComputedStyle(window.document.body,""),s=window.Array.prototype.slice.call(e).filter(n=>n.charAt(0)==="-");return s.length?"-"+s[0].split("-")[1]+"-":""}};var Kt,{noop:Ts,isOf:bs,hasObjectKeys:Ui,isNonEmptyString:Li,isNonEmptyArray:Ss,isAssignedObject:Is,ensureFunction:As}=g,{htmlEncode:Ri}=X,{SLOTS_KIND:vs,TEMPLATES_KIND:_s,TEXTNODE_TAG:Ds}=A,Zt=class{static initialize(e){Is(e)&&h(this,Kt,As(e.onFetchTemplate,i(this,Kt)))}},y=Zt;Kt=new WeakMap,o(y,Kt,Ts),a(y,"cacheInvalidator",e=>e.cache=null),a(y,"slotsInvalidator",e=>e.kind===vs?Zt.cacheInvalidator(e):void 0),a(y,"renderingIncluder",e=>e.included=!0),a(y,"renderingExcluder",e=>e.included=!1),a(y,"renderRule",(e,t)=>{if(bs(t.nested,window.Array))return`${t.selector}{${t.nested.map(n=>Zt.renderRule(e,n)).join(`
`)}}`;if(Li(t.selector)&&!t.nested){var s=new window.String;for(let n in t.properties)s+=`${n}:${t.properties[n]};`;return Ss(t.replacements)&&t.replacements.forEach(n=>s=e(s,n)),`${t.selector}{${s}}`}return null}),a(y,"renderChild",(e,t)=>{var l;if(t.kind===_s)return i(l=Zt,Kt).call(l,t.id);if(t.tag===Ds){var s=t.content;return t.replacements.contents.forEach(c=>s=e(s,c)),t.encode?Ri(s):s}var n=Li(t.id)?`<${t.tag} id='${t.id}'`:`<${t.tag}`;if(t.classes.length){var s=t.classes.join(" ");t.replacements.classes.forEach(u=>s=e(s,u)),n+=` class='${s}'`}if(Ui(t.style)){var s=" style='";for(let u in t.style)s+=`${u}: ${t.style[u]}; `;s+="'",t.replacements.styles.forEach(u=>s=e(s,u)),n+=s}if(Ui(t.attributes)){var s=new window.String;for(let u in t.attributes)s+=` ${u}=${t.attributes[u]}`;t.replacements.attributes.forEach(u=>s=e(s,u)),n+=s}if(typeof t.content=="string"){var s=t.content;t.replacements.contents.forEach(u=>s=e(s,u)),n+=`>${t.encode?Ri(s):s}</${t.tag}>`}else n+="/>";return n});var te,ee,ie,se,{ensureFunction:Cs}=g,jt=class{constructor(e){a(this,"rounds",0);o(this,te,0);o(this,ee,null);o(this,ie,!1);o(this,se,null);h(this,se,Cs(e))}compute(e){return this.rounds+=+h(this,ie,i(this,te)==h(this,ee,i(this,se).call(this,e))),h(this,te,i(this,ee)),i(this,ie)}};te=new WeakMap,ee=new WeakMap,ie=new WeakMap,se=new WeakMap;var Et,ct,Bt,re,oe,N,Q,yt,Gt,Re,{ensureFunction:ri,isNonEmptyString:Ns,isOf:Le}=g,ne=class{constructor(e,t,s,n={}){o(this,Gt);o(this,Et,new window.String);o(this,ct,!1);o(this,Bt,null);o(this,re,null);o(this,oe,null);o(this,N,null);o(this,Q,null);o(this,yt,new class extends window.Set{name(e,t){let s=`${e}_${t}`;for(var n=0;this.has(s);)s=`${e}_${t}_${++n}`;return this.add(s),s}});h(this,Bt,ri(e)),h(this,re,ri(t)),h(this,oe,ri(s)),h(this,Q,n)}getStore(){return i(this,Q)}setStore(e){h(this,Q,e)}get state(){return i(this,N)}get key(){return i(this,Et)}set key(e){return h(this,ct,Ns(h(this,Et,e)))}hasKey(){return i(this,ct)}validateKey(){return i(this,ct)?!0:(this.on_invalid_key(),!1)}nameFiliatedKey(e){return i(this,yt).name(i(this,Et),e)}rememberFiliatedKey(e){i(this,yt).add(e)}hasFiliatedKey(e){return i(this,yt).has(e)}initializeState(){if(i(this,yt).clear(),i(this,ct)){let e=i(this,Q).hasItem(this.key)?i(this,Q).getItem(this.key):i(this,Bt).call(this);if(Le(e,window.Object))h(this,N,e),i(this,N).generation++,d(this,Gt,Re).call(this);else return this.on_invalid_state(),-1}else h(this,N,i(this,Bt).call(this)),i(this,N).generation++;return i(this,N).generation}writeState(){let e=i(this,N);return Le(e,window.Object)?(e.data=i(this,oe).call(this),d(this,Gt,Re).call(this),!0):!1}readState(){let e=i(this,N);return Le(e,window.Object)&&e.persisted?(i(this,re).call(this,e.data),!0):!1}eraseState(){let e=i(this,N);return Le(e,window.Object)&&e.persisted&&e.data?(delete e.data,d(this,Gt,Re).call(this),!0):!1}on_invalid_state(){}on_invalid_key(){}};Et=new WeakMap,ct=new WeakMap,Bt=new WeakMap,re=new WeakMap,oe=new WeakMap,N=new WeakMap,Q=new WeakMap,yt=new WeakMap,Gt=new WeakSet,Re=function(){i(this,ct)&&(i(this,N).persisted=!!i(this,N).data,i(this,Q).setItem(i(this,Et),i(this,N)))};var Z,z,ut,We,ki,ke,Mi,{WUSENODE_ATTRIBUTE:Wi}=A,Ht=class{constructor(e,t){o(this,We);o(this,ke);o(this,Z,null);o(this,z,null);o(this,ut,null);if(e instanceof Node&&t instanceof Node)h(this,Z,e),d(this,We,ki).call(this,t.getAttribute(Wi)),h(this,z,t),h(this,ut,t.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return i(this,z)}affiliate(){i(this,Z).appendChild(i(this,z))}disaffiliate(){i(this,Z).removeChild(i(this,z))}promote(e){i(this,ut).innerHTML=e,i(this,Z).replaceChild(i(this,ut),i(this,z)),d(this,ke,Mi).call(this)}};Z=new WeakMap,z=new WeakMap,ut=new WeakMap,We=new WeakSet,ki=function(e){let t=i(this,Z).querySelector(`[${Wi}='${e}']`);t&&i(this,Z).removeChild(t)},ke=new WeakSet,Mi=function(){let e=i(this,ut);h(this,ut,i(this,z).cloneNode(!1)),h(this,z,e)};var Tt,bt,St=class{constructor(e){a(this,"owner",null);o(this,Tt,!1);o(this,bt,"");this.owner=e}get invalidated(){return i(this,Tt)}reset(e){h(this,Tt,!1),h(this,bt,e)}append(e){h(this,bt,i(this,bt)+e)}verify(e){h(this,Tt,e(i(this,bt)))}process(e){(e||i(this,Tt))&&this.on_content_invalidation(i(this,bt))}on_content_invalidation(e){}};Tt=new WeakMap,bt=new WeakMap;var It,ae,{isOf:oi,cloneObject:Fi,forEachOwnProperty:xi,buildArray:Os}=g,At=class extends window.Array{constructor(t){super();o(this,It);a(this,"owner",null);a(this,"last",null);a(this,"version",0);a(this,"locked",!1);this.owner=t}append(t){this.locked?this.on_forbidden_change():oi(t,window.Object)&&(this.push(t),d(this,It,ae).call(this,t))}prepend(t){this.locked?this.on_forbidden_change():oi(t,window.Object)&&(this.unshift(t),d(this,It,ae).call(this,t))}replace(t,s){this.locked?this.on_forbidden_change():t>-1&&oi(s,window.Object)&&d(this,It,ae).call(this,this[t]=s)}remove(t){if(this.locked)this.on_forbidden_change();else if(t>-1){let s=this.splice(t,1);d(this,It,ae).call(this,s.length?s[0]:null)}}persist(){return Os(t=>xi(this,s=>{switch(s){case"owner":case"last":case"length":break;case"version":case"locked":t[s]=this[s];break;default:if(window.Number.isInteger(window.Number(s))){let n=Fi(this[s]);n.cache&&(n.cache=null),t.push(n)}break}}))}restore(t){xi(t,s=>{switch(s){case"length":break;case"version":case"locked":this[s]=t[s];break;default:if(window.Number.isInteger(window.Number(s))){let n=Fi(t[s]);n.cache&&(n.cache=null),this.push(n)}break}})}on_version_change(){}on_forbidden_change(){}};It=new WeakSet,ae=function(t){this.last=t,this.version++,this.on_version_change()};var Fe,Hi,xe,zi,$e,Pi,Ke,Yi,je,Ji,zt,Me,Be,Vi,{isHTMLTag:Us}=X,{EMPTY_STRING:x,EMPTY_ARRAY:Ls,noop:le,buildArray:_n,buildObject:Rs,isOf:O,hasObjectKeys:$i,isNonEmptyString:ft,forcedStringSplit:Ws}=g,{WUSENODE_ATTRIBUTE:Ki,DEFAULT_TAG:ks,DEFAULT_KIND:ji,TEMPLATES_KIND:ai,SLOTS_KIND:li,TEXTNODE_TAG:Cn}=A,Ms=q.defaultRoutine,P={onInvalidDefinition:le,onInexistentTemplate:le,onUnespecifiedSlot:le,onInvalidId:le,onUnknownTag:le},Fs=r=>r.indexOf("-")>0&&!Us(r),tt=class{static parse(e){if(ft(e)){let t=e.trimLeft(),s=Bi();return t.charAt(0)==="%"?t.startsWith(ai)?d(this,zt,Me).call(this,s,t.replace(s.kind=ai,x)):t.startsWith(li)?d(this,zt,Me).call(this,s,t.replace(s.kind=li,x)):null:d(this,zt,Me).call(this,s,t)}return null}};Fe=new WeakSet,Hi=function(e,t){let s=t.indexOf("["),n=t.indexOf("]");if(s>-1&&n>-1&&n>s){let l=t.substr(s,n-s+1),c=l.substr(1,l.length-2).split("|");for(let u in c){let _=c[u].split("=");_[0]==="style"?_[1].split(";").forEach(H=>{let Ei=H.split(":"),yi=Ei[0].trim();yi.length&&(e.style[yi]=Ei[1].trim())}):e.attributes[_[0]]=_[1]}return t.replace(l,x)}return t},xe=new WeakSet,zi=function(e,t){let s=t.indexOf("=");return s>-1?(e.content=t.slice(s+1),!!e.content.length&&e.content.charAt(0)==="&"&&(e.content=e.content.slice(1),e.encode=!!e.content.length&&e.content.charAt(0)!=="&"),t.slice(0,s)):t},$e=new WeakSet,Pi=function(e,t){let s=t.replaceAll("!"," ").split(" ");return s.slice(1).map(n=>{let[l,...c]=n.toLowerCase().split("+"),u=(c||Ls).indexOf("capture")>-1;e.events.push(Gi(l,u))}),s[0]},Ke=new WeakSet,Yi=function(e,t){let s=t.replaceAll("."," ").split(" ");return e.classes=s.slice(1),s[0]},je=new WeakSet,Ji=function(e,t){if(ft(t)){let s=t.indexOf("#");s===-1?e.tag=t:(s>0&&(e.tag=t.substr(0,s)),e.id=t.substr(s+1))}return e},zt=new WeakSet,Me=function(e,t){return d(this,je,Ji).call(this,e,d(this,Ke,Yi).call(this,e,d(this,$e,Pi).call(this,e,d(this,xe,zi).call(this,e,d(this,Fe,Hi).call(this,e,t)))))},o(tt,Fe),o(tt,xe),o(tt,$e),o(tt,Ke),o(tt,je),o(tt,zt);var de=class{static parse(e){return Rs(t=>(O(e,window.Array)?e:Ws(e,`
`).map(s=>s.trim()).join(x).split(";")).forEach(s=>ft(s)&&d(this,Be,Vi).call(this,t,s.trim())))}};Be=new WeakSet,Vi=function(e,t){if(!!t.length&&t.indexOf(":")>-1){let[s,...n]=t.split(":"),l=s.trim();if(l.length){let c=n.join(":").trim();e[l]=c.endsWith(";")?c.slice(0,-1):c}}},o(de,Be);var Bi=()=>({kind:ji,tag:ks,id:x,classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:x,encode:!1}),xs=()=>({generation:0,persisted:!1}),Gi=(r,e)=>typeof r=="string"&&typeof e=="boolean"?{kind:r,capture:e}:null,$s=(r,e)=>{let t=tt.parse(r);return t?(t.custom=t.kind===ji&&Fs(t.tag),t.hash=Ms(r),t.rules=O(e,window.Array)?e:new window.Array,t.included=!0,t.cache=null,t):P.onInvalidDefinition(r)},Ks=r=>{if(r!==null)if(r.kind===ai){if(!window.document.getElementById(r.id))return P.onInexistentTemplate(r.id)}else if(r.kind===li){if(new window.String(r.attributes.slot).replaceAll('"',x).replaceAll("'",x).length===0)return P.onUnespecifiedSlot(r.id)}else{if(typeof r.id!="string")return P.onInvalidId(r.id);r.custom&&!window.customElements.get(r.tag)&&P.onUnknownTag(r.tag)}return r},js=r=>{if(!O(r,window.Object))return null;let e=window.document.createElement(r.tag);if(r.id.length&&e.setAttribute("id",r.id),r.classes.length&&e.setAttribute("class",r.classes.join(" ")),$i(r.style)){var t=new window.String;for(let s in r.style)t+=`${s}: ${r.style[s]}; `;if(t.length){let s=t.trim();e.setAttribute("style",s.endsWith(";")?s.slice(0,-1):s)}}if($i(r.attributes))for(let s in r.attributes)e.setAttribute(s,r.attributes[s]);return e.setAttribute(Ki,"main"),e},Bs=(r,e)=>{let t=window.document.createElement("style");return ft(r)&&t.setAttribute("media",r),ft(e)&&t.setAttribute("type",e),t.setAttribute(Ki,"style"),t.appendChild(window.document.createTextNode(x)),t},Gs=(r,e)=>{let t=O(r,window.Array)?r.join(","):ft(r)?r:x;return t.length?{selector:t,properties:O(e,window.Object)?e:de.parse(e),cache:null}:null},Hs=(r,e,t)=>{let s=O(r,window.Array)?r.join(","):ft(r)?r:x,n=O(e,window.Array)?e.join(","):ft(e)?e:x;return!s.length||!n.length?null:{selector:s,nested:[{selector:n,properties:O(t,window.Object)?t:de.parse(t)}],cache:null}},zs=(r,e)=>{if(r.selector===e.selector){for(let t in e.properties)r.properties[t]=e.properties[t];return r.cache=null,!0}return!1},Ps=(r,e)=>O(r.nested,window.Array)&&r.selector===e.selector?(e.nested.forEach(t=>{var s=!1;for(let n in r.nested)if(s=r.nested[n].selector===t.selector){for(let l in t.properties)r.nested[n].properties[l]=t.properties[l];break}s||r.nested.push(t)}),r.cache=null,!0):!1,f=class{static initialize(e){O(e,window.Object)&&(O(e.onInvalidDefinition,window.Function)&&(P.onInvalidDefinition=e.onInvalidDefinition),O(e.onInexistentTemplate,window.Function)&&(P.onInexistentTemplate=e.onInexistentTemplate),O(e.onUnespecifiedSlot,window.Function)&&(P.onUnespecifiedSlot=e.onUnespecifiedSlot),O(e.onInvalidId,window.Function)&&(P.onInvalidId=e.onInvalidId),O(e.onUnknownTag,window.Function)&&(P.onUnknownTag=e.onUnknownTag))}};a(f,"makeStyleNode",Bs),a(f,"newRule",Gs),a(f,"newNestedRule",Hs),a(f,"tryToJoinRules",zs),a(f,"tryToJoinNestedRules",Ps),a(f,"performValidations",Ks),a(f,"makeMainNode",js),a(f,"newChild",$s),a(f,"newDefinition",Bi),a(f,"newEvent",Gi),a(f,"newState",xs);var k=class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}};a(k,"specializeClass",(e,t)=>class extends e{constructor(){super(t)}});var et,Pt,Ys=["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"],he=class{constructor(e){o(this,et,null);o(this,Pt,new window.Object);h(this,et,e)}detect(){Ys.forEach(e=>i(this,Pt)[e]=typeof i(this,et)[e]=="function")}immediateTrigger(e,t){i(this,Pt)[e]&&i(this,et)[e].call(i(this,et),t)}committedTrigger(e,t){i(this,Pt)[e]&&window.requestAnimationFrame(()=>i(this,et)[e].call(i(this,et),t))}};et=new WeakMap,Pt=new WeakMap;var j,p,T,R,w,C,it,st,ue,nt,J,rt,wt,ot,_t,fe,Ge,He,b,m,Jt,we,Dt,B,K,Y,ze,Zi,Pe,ts,Ye,es,Je,is,mt,Yt,me,di,pe,hi,ge,ci,Ve,ss,Ee,ui,qe,ns,ye,fi,Te,wi,{EMPTY_STRING:ce,noop:$,isOf:D,isNonEmptyArray:qi,isNonEmptyString:vt,forcedStringSplit:Xi}=g;function Qi(r,e,t,s,n){let l=(_,H)=>window.Object.defineProperty(r,e,{get:_,set:H,enumerable:!0,configurable:!0}),c=()=>delete r[e],u=(_,H)=>Qi(r,e,_,H,n);l(()=>t,_=>{u(_,s),D(s,window.Function)?s({renderize:H=>n(e,H),automate:()=>u(_,null),freeze:()=>l(()=>_,H=>{}),defreeze:()=>u(_,s),dereact:()=>l(()=>_,H=>{c(),r[e]=H}),remove:()=>c()}):n(e)})}var L={onInvalidState:$,onInvalidKey:$,onInvalidDefinition:$,onLockedDefinition:$,onAllowHTML:$},mi=class extends window.HTMLElement{constructor(t){super();o(this,K);o(this,ze);o(this,Pe);o(this,Ye);o(this,Je);o(this,mt);o(this,me);o(this,pe);o(this,ge);o(this,Ve);o(this,Ee);o(this,qe);o(this,ye);o(this,Te);o(this,j,new window.String);o(this,p,new class extends At{on_version_change(){var t;this.last!==null&&(this.last.version=this.version,this.last.replacements=W.extractReplacementsFromRule(this.last)),window.Wuse.DEBUG&&d(t=this.owner,K,Y).call(t,`rules list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,K,Y).call(t,"rules list is locked and can not be changed"),L.onLockedDefinition(i(this,w).mainDefinition.id)}}(this));o(this,T,new class extends At{on_version_change(){var t,s;this.last!==null&&(this.last.version=this.version,this.last.replacements=W.extractReplacementsFromChild(this.last),h(t=this.owner,st,i(t,st)|this.last.kind===A.SLOTS_KIND)),window.Wuse.DEBUG&&d(s=this.owner,K,Y).call(s,`children list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,K,Y).call(t,"children list is locked and can not be changed"),L.onLockedDefinition(i(this,w).mainDefinition.id)}}(this));o(this,R,new class extends At{on_version_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,K,Y).call(t,`fields list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,K,Y).call(t,"fields list is locked and can not be changed"),L.onLockedDefinition(i(this,w).mainDefinition.id)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));o(this,w,{mainDefinition:f.newDefinition(),styleMedia:A.DEFAULT_STYLE_MEDIA,styleType:A.DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0,autokeyChildren:!0});o(this,C,new he(this));o(this,it,!1);o(this,st,!1);o(this,ue,window.Wuse.isShadowElement(this));o(this,nt,void 0);o(this,J,void 0);o(this,rt,null);o(this,wt,!1);o(this,ot,!1);o(this,_t,!0);o(this,fe,{tryToName:t=>{t.attributes[A.WUSEKEY_ATTRIBUTE]||(t.attributes[A.WUSEKEY_ATTRIBUTE]=i(this,b).nameFiliatedKey(t.hash))},tryToRemember:t=>{let s=t.attributes[A.WUSEKEY_ATTRIBUTE];s&&i(this,b).rememberFiliatedKey(s)}});o(this,Ge,t=>{t&&(h(this,w,t.options),h(this,st,t.slotted),h(this,it,t.identified),h(this,j,t.html),i(this,T).restore(t.children),i(this,T).forEach(i(this,fe).tryToRemember),i(this,T).owner=this,i(this,p).restore(t.rules),i(this,p).owner=this,i(this,R).restore(t.fields),i(this,R).owner=this,i(this,R).recall())});o(this,He,()=>(i(this,R).snapshot(),{options:i(this,w),html:i(this,j),children:i(this,T).persist(),rules:i(this,p).persist(),fields:i(this,R).persist(),slotted:i(this,st),identified:i(this,it)}));o(this,b,new class extends ne{on_invalid_state(){L.onInvalidState()}on_invalid_key(){L.onInvalidKey()}}(f.newState,i(this,Ge),i(this,He),window.Wuse.elementsStorage));o(this,m,{root:new class extends St{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends St{on_content_invalidation(t){i(this.owner,J).promote(t)}}(this),main:new class extends St{on_content_invalidation(t){i(this.owner,nt).promote(t)}}(this),verifiers:{main:t=>!i(this,Dt).main.compute(t),style:t=>!i(this,Dt).style.compute(t)},renderizers:{rule:t=>i(this,m).style.append(t.cache?t.cache:t.cache=y.renderRule(i(this,Jt),t)),children:{mixed:t=>i(this,ue)&&t.kind===A.SLOTS_KIND?i(this,m).renderizers.children.slot(t):i(this,m).renderizers.children.normal(t),slot:t=>{t.cache||(i(this,m).root.verify(s=>!0),i(this,m).root.append(t.cache=y.renderChild(i(this,Jt),t)))},normal:t=>{i(this,m).main.append(t.cache?t.cache:t.cache=y.renderChild(i(this,Jt),t)),t.rules.forEach(i(this,m).renderizers.rule)}}},gotModified:()=>i(this,m).root.invalidated||i(this,m).main.invalidated||i(this,m).style.invalidated,getDebugInfo:()=>`updated (root: ${i(this,m).root.invalidated}, main: ${i(this,m).main.invalidated}, style: ${i(this,m).style.invalidated})`});o(this,Jt,(t,s)=>t.replace(s.find,this[s.field]!==void 0?this[s.field]:ce));o(this,we,{bind:{key:()=>{let t=s=>vt(s)?this[s]=d(this,me,di).call(this,s):void 0;return i(this,it)&&t(i(this,w).mainDefinition.id),s=>t(s.id)},event:"addEventListener"},unbind:{key:()=>{let t=s=>delete this[s];return i(this,it)&&t(i(this,w).mainDefinition.id),s=>t(s.id)},event:"removeEventListener"}});o(this,Dt,{main:new jt(window.Wuse.hashRoutine),style:new jt(window.Wuse.hashRoutine)});o(this,B,{attachment:new window.Wuse.PerformanceMeasurement.StopWatch,partial:new window.Wuse.PerformanceMeasurement.StopWatch,full:new window.Wuse.PerformanceMeasurement.StopWatch,dettachment:new window.Wuse.PerformanceMeasurement.StopWatch});a(this,"info",{instanceNumber:++mi.instancesCount,unmodifiedRounds:0,updatedRounds:0});h(this,rt,t!==k.REGULAR?this.attachShadow({mode:t}):this),i(this,C).detect(),i(this,C).immediateTrigger("on_create"),i(this,w).attributeKeys&&this.getAttributeNames().forEach(s=>this[s]=this.getAttribute(s)),this.dataset.wusekey&&this.setElementsStoreKey(this.dataset.wusekey),i(this,C).immediateTrigger(i(this,b).initializeState()>1?"on_reconstruct":"on_construct",i(this,b).state)}get render(){return i(this,ot)?d(this,Ve,ss):$}get redraw(){return i(this,ot)?d(this,qe,ns):$}connectedCallback(){window.Wuse.MEASURE&&i(this,B).attachment.start(),i(this,C).detect(),i(this,C).immediateTrigger("on_connect"),d(this,Ee,ui).call(this,"on_load"),i(this,b).writeState(),window.Wuse.MEASURE&&i(this,B).attachment.stop(window.Wuse.DEBUG)}disconnectedCallback(){window.Wuse.MEASURE&&i(this,B).dettachment.start(),d(this,mt,Yt).call(this,!1),i(this,C).immediateTrigger("on_disconnect"),i(this,b).writeState(),window.Wuse.MEASURE&&i(this,B).dettachment.stop(window.Wuse.DEBUG)}getElementsStore(){return i(this,b).getStore()}setElementsStore(t){return i(this,b).setStore(t),this}hasElementsStoreKey(){return i(this,b).hasKey()}getElementsStoreKey(t){return i(this,b).key}setElementsStoreKey(t){return(i(this,b).key=t)&&(this.setAttribute(A.WUSEKEY_ATTRIBUTE,t),i(this,b).writeState()),this}deriveChildrenStoreKey(t){i(this,w).autokeyChildren=t}persistToElementsStore(){return i(this,b).validateKey()&&i(this,b).writeState()}restoreFromElementsStore(){return i(this,b).validateKey()&&i(this,b).readState()}removeFromElementsStore(){return i(this,b).validateKey()&&i(this,b).eraseState()}selectChildElement(t){return i(this,rt).querySelector(t)}getMainAttribute(t){return i(this,wt)?i(this,nt).element.setAttribute(t):void 0}setMainAttribute(t,s){return i(this,wt)&&i(this,nt).element.setAttribute(t,s),this}setMainElement(t){let s=f.performValidations(f.newChild(t));if(s!==null){if(vt(s.content)||qi(s.events))return L.onInvalidDefinition(t);h(this,it,vt(s.id))&&(i(this,w).mainDefinition.id=s.id),vt(s.tag)&&(i(this,w).mainDefinition.tag=s.tag),qi(s.classes)&&(i(this,w).mainDefinition.classes=s.classes),D(s.style,window.Object)&&(i(this,w).mainDefinition.style=s.style),D(s.attributes,window.Array)&&(i(this,w).mainDefinition.attributes=s.attributes)}return this}setStyleOptions(t,s){return i(this,w).styleMedia=vt(t)?t:ce,i(this,w).styleType=vt(s)?s:ce,this}setElementsAsKeys(t){return i(this,w).elementKeys=!!t,this}setAttributesAsKeys(t){return i(this,w).attributeKeys=!!t,this}allowRawContent(t){return i(this,w).rawContent=!!t,this}setRawContent(t){return i(this,w).rawContent?h(this,j,t):L.onAllowHTML(),this}appendRawContent(t){return i(this,w).rawContent?h(this,j,i(this,j)+t):L.onAllowHTML(),this}prependRawContent(t){return i(this,w).rawContent?h(this,j,t+i(this,j)):L.onAllowHTML(),this}lockCSSRules(){return i(this,p).locked=!0,this}unlockCSSRules(){return i(this,p).locked=!1,this}appendCSSRule(t,s,n){if(n)return this.appendCSSNestedRule(t,s,n);let l=i(this,p).slice(-1),c=f.newRule(t,s);return(!l.length||!f.tryToJoinRules(l[0],c))&&i(this,p).append(c),this}prependCSSRule(t,s,n){if(n)return this.prependCSSNestedRule(t,s,n);let l=i(this,p).slice(0,1),c=f.newRule(t,s);return(!l.length||!f.tryToJoinRules(l[0],c))&&i(this,p).prepend(c),this}appendCSSNestedRule(t,s,n){let l=i(this,p).slice(-1),c=f.newNestedRule(t,s,n);return(!l.length||!f.tryToJoinNestedRules(l[0],c))&&i(this,p).append(c),this}prependCSSNestedRule(t,s,n){let l=i(this,p).slice(0,1),c=f.newNestedRule(t,s,n);return(!l.length||!f.tryToJoinNestedRules(l[0],c))&&i(this,p).prepend(c),this}hasCSSRuleBySelector(t){for(let s=0;s<i(this,p).length;s++)if(i(this,p)[s].selector===t)return!0;return!1}replaceCSSRuleBySelector(t,s){for(let n=0;n<i(this,p).length;n++)if(i(this,p)[n].selector===t){i(this,p)[n]=f.newRule(t,s);break}return this}removeCSSRuleBySelector(t){for(let s=0;s<i(this,p).length;s++)if(i(this,p)[s].selector===t){i(this,p).splice(s,1);break}return this}lockChildElements(){return i(this,T).locked=!0,this}unlockChildElements(){return i(this,T).locked=!1,this}appendChildElement(t,s){let n=d(this,Te,wi).call(this,t,s);return n!==null&&i(this,T).append(n),this}prependChildElement(t,s){let n=d(this,Te,wi).call(this,t,s);return n!==null&&i(this,T).prepend(n),this}appendChildElements(t){return(D(t,window.Array)?t:Xi(t,`
`)).forEach(s=>typeof s=="string"&&!!s.trim().length&&this.appendChildElement(s)),this}prependChildElements(t){return(D(t,window.Array)?t:Xi(t,`
`)).forEach(s=>typeof s=="string"&&!!s.trim().length&&this.prependChildElement(s)),this}replaceChildElementById(t,s,n){let l=f.newChild(s,n);return l!==null&&i(this,T).replace(i(this,T).findIndex(c=>c.id===t),l),this}removeChildElementById(t){return i(this,T).remove(i(this,T).findIndex(s=>s.id===t)),this}checkChildElementIsIncludedById(t,s,n){let l=c=>D(c,window.Function)?c():void 0;return i(this,T).some(c=>c.id===t&&c.included)?l(s):l(n),this}includeChildElementById(t){return i(this,T).forEach(s=>s.id===t&&y.renderingIncluder(s)),this}excludeChildElementById(t){return i(this,T).forEach(s=>s.id===t&&y.renderingExcluder(s)),this}invalidateChildElementsById(t){return i(this,T).forEach(s=>t.indexOf(s.id)>-1&&y.cacheInvalidator(s)),this}invalidateChildElements(t){return D(t,window.Array)&&t.forEach(y.cacheInvalidator),this}lockInstanceFields(){return i(this,R).locked=!0,this}unlockInstanceFields(){return i(this,R).locked=!1,this}makeField(t,s){return this[t]=s,i(this,R).append({name:t,value:s}),this}makeReactiveField(t,s,n,l=!0){return Qi(this,t,s,n,(c,u)=>d(this,ye,fi).call(this,c,u||"$auto")),i(this,R).append({name:t,value:s}),l&&d(this,ye,fi).call(this,t,"$init"),this}makeExternalReactiveField(t,s,n,l,c=!0){return this.makeReactiveField(s,t[s]||n,u=>{t[s]=this[s],l(u)},c)}hasField(t){for(let s=0;s<i(this,R).length;s++)if(i(this,R)[s].name===t)return!0;return!1}suspendRender(){return h(this,_t,!1),this}resumeRender(t=!0){return h(this,_t,!0),t&&this.render(),this}isRenderSuspended(){return!i(this,_t)}static initialize(t){if(W.initialize(A.DEFAULT_REPLACEMENT_OPEN,A.DEFAULT_REPLACEMENT_CLOSE),D(t,window.Object)){D(t.onFetchTemplate,window.Function)&&y.initialize({onFetchTemplate:t.onFetchTemplate}),D(t.onAllowHTML,window.Function)&&(L.onAllowHTML=t.onAllowHTML),D(t.onInvalidKey,window.Function)&&(L.onInvalidKey=t.onInvalidKey),D(t.onInvalidState,window.Function)&&(L.onInvalidState=t.onInvalidState),D(t.onLockedDefinition,window.Function)&&(L.onLockedDefinition=t.onLockedDefinition);let s={onInvalidDefinition:$,onInexistentTemplate:$,onUnespecifiedSlot:$,onInvalidId:$,onUnknownTag:$};D(t.onInvalidDefinition,window.Function)&&(L.onInvalidDefinition=t.onInvalidDefinition,s.onInvalidDefinition=t.onInvalidDefinition),D(t.onInexistentTemplate,window.Function)&&(s.onInexistentTemplate=t.onInexistentTemplate),D(t.onUnespecifiedSlot,window.Function)&&(s.onUnespecifiedSlot=t.onUnespecifiedSlot),D(t.onInvalidId,window.Function)&&(s.onInvalidId=t.onInvalidId),D(t.onUnknownTag,window.Function)&&(s.onUnknownTag=t.onUnknownTag),f.initialize(s)}}},G=mi;j=new WeakMap,p=new WeakMap,T=new WeakMap,R=new WeakMap,w=new WeakMap,C=new WeakMap,it=new WeakMap,st=new WeakMap,ue=new WeakMap,nt=new WeakMap,J=new WeakMap,rt=new WeakMap,wt=new WeakMap,ot=new WeakMap,_t=new WeakMap,fe=new WeakMap,Ge=new WeakMap,He=new WeakMap,b=new WeakMap,m=new WeakMap,Jt=new WeakMap,we=new WeakMap,Dt=new WeakMap,B=new WeakMap,K=new WeakSet,Y=function(t){i(this,it)&&window.Wuse.debug(`#${i(this,w).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},ze=new WeakSet,Zi=function(){i(this,J)&&i(this,J).affiliate(),i(this,nt).affiliate(),h(this,wt,!0)},Pe=new WeakSet,ts=function(){h(this,J,i(this,p).length?new Ht(i(this,rt),f.makeStyleNode(i(this,w).styleMedia,i(this,w).styleType)):null),h(this,nt,new Ht(i(this,rt),f.makeMainNode(i(this,w).mainDefinition))),i(this,T).forEach(y.cacheInvalidator),i(this,p).forEach(y.cacheInvalidator)},Ye=new WeakSet,es=function(){i(this,wt)&&(i(this,nt).disaffiliate(),i(this,J)&&i(this,J).disaffiliate(),i(this,st)&&i(this,ue)&&window.Wuse.WebHelpers.removeChildren(this)),h(this,wt,!1)},Je=new WeakSet,is=function(t){return{key:i(this,w).elementKeys&&t.key(),event:(s,n,l)=>{let c=this[`on_${s}_${n}`];if(c){let u=d(this,me,di).call(this,s);u&&u[t.event](n,c,l)}},slots:()=>this.on_slot_change&&i(this,rt).querySelectorAll("slot").forEach(s=>s[t.event]("slotchange",this.on_slot_change))}},mt=new WeakSet,Yt=function(t){if(i(this,ot)&&!t||!i(this,ot)&&t){let s=d(this,Je,is).call(this,t?i(this,we).bind:i(this,we).unbind);i(this,T).forEach(n=>{!n.included&&t||(s.key&&s.key(n),n.events.forEach(l=>l&&s.event(n.id,l.kind,l.capture)))}),i(this,st)&&s.slots(),h(this,ot,t)}},me=new WeakSet,di=function(t){return vt(t)?i(this,rt).querySelector(`#${t}`):void 0},pe=new WeakSet,hi=function(){i(this,m).root.reset(ce),i(this,m).style.reset(ce),i(this,m).main.reset(i(this,j));let t=i(this,st)?i(this,m).renderizers.children.mixed:i(this,m).renderizers.children.normal;i(this,T).forEach(s=>s.included&&t(s)),i(this,p).forEach(i(this,m).renderizers.rule),i(this,m).main.verify(i(this,m).verifiers.main),i(this,m).style.verify(i(this,m).verifiers.style)},ge=new WeakSet,ci=function(t,s,n){i(this,m).root.process(t),i(this,m).style.process(s),i(this,m).main.process(n),window.Wuse.DEBUG&&d(this,K,Y).call(this,i(this,m).getDebugInfo())},Ve=new WeakSet,ss=function(){!window.Wuse.RENDERING||!i(this,_t)||(window.Wuse.MEASURE&&i(this,B).partial.start(),i(this,C).immediateTrigger("on_prerender"),d(this,pe,hi).call(this),i(this,m).gotModified()?(d(this,mt,Yt).call(this,!1),d(this,ge,ci).call(this,!1,!1,!1),d(this,mt,Yt).call(this,!0),this.info.updatedRounds++,i(this,C).immediateTrigger("on_update"),i(this,b).writeState(),i(this,C).committedTrigger("on_refresh")):this.info.unmodifiedRounds++,window.Wuse.DEBUG&&d(this,K,Y).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${i(this,Dt).main.rounds}, style: ${i(this,Dt).style.rounds}) | updated: ${this.info.updatedRounds}`),i(this,C).immediateTrigger("on_postrender"),window.Wuse.MEASURE&&i(this,B).partial.stop(window.Wuse.DEBUG))},Ee=new WeakSet,ui=function(t){d(this,Pe,ts).call(this),d(this,ze,Zi).call(this),i(this,C).immediateTrigger("on_inject"),d(this,pe,hi).call(this),d(this,ge,ci).call(this,!1,!!i(this,J),!0),d(this,mt,Yt).call(this,!0),i(this,C).immediateTrigger(t)},qe=new WeakSet,ns=function(){window.Wuse.MEASURE&&i(this,B).full.start(),d(this,mt,Yt).call(this,!1),d(this,Ye,es).call(this),i(this,C).immediateTrigger("on_unload"),i(this,C).detect(),d(this,Ee,ui).call(this,"on_reload"),i(this,b).writeState(),i(this,C).committedTrigger("on_repaint"),window.Wuse.MEASURE&&i(this,B).full.stop(window.Wuse.DEBUG)},ye=new WeakSet,fi=function(t,s="$none"){if(i(this,ot)){let n=W.scanRulesForReplacements(i(this,p),t);n.forEach(y.cacheInvalidator);let l=W.scanChildrenForReplacements(i(this,T),t);l.forEach(y.cacheInvalidator),window.Wuse.DEBUG&&d(this,K,Y).call(this,`reactive render (label: ${s}, field: ${t}, children: ${l.length}, rules: ${n.length})`),(!!n.length||!!l.length)&&(l.some(c=>!!c.kind.length)&&i(this,T).forEach(y.slotsInvalidator),this.render())}},Te=new WeakSet,wi=function(t,s){let n=f.performValidations(f.newChild(t,s));return n!==null&&n.custom&&i(this,w).autokeyChildren&&i(this,b).hasKey()&&i(this,fe).tryToName(n),n},a(G,"instancesCount",0);var rs=(r,e)=>window.Object.getOwnPropertyNames(e).forEach(t=>Object.defineProperty(r,t,{value:e[t],writable:!1,configurable:!1,enumerable:!1})),Ct=class{static detectFeatures(e){let t=(s,n)=>!s&&S.UNSUPPORTED_FEATURE.emit(n);try{t(e.JsHelpers.isOf(window.document,window.HTMLDocument),"HTML Document"),t(e.JsHelpers.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),e.WebHelpers.onDOMContentLoaded(()=>t(e.JsHelpers.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(s){S.UNKNOWN_ERROR.emit()}}static initializeModules(e){e.PerformanceMeasurement.initialize((t,s)=>e.debug(JSON.stringify(e.JsHelpers.buildArray(n=>{switch(n.push({instances:e.elementCount}),n.push(t.getDebugInfo()),s){case"stop":n.push(e.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo());break;case"finish":n.push(e.PerformanceMeasurement.BrowserRender.overall.getDebugInfo());break}})))),dt.initialize({onExtinctTemplate:S.EXTINCT_TEMPLATE.emit,onInvalidTemplate:S.INVALID_TEMPLATE.emit}),I.initialize({onBadTarget:S.BAD_TARGET.emit,onMisnamedClass:S.MISNAMED_CLASS.emit,onUnregistrableClass:S.UNREGISTRABLE_CLASS.emit,onUnregisteredClass:S.UNREGISTERED_CLASS.emit,onAlreadyRegistered:S.ALREADY_REGISTERED.emit,onInvalidClass:S.INVALID_CLASS.emit,onDeferredInstantiation:e.WebHelpers.onDOMContentLoaded}),G.initialize({onAllowHTML:S.ALLOW_HTML.emit,onInvalidKey:S.INVALID_KEY.emit,onInvalidDefinition:S.INVALID_DEFINITION.emit,onLockedDefinition:S.LOCKED_DEFINITION.emit,onInexistentTemplate:S.INEXISTENT_TEMPLATE.emit,onUnespecifiedSlot:S.UNESPECIFIED_SLOT.emit,onUnknownTag:S.UNKNOWN_TAG.emit,onInvalidId:S.INVALID_ID.emit,onInvalidState:S.INVALID_STATE.emit,onFetchTemplate:dt.fetch})}static declareUnwritableMembers(e,t){rs(e,t.fields),rs(e,t.methods)}};var ii,as,os,ti,ei,Vt,Xe=r=>r>1e3?(r/1e3).toFixed(2)+"s":r.toFixed(2)+"ms",Qe=class{constructor(){a(this,"round",0);a(this,"domTime",window.Number.MAX_SAFE_INTEGER);a(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var e=new window.Object;return e.round=this.round,e.domTime=Xe(this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(e.renderTime=Xe(this.renderTime)),e}},Ze=class{constructor(e){a(this,"name","");a(this,"rounds",0);a(this,"time",0);a(this,"average",0);this.name=e}compute(e){this.rounds++,this.time+=e,this.average=this.time/this.rounds}getDebugInfo(){let e=Xe(this.time),t=Xe(this.average);return{name:this.name,rounds:this.rounds,spent:e,average:t}}},M=class{static initialize(e){typeof e=="function"&&h(M,Vt,e),M.DOMUpdate.overall=new Ze("overall-dom-update"),M.BrowserRender.overall=new Ze("overall-browser-render")}},at=M;Vt=new WeakMap,o(at,Vt,()=>{}),a(at,"StopWatch",(os=class{constructor(){o(this,ii);a(this,"_begin",0);a(this,"_end",{dom:0,render:0});a(this,"rounds",0);a(this,"last",new Qe);a(this,"best",new Qe);a(this,"averages",{dom:0,render:0})}start(){(M.DOMUpdate.check||M.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(e){var t;M.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,M.DOMUpdate.overall.compute(this.last.domTime)),M.BrowserRender.check?setTimeout(()=>d(this,ii,as).bind(this)(e)):e&&i(t=M,Vt).call(t,this,"stop")}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages}}},ii=new WeakSet,as=function(e){var t;this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,M.BrowserRender.overall.compute(this.last.renderTime),e&&i(t=M,Vt).call(t,this,"finish")},os)),a(at,"DOMUpdate",(ti=class{},a(ti,"check",!0),a(ti,"overall",null),ti)),a(at,"BrowserRender",(ei=class{},a(ei,"check",!1),a(ei,"overall",null),ei));var lt,Se,pi,be=class{constructor(){o(this,Se);o(this,lt,new window.Object)}get length(){return d(this,Se,pi).call(this).length}key(e){return d(this,Se,pi).call(this)[e]||null}getItem(e){return i(this,lt)[e]}setItem(e,t){i(this,lt)[e]=t}removeItem(e){delete i(this,lt)[e]}clear(){h(this,lt,new window.Object)}hasItem(e){return i(this,lt).hasOwnProperty(e)}};lt=new WeakMap,Se=new WeakSet,pi=function(){return window.Object.keys(i(this,lt))};var ls="0.6.5";var E,{noop:Ie,isOf:gi}=g;window.Wuse=window.Wuse||(E=class{static get VERSION(){return ls}static get elementCount(){return G.instancesCount}},a(E,"DEBUG",!1),a(E,"FATALS",!1),a(E,"MEASURE",!1),a(E,"RENDERING",!0),a(E,"hashRoutine",q.defaultRoutine),a(E,"elementsStorage",new be),a(E,"tmp",null),a(E,"WebHelpers",null),a(E,"JsHelpers",null),a(E,"PerformanceMeasurement",null),a(E,"NonShadowElement",null),a(E,"OpenShadowElement",null),a(E,"ClosedShadowElement",null),a(E,"debug",Ie),a(E,"blockUpdate",Ie),a(E,"register",Ie),a(E,"instantiate",Ie),a(E,"isShadowElement",Ie),(()=>{Ct.declareUnwritableMembers(E,{fields:{tmp:new window.Object,WebHelpers:X,JsHelpers:g,PerformanceMeasurement:at,NonShadowElement:k.specializeClass(G,k.REGULAR),OpenShadowElement:k.specializeClass(G,k.OPEN),ClosedShadowElement:k.specializeClass(G,k.CLOSED)},methods:{debug:e=>window.console.log("[WUSE:DEBUG]",e),blockUpdate:(e,t)=>{if(gi(e,Function)){window.Wuse.DEBUG&&window.Wuse.debug("blocking"),window.Wuse.RENDERING=!1;try{e(t)}catch(s){throw s}finally{window.Wuse.RENDERING=!0,window.Wuse.DEBUG&&window.Wuse.debug("unblocking")}}},register:e=>I.registerClasses(gi(e,window.Array)?e:new window.Array(e)),instantiate:(e,t,s)=>I.instantiateClasses(gi(e,window.Array)?e:new window.Array(e),t,s),isShadowElement:e=>{let t=window.Object.getPrototypeOf(e.constructor);return t===window.Wuse.OpenShadowElement||t===window.Wuse.ClosedShadowElement}}}),Ct.detectFeatures(E),Ct.initializeModules(E)})(),E);})();
