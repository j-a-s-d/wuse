(()=>{var Yi=Object.defineProperty;var Ji=(r,e,t)=>e in r?Yi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(Ji(r,typeof e!="symbol"?e+"":e,t),t),Be=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var s=(r,e,t)=>(Be(r,e,"read from private field"),t?t.call(r):e.get(r)),o=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},u=(r,e,t,i)=>(Be(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var l=(r,e,t)=>(Be(r,e,"access private method"),t);var oe,ae,li=(r,e)=>(typeof e=="function"&&e(r),r),h=class{static get EMPTY_STRING(){return s(this,oe)}static get EMPTY_ARRAY(){return s(this,ae)}static noop(){}static isNonEmptyString(e){return typeof e=="string"&&!!e.length}static forcedStringSplit(e,t){return typeof e=="string"?e.split(t):new window.Array}static buildArray(e){return li(new window.Array,e)}static buildObject(e){return li(new window.Object,e)}static ensureFunction(e,t=()=>{}){return typeof e=="function"?e:t}static isOf(e,t){return e!=null&&(e.constructor===t||t!=null&&e.constructor.name===t.name)}static hasObjectKeys(e){return!!(e&&!!window.Object.keys(e).length)}static cloneObject(e){return window.Object.assign(new window.Object,e)}static forEachOwnProperty(e,t){e&&window.Object.getOwnPropertyNames(e).forEach(t)}static isAssignedObject(e){return typeof e=="object"&&e!==null}static isAssignedArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"}static isNonEmptyArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"&&!!e.length}};oe=new WeakMap,ae=new WeakMap,o(h,oe,new window.String().valueOf()),o(h,ae,window.Object.freeze(new window.Array));var lt=class{static onDOMContentLoaded(e){if(e&&e.constructor===window.Function){let t=()=>{e(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",t),100)};window.addEventListener("DOMContentLoaded",t)}}static getUniqueId(e="WUSE"){let t="_"+(e||"")+"_";for(var i;window.document.getElementById(i=t+(""+window.Math.random()).substring(2))!==null;);return i}static removeChildren(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static htmlEncode(e=""){return typeof e!="string"?null:e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static getCSSVendorPrefix(){let e=window.getComputedStyle(window.document.body,""),i=window.Array.prototype.slice.call(e).filter(n=>n.charAt(0)==="-");return i.length?"-"+i[0].split("-")[1]+"-":""}};var le,S,ze=class{static get UNKNOWN_ERROR(){return s(this,S).call(this,0,e=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return s(this,S).call(this,1,e=>`Unsupported feature: ${e}.`)}static get UNREGISTERED_CLASS(){return s(this,S).call(this,2,e=>`Unregistered class: ${e}.`)}static get UNREGISTRABLE_CLASS(){return s(this,S).call(this,3,e=>`Unregistrable class: ${e}.`)}static get INVALID_CLASS(){return s(this,S).call(this,4,e=>`Invalid class: ${e}.`)}static get MISNAMED_CLASS(){return s(this,S).call(this,5,e=>`Misnamed class: ${e}.`)}static get INVALID_DEFINITION(){return s(this,S).call(this,10,e=>`Invalid definition: ${e}.`)}static get INVALID_ID(){return s(this,S).call(this,11,e=>`Invalid id: ${e}.`)}static get INVALID_KEY(){return s(this,S).call(this,12,e=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return s(this,S).call(this,13,e=>"Call first: this.allowRawContent(true).")}static get INVALID_STATE(){return s(this,S).call(this,14,e=>"Invalid state.")}static get INEXISTENT_TEMPLATE(){return s(this,S).call(this,20,e=>`Inexistent template: #${e}.`)}static get EXTINCT_TEMPLATE(){return s(this,S).call(this,21,e=>`Extinct template: #${e}.`)}static get INVALID_TEMPLATE(){return s(this,S).call(this,22,e=>`Invalid template: #${e}.`)}static get UNESPECIFIED_SLOT(){return s(this,S).call(this,30,e=>`Unespecified slot: #${e}.`)}},y=ze;le=new WeakMap,S=new WeakMap,o(y,le,"[WUSE:ERROR]"),o(y,S,(e,t)=>({code:e,emit:i=>{let n=`${s(ze,le)} ${e} | ${t(i)}`;if(window.Wuse&&window.Wuse.FATALS||e<10)throw new window.Error(n);return window.console.error(n),null}}));var k,Ht,Ye,Gt=class{constructor(){o(this,Ht);o(this,k,new window.Object)}get length(){return l(this,Ht,Ye).call(this).length}key(e){return l(this,Ht,Ye).call(this)[e]||null}getItem(e){return s(this,k)[e]}setItem(e,t){s(this,k)[e]=t}removeItem(e){delete s(this,k)[e]}clear(){u(this,k,new window.Object)}hasItem(e){return s(this,k).hasOwnProperty(e)}};k=new WeakMap,Ht=new WeakSet,Ye=function(){return window.Object.keys(s(this,k))};var yt,It,{noop:di,ensureFunction:hi,isAssignedObject:Vi}=h,it=class{static fetch(e){let t=window.document.getElementById(e);return t===null?s(this,yt).call(this,e):t.tagName!=="TEMPLATE"?s(this,It).call(this,e):t.innerHTML}static initialize(e){Vi(e)&&(u(this,yt,hi(e.onExtinctTemplate,s(this,yt))),u(this,It,hi(e.onInvalidTemplate,s(this,It))))}};yt=new WeakMap,It=new WeakMap,o(it,yt,di),o(it,It,di);var we,ui,ci,ue,fe,At,de=r=>r>1e3?(r/1e3).toFixed(2)+"s":r.toFixed(2)+"ms",he=class{constructor(){a(this,"round",0);a(this,"domTime",window.Number.MAX_SAFE_INTEGER);a(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var e=new window.Object;return e.round=this.round,e.domTime=de(this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(e.renderTime=de(this.renderTime)),e}},ce=class{constructor(e){a(this,"name","");a(this,"rounds",0);a(this,"time",0);a(this,"average",0);this.name=e}compute(e){this.rounds++,this.time+=e,this.average=this.time/this.rounds}getDebugInfo(){let e=de(this.time),t=de(this.average);return{name:this.name,rounds:this.rounds,spent:e,average:t}}},_=class{static initialize(e){typeof e=="function"&&u(_,At,e),_.DOMUpdate.overall=new ce("overall-dom-update"),_.BrowserRender.overall=new ce("overall-browser-render")}},B=_;At=new WeakMap,o(B,At,()=>{}),a(B,"StopWatch",(ci=class{constructor(){o(this,we);a(this,"_begin",0);a(this,"_end",{dom:0,render:0});a(this,"rounds",0);a(this,"last",new he);a(this,"best",new he);a(this,"averages",{dom:0,render:0})}start(){(_.DOMUpdate.check||_.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(e){var t;_.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,_.DOMUpdate.overall.compute(this.last.domTime)),_.BrowserRender.check?setTimeout(()=>l(this,we,ui).bind(this)(e)):e&&s(t=_,At).call(t,this,"stop")}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages}}},we=new WeakSet,ui=function(e){var t;this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,_.BrowserRender.overall.compute(this.last.renderTime),e&&s(t=_,At).call(t,this,"finish")},ci)),a(B,"DOMUpdate",(ue=class{},a(ue,"check",!0),a(ue,"overall",null),ue)),a(B,"BrowserRender",(fe=class{},a(fe,"check",!1),a(fe,"overall",null),fe));var St,Tt,bt,vt,Ot,pe,pi,me,mi,Ee,Ei,ge,gi,{noop:Kt,ensureFunction:dt,isAssignedObject:fi,isAssignedArray:js,isNonEmptyArray:wi}=h,Xi=r=>r.toLowerCase().replaceAll("_","-"),b=class{static registerClasses(e){wi(e)&&window.Array.prototype.forEach.call(e,t=>typeof t=="function"?l(this,me,mi).call(this,t):s(this,bt).call(this,t))}static instantiateClasses(e,t,i){wi(e)&&window.Array.prototype.forEach.call(e,n=>window.customElements.get(n.tag)?l(this,ge,gi).call(this,n,t,fi(i)?i:new window.Object):s(this,Ot).call(this,n.name))}static initialize(e){fi(e)&&(u(this,St,dt(e.onDeferredInstantiation,s(this,St))),u(this,bt,dt(e.onInvalidClass,s(this,bt))),u(this,Tt,dt(e.onMisnamedClass,s(this,Tt))),u(this,vt,dt(e.onUnregistrableClass,s(this,vt))),u(this,Ot,dt(e.onUnregisteredClass,s(this,Ot))))}};St=new WeakMap,Tt=new WeakMap,bt=new WeakMap,vt=new WeakMap,Ot=new WeakMap,pe=new WeakSet,pi=function(e){window.HTMLElement.isPrototypeOf(e)?window.customElements.define(e.tag,e):s(this,vt).call(this,e.name)},me=new WeakSet,mi=function(e){e.name.indexOf("_")>0?(e.tag=Xi(e.name),l(this,pe,pi).call(this,e)):s(this,Tt).call(this,e.name)},Ee=new WeakSet,Ei=function(e,t,i){let n=null;try{n=window.document.querySelector(t)}catch(c){if(dt(i.onBadTarget)(t)===!1)return}finally{n=n||window.document.body}let d=window.document.createElement(e.tag);dt(i.onElementInstantiated)(d,t),n.appendChild(d)},ge=new WeakSet,gi=function(e,t,i){let n=()=>l(this,Ee,Ei).call(this,e,t,i);window.document.body?n():s(this,St).call(this,n)},o(b,pe),o(b,me),o(b,Ee),o(b,ge),o(b,St,Kt),o(b,Tt,Kt),o(b,bt,Kt),o(b,vt,Kt),o(b,Ot,Kt);var L=class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}};a(L,"specializeClass",(e,t)=>class extends e{constructor(){super(t)}});var v=class{static get TEMPLATES_KIND(){return"%templates%"}static get SLOTS_KIND(){return"%slots%"}static get TEXTNODE_TAG(){return"^text^"}static get DEFAULT_KIND(){return""}static get DEFAULT_TAG(){return"div"}static get DEFAULT_STYLE_MEDIA(){return"screen"}static get DEFAULT_STYLE_TYPE(){return"text/css"}static get DEFAULT_REPLACEMENT_OPEN(){return"~{"}static get DEFAULT_REPLACEMENT_CLOSE(){return"}~"}};var Pt,ye,ht,kt,Bt,{EMPTY_ARRAY:qi,buildArray:Je,buildObject:Qi,isNonEmptyString:Zi,isOf:ts}=h,Ct=class{static initialize(e,t){this.begin=e,this.end=t}},z=Ct;a(z,"begin",null),a(z,"end",null),a(z,"enclose",e=>Ct.begin+e+Ct.end),a(z,"makeRegExp",()=>new window.RegExp("(?<="+Ct.begin+").*?(?="+Ct.end+")","gs"));var es=["contents","classes","styles","attributes"],Nt=class{};a(Nt,"rules",(e,t)=>Je(i=>e.forEach(n=>n.replacements.forEach(d=>d.field===t&&i.push(n))))),a(Nt,"children",(e,t)=>Je(i=>{let n=d=>{let c=f=>f.forEach(A=>A.field===t&&i.push(d));es.forEach(f=>c(d.replacements[f])),d.rules.forEach(f=>f.replacements.forEach(A=>A.field===t&&i.push(d)))};e.forEach(d=>d.rendering&&n(d))}));var O=class{static initialize(e){u(this,Pt,e)}},M=O;Pt=new WeakMap,ye=new WeakMap,ht=new WeakMap,kt=new WeakMap,Bt=new WeakMap,o(M,Pt,null),o(M,ye,(e,t,i)=>e.push({at:t,field:i.trim(),find:z.enclose(i)})),o(M,ht,(e,t,i)=>Zi(i)&&(i.match(s(O,Pt))||qi).forEach(n=>{var d;return s(d=O,ye).call(d,e,t,n)})),o(M,kt,(e,t,i)=>{var n;e[t]=new window.Array,s(n=O,ht).call(n,e[t],t,i)}),o(M,Bt,(e,t,i)=>{e[t]=new window.Array,window.Object.keys(i).forEach(n=>{var d,c;s(d=O,ht).call(d,e[t],t,n),s(c=O,ht).call(c,e[t],t,i[n])})}),a(M,"child",e=>Qi(t=>{var i,n,d,c;s(i=O,kt).call(i,t,"contents",e.content),s(n=O,kt).call(n,t,"classes",e.classes.join(" ")),s(d=O,Bt).call(d,t,"styles",e.style),s(c=O,Bt).call(c,t,"attributes",e.attributes),e.rules.forEach(f=>f.replacements=O.rule(f))})),a(M,"rule",e=>Je(t=>{var n;if(ts(e.nested,window.Array))return e.nested.map(d=>O.rule(d));var i="";for(let d in e.properties)i+=`${d}:${e.properties[d]};`;s(n=O,ht).call(n,t,"rules",i)}));var R=class{static initialize(e,t){z.initialize(e,t),M.initialize(z.makeRegExp())}};a(R,"extractReplacementsFromRule",M.rule),a(R,"extractReplacementsFromChild",M.child),a(R,"scanRulesForReplacements",Nt.rules),a(R,"scanChildrenForReplacements",Nt.children);var Dt,{noop:is,isOf:ss,hasObjectKeys:yi,isNonEmptyString:Ii,isNonEmptyArray:ns,isAssignedObject:rs,ensureFunction:os}=h,{htmlEncode:Ai}=lt,{TEMPLATES_KIND:as,TEXTNODE_TAG:ls}=v,Ie=class{static initialize(e){rs(e)&&u(this,Dt,os(e.onFetchTemplate,s(this,Dt)))}},g=Ie;Dt=new WeakMap,o(g,Dt,is),a(g,"cacheInvalidator",e=>e.cache=null),a(g,"renderingIncluder",e=>e.rendering=!0),a(g,"renderingExcluder",e=>e.rendering=!1),a(g,"renderRule",(e,t)=>{if(ss(t.nested,window.Array))return`${t.selector}{${t.nested.map(n=>Ie.renderRule(e,n)).join(`
`)}}`;if(Ii(t.selector)&&!t.nested){var i=new window.String;for(let n in t.properties)i+=`${n}:${t.properties[n]};`;return ns(t.replacements)&&t.replacements.forEach(n=>i=e(i,n)),`${t.selector}{${i}}`}return null}),a(g,"renderChild",(e,t)=>{var d;if(t.kind===as)return s(d=Ie,Dt).call(d,t.id);if(t.tag===ls){var i=t.content;return t.replacements.contents.forEach(c=>i=e(i,c)),t.encode?Ai(i):i}var n=Ii(t.id)?`<${t.tag} id='${t.id}'`:`<${t.tag}`;if(t.classes.length){var i=t.classes.join(" ");t.replacements.classes.forEach(f=>i=e(i,f)),n+=` class='${i}'`}if(yi(t.style)){var i=" style='";for(let f in t.style)i+=f+": "+t.style[f]+"; ";i+="'",t.replacements.styles.forEach(f=>i=e(i,f)),n+=i}if(yi(t.attributes)){var i=new window.String;for(let f in t.attributes)i+=` ${f}=${t.attributes[f]}`;t.replacements.attributes.forEach(f=>i=e(i,f)),n+=i}if(typeof t.content=="string"){var i=t.content;t.replacements.contents.forEach(f=>i=e(i,f)),n+=`>${t.encode?Ai(i):i}</${t.tag}>`}else n+="/>";return n});var zt,Yt,Jt,Vt,_t=class{constructor(e){a(this,"rounds",0);o(this,zt,0);o(this,Yt,null);o(this,Jt,!1);o(this,Vt,null);u(this,Vt,typeof e=="function"?e:()=>{})}compute(e){return this.rounds+=+u(this,Jt,s(this,zt)==u(this,Yt,s(this,Vt).call(this,e))),u(this,zt,s(this,Yt)),s(this,Jt)}};zt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,Vt=new WeakMap;var ct,$,st,Ae,Si,Lt=class{constructor(e,t){o(this,Ae);o(this,ct,null);o(this,$,null);o(this,st,null);if(e instanceof Node&&t instanceof Node)u(this,ct,e),u(this,$,t),u(this,st,t.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return s(this,$)}affiliate(){s(this,ct).appendChild(s(this,$))}disaffiliate(){s(this,ct).removeChild(s(this,$))}promote(e){s(this,st).innerHTML=e,s(this,ct).replaceChild(s(this,st),s(this,$)),l(this,Ae,Si).call(this)}};ct=new WeakMap,$=new WeakMap,st=new WeakMap,Ae=new WeakSet,Si=function(){let e=s(this,st);u(this,st,s(this,$).cloneNode(!1)),u(this,$,e)};var ut,ft,wt=class{constructor(e){a(this,"owner",null);o(this,ut,!1);o(this,ft,"");this.owner=e}get invalidated(){return s(this,ut)}reset(e){u(this,ut,!1),u(this,ft,e)}append(e){u(this,ft,s(this,ft)+e)}verify(e){u(this,ut,e(s(this,ft)))}process(e){(e||s(this,ut))&&this.on_content_invalidation(s(this,ft))}on_content_invalidation(e){}};ut=new WeakMap,ft=new WeakMap;var Rt,Se,{isOf:Ve,cloneObject:Ti,forEachOwnProperty:bi,buildArray:ds}=h,pt=class extends window.Array{constructor(t){super();o(this,Rt);a(this,"owner",null);a(this,"last",null);a(this,"version",0);this.owner=t}append(t){Ve(t,window.Object)&&(this.push(t),l(this,Rt,Se).call(this,t))}prepend(t){Ve(t,window.Object)&&(this.unshift(t),l(this,Rt,Se).call(this,t))}replace(t,i){t>-1&&Ve(i,window.Object)&&l(this,Rt,Se).call(this,this[t]=i)}on_version_change(){}persist(){return ds(t=>bi(this,i=>{switch(i){case"owner":case"last":case"length":break;case"version":t[i]=this[i];break;default:if(window.Number.isInteger(window.Number(i))){let n=Ti(this[i]);n.cache&&(n.cache=null),t.push(n)}break}}))}restore(t){bi(t,i=>{switch(i){case"length":break;case"version":this[i]=t[i];break;default:if(window.Number.isInteger(window.Number(i))){let n=Ti(t[i]);n.cache&&(n.cache=null),this.push(n)}break}})}};Rt=new WeakSet,Se=function(t){this.last=t,this.version++,this.on_version_change()};var ve,Ci,Oe,Di,Ne,_i,Ce,Li,De,Ri,Mt,be,_e,Mi,{EMPTY_STRING:U,EMPTY_ARRAY:hs,noop:Te,buildArray:tn,buildObject:cs,isOf:N,hasObjectKeys:vi,isNonEmptyString:Y,forcedStringSplit:us}=h,{DEFAULT_TAG:fs,DEFAULT_KIND:ws,TEMPLATES_KIND:Xe,SLOTS_KIND:qe}=v,nt={onInvalidDefinition:Te,onInexistentTemplate:Te,onUnespecifiedSlot:Te,onInvalidId:Te},J=class{static parse(e){if(Y(e)){let t=e.trimLeft(),i=Oi();return t.charAt(0)==="%"?t.startsWith(Xe)?l(this,Mt,be).call(this,i,t.replace(i.kind=Xe,U)):t.startsWith(qe)?l(this,Mt,be).call(this,i,t.replace(i.kind=qe,U)):null:l(this,Mt,be).call(this,i,t)}return null}};ve=new WeakSet,Ci=function(e,t){let i=t.indexOf("["),n=t.indexOf("]");if(i>-1&&n>-1&&n>i){let d=t.substr(i,n-i+1),c=d.substr(1,d.length-2).split("|");for(let f in c){let A=c[f].split("=");A[0]==="style"?A[1].split(";").forEach(x=>{let oi=x.split(":"),ai=oi[0].trim();ai.length&&(e.style[ai]=oi[1].trim())}):e.attributes[A[0]]=A[1]}return t.replace(d,U)}return t},Oe=new WeakSet,Di=function(e,t){let i=t.indexOf("=");return i>-1?(e.content=t.slice(i+1),!!e.content.length&&e.content.charAt(0)==="&"&&(e.content=e.content.slice(1),e.encode=!!e.content.length&&e.content.charAt(0)!=="&"),t.slice(0,i)):t},Ne=new WeakSet,_i=function(e,t){let i=t.replaceAll("!"," ").split(" ");return i.slice(1).map(n=>{let[d,...c]=n.toLowerCase().split("+"),f=(c||hs).indexOf("capture")>-1;e.events.push(Ni(d,f))}),i[0]},Ce=new WeakSet,Li=function(e,t){let i=t.replaceAll("."," ").split(" ");return e.classes=i.slice(1),i[0]},De=new WeakSet,Ri=function(e,t){if(Y(t)){let i=t.indexOf("#");i===-1?e.tag=t:(i>0&&(e.tag=t.substr(0,i)),e.id=t.substr(i+1))}return e},Mt=new WeakSet,be=function(e,t){return l(this,De,Ri).call(this,e,l(this,Ce,Li).call(this,e,l(this,Ne,_i).call(this,e,l(this,Oe,Di).call(this,e,l(this,ve,Ci).call(this,e,t)))))},o(J,ve),o(J,Oe),o(J,Ne),o(J,Ce),o(J,De),o(J,Mt);var Xt=class{static parse(e){return cs(t=>(N(e,window.Array)?e:us(e,`
`).map(i=>i.trim()).join(U).split(";")).forEach(i=>Y(i)&&l(this,_e,Mi).call(this,t,i.trim())))}};_e=new WeakSet,Mi=function(e,t){if(!!t.length&&t.indexOf(":")>-1){let[i,...n]=t.split(":"),d=i.trim();if(d.length){let c=n.join(":").trim();e[d]=c.endsWith(";")?c.slice(0,-1):c}}},o(Xt,_e);var Oi=()=>({kind:ws,tag:fs,id:U,classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:U,encode:!1}),ps=()=>({generation:0,persisted:!1}),Ni=(r,e)=>typeof r=="string"&&typeof e=="boolean"?{kind:r,capture:e}:null,ms=(r,e)=>{let t=J.parse(r);return t?(t.rules=N(e,window.Array)?e:new window.Array,t.rendering=!0,t.cache=null,t):nt.onInvalidDefinition(r)},Es=r=>{if(r!==null){if(r.kind===Xe){if(!window.document.getElementById(r.id))return nt.onInexistentTemplate(r.id)}else if(r.kind===qe){if(new window.String(r.attributes.slot).replaceAll('"',U).replaceAll("'",U).length===0)return nt.onUnespecifiedSlot(r.id)}else if(typeof r.id!="string"||Y(r.id)&&window.document.getElementById(r.id)!==null)return nt.onInvalidId(r.id)}return r},gs=r=>{if(!N(r,window.Object))return null;let e=window.document.createElement(r.tag);if(r.id.length&&e.setAttribute("id",r.id),r.classes.length&&e.setAttribute("class",r.classes.join(" ")),vi(r.style)){var t=new window.String;for(let i in r.style)t+=i+": "+r.style[i]+"; ";if(t.length){let i=t.trim();e.setAttribute("style",i.endsWith(";")?i.slice(0,-1):i)}}if(vi(r.attributes))for(let i in r.attributes)e.setAttribute(i,r.attributes[i]);return e},ys=(r,e)=>{let t=window.document.createElement("style");return Y(r)&&t.setAttribute("media",r),Y(e)&&t.setAttribute("type",e),t.appendChild(window.document.createTextNode(U)),t},Is=(r,e)=>{let t=N(r,window.Array)?r.join(","):Y(r)?r:U;return t.length?{selector:t,properties:N(e,window.Object)?e:Xt.parse(e),cache:null}:null},As=(r,e,t)=>{let i=N(r,window.Array)?r.join(","):Y(r)?r:U,n=N(e,window.Array)?e.join(","):Y(e)?e:U;return!i.length||!n.length?null:{selector:i,nested:[{selector:n,properties:N(t,window.Object)?t:Xt.parse(t)}],cache:null}},Ss=(r,e)=>{if(r.selector===e.selector){for(let t in e.properties)r.properties[t]=e.properties[t];return r.cache=null,!0}return!1},Ts=(r,e)=>N(r.nested,window.Array)&&r.selector===e.selector?(e.nested.forEach(t=>{var i=!1;for(let n in r.nested)if(i=r.nested[n].selector===t.selector){for(let d in t.properties)r.nested[n].properties[d]=t.properties[d];break}i||r.nested.push(t)}),r.cache=null,!0):!1,w=class{static initialize(e){N(e,window.Object)&&(N(e.onInvalidDefinition,window.Function)&&(nt.onInvalidDefinition=e.onInvalidDefinition),N(e.onInexistentTemplate,window.Function)&&(nt.onInexistentTemplate=e.onInexistentTemplate),N(e.onUnespecifiedSlot,window.Function)&&(nt.onUnespecifiedSlot=e.onUnespecifiedSlot),N(e.onInvalidId,window.Function)&&(nt.onInvalidId=e.onInvalidId))}};a(w,"makeStyleNode",ys),a(w,"newRule",Is),a(w,"newNestedRule",As),a(w,"tryToJoinRules",Ss),a(w,"tryToJoinNestedRules",Ts),a(w,"performValidations",Es),a(w,"makeMainNode",gs),a(w,"newChild",ms),a(w,"newDefinition",Oi),a(w,"newEvent",Ni),a(w,"newState",ps);var F,T,I,H,E,Wt,V,X,rt,K,q,qt,Et,Q,ot,C,Z,tt,p,Ft,Qt,gt,j,et,mt,Me,Wi,Ue,Fi,We,ji,Fe,xi,at,Ut,Zt,Qe,te,Ze,ee,ti,je,$i,ie,ei,xe,Gi,se,ii,$e,Hi,D,W,ne,si,jt,Ge,Ki,xt,Le,He,Pi,$t,Re;function Ui(r,e,t,i,n){let d=(A,x)=>window.Object.defineProperty(r,e,{get:A,set:x,enumerable:!0,configurable:!0}),c=()=>delete r[e],f=(A,x)=>Ui(r,e,A,x,n);d(()=>t,A=>{f(A,i),h.isOf(i,window.Function)?i({renderize:x=>n(e,x),automate:()=>f(A,null),freeze:()=>d(()=>A,x=>{}),defreeze:()=>f(A,i),dereact:()=>d(()=>A,x=>{c(),r[e]=x}),remove:()=>c()}):n(e)})}var bs=["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"],G={onInvalidKey:h.noop,onInvalidDefinition:h.noop,onAllowHTML:h.noop},ni=class extends window.HTMLElement{constructor(t){super();o(this,et);o(this,Me);o(this,Ue);o(this,We);o(this,Fe);o(this,at);o(this,Zt);o(this,te);o(this,ee);o(this,je);o(this,ie);o(this,xe);o(this,se);o(this,$e);o(this,D);o(this,ne);o(this,Ge);o(this,xt);o(this,He);o(this,$t);o(this,F,new window.String);o(this,T,new class extends pt{on_version_change(){var t;this.last.version=this.version,this.last.replacements=R.extractReplacementsFromRule(this.last),window.Wuse.DEBUG&&l(t=this.owner,et,mt).call(t,`rules list version change: ${this.version}`)}}(this));o(this,I,new class extends pt{on_version_change(){var t,i;this.last.version=this.version,this.last.replacements=R.extractReplacementsFromChild(this.last),u(t=this.owner,X,s(t,X)|this.last.kind===v.SLOTS_KIND),window.Wuse.DEBUG&&l(i=this.owner,et,mt).call(i,`children list version change: ${this.version}`)}}(this));o(this,H,new class extends pt{on_version_change(){var t;window.Wuse.DEBUG&&l(t=this.owner,et,mt).call(t,`fields list version change: ${this.version}`)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));o(this,E,{mainDefinition:w.newDefinition(),styleMedia:v.DEFAULT_STYLE_MEDIA,styleType:v.DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0});o(this,Wt,new window.Object);o(this,V,!1);o(this,X,!1);o(this,rt,void 0);o(this,K,void 0);o(this,q,null);o(this,qt,window.Wuse.isShadowElement(this));o(this,Et,!1);o(this,Q,!1);o(this,ot,window.Wuse.elementsStorage);o(this,C,null);o(this,Z,new window.String);o(this,tt,!1);o(this,p,{root:new class extends wt{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends wt{on_content_invalidation(t){s(this.owner,K).promote(t)}}(this),main:new class extends wt{on_content_invalidation(t){s(this.owner,rt).promote(t)}}(this),renderizers:{rule:t=>s(this,p).style.append(t.cache?t.cache:t.cache=g.renderRule(s(this,Ft),t)),children:{mixed:t=>s(this,qt)&&t.kind===v.SLOTS_KIND?s(this,p).renderizers.children.slot(t):s(this,p).renderizers.children.normal(t),slot:t=>{t.cache||(s(this,p).root.verify(i=>!0),s(this,p).root.append(t.cache=g.renderChild(s(this,Ft),t)))},normal:t=>{s(this,p).main.append(t.cache?t.cache:t.cache=g.renderChild(s(this,Ft),t)),t.rules.forEach(s(this,p).renderizers.rule)}}},gotModified:()=>s(this,p).root.invalidated||s(this,p).main.invalidated||s(this,p).style.invalidated,getDebugInfo:()=>`updated (root: ${s(this,p).root.invalidated}, main: ${s(this,p).main.invalidated}, style: ${s(this,p).style.invalidated})`});o(this,Ft,(t,i)=>t.replace(i.find,this[i.field]!==void 0?this[i.field]:h.EMPTY_STRING));o(this,Qt,{bind:{key:()=>{let t=i=>{h.isNonEmptyString(i)&&(this[i]=l(this,Zt,Qe).call(this,i))};return s(this,V)&&t(s(this,E).mainDefinition.id),i=>t(i.id)},event:"addEventListener"},unbind:{key:()=>{let t=i=>delete this[i];return s(this,V)&&t(s(this,E).mainDefinition.id),i=>t(i.id)},event:"removeEventListener"}});o(this,gt,{main:new _t(window.Wuse.hashRoutine),style:new _t(window.Wuse.hashRoutine)});o(this,j,{attachment:new window.Wuse.PerformanceMeasurement.StopWatch,partial:new window.Wuse.PerformanceMeasurement.StopWatch,full:new window.Wuse.PerformanceMeasurement.StopWatch,dettachment:new window.Wuse.PerformanceMeasurement.StopWatch});o(this,jt,()=>bs.forEach(t=>s(this,Wt)[t]=typeof this[t]=="function"));a(this,"info",{instanceNumber:++ni.instancesCount,unmodifiedRounds:0,updatedRounds:0});u(this,q,t!==L.REGULAR?this.attachShadow({mode:t}):this),s(this,jt).call(this),l(this,D,W).call(this,"on_create"),s(this,E).attributeKeys&&this.getAttributeNames().forEach(i=>this[i]=this.getAttribute(i)),l(this,Ge,Ki).call(this)&&s(this,C).generation>1?l(this,D,W).call(this,"on_reconstruct",s(this,C)):l(this,D,W).call(this,"on_construct")}get render(){return s(this,Q)?l(this,je,$i):h.noop}get redraw(){return s(this,Q)?l(this,xe,Gi):h.noop}connectedCallback(){window.Wuse.MEASURE&&s(this,j).attachment.start(),s(this,jt).call(this),l(this,D,W).call(this,"on_connect"),l(this,ie,ei).call(this,"on_load"),s(this,tt)&&this.persistToElementsStore(),window.Wuse.MEASURE&&s(this,j).attachment.stop(window.Wuse.DEBUG)}disconnectedCallback(){window.Wuse.MEASURE&&s(this,j).dettachment.start(),l(this,at,Ut).call(this,!1),l(this,D,W).call(this,"on_disconnect"),window.Wuse.MEASURE&&s(this,j).dettachment.stop(window.Wuse.DEBUG)}getElementsStore(){return s(this,ot)}setElementsStore(t){u(this,ot,t)}hasElementsStoreKey(t){return s(this,tt)}getElementsStoreKey(t){return s(this,Z)}setElementsStoreKey(t){return u(this,tt,h.isNonEmptyString(u(this,Z,t))),this}persistToElementsStore(){if(l(this,$t,Re).call(this)){let t=s(this,C);if(h.isOf(t,window.Object))return s(this,H).snapshot(),t.data=new window.Object({options:s(this,E),html:s(this,F),children:s(this,I).persist(),rules:s(this,T).persist(),fields:s(this,H).persist(),slotted:s(this,X),identified:s(this,V)}),l(this,xt,Le).call(this),!0}return!1}restoreFromElementsStore(){if(l(this,$t,Re).call(this)){let t=s(this,C);if(h.isOf(t,window.Object)&&t.persisted&&t.data)return u(this,E,t.data.options),u(this,X,t.data.slotted),u(this,V,t.data.identified),u(this,F,t.data.html),s(this,I).restore(t.data.children),s(this,I).owner=this,s(this,T).restore(t.data.rules),s(this,T).owner=this,s(this,H).restore(t.data.fields),s(this,H).owner=this,s(this,H).recall(),!0}return!1}removeFromElementsStore(){return l(this,$t,Re).call(this)&&l(this,He,Pi).call(this)}selectChildElement(t){return s(this,q).querySelector(t)}setMainAttribute(t,i){s(this,Et)&&s(this,rt).element.setAttribute(t,i)}setMainElement(t){let i=w.performValidations(w.newChild(t));if(i!==null){if(h.isNonEmptyString(i.content)||h.isNonEmptyArray(i.events))return G.onInvalidDefinition(t);u(this,V,h.isNonEmptyString(i.id))&&(s(this,E).mainDefinition.id=i.id),h.isNonEmptyString(i.tag)&&(s(this,E).mainDefinition.tag=i.tag),h.isNonEmptyArray(i.classes)&&(s(this,E).mainDefinition.classes=i.classes),h.isOf(i.style,window.Object)&&(s(this,E).mainDefinition.style=i.style),h.isOf(i.attributes,window.Array)&&(s(this,E).mainDefinition.attributes=i.attributes)}return this}setStyleOptions(t,i){return s(this,E).styleMedia=h.isNonEmptyString(t)?t:h.EMPTY_STRING,s(this,E).styleType=h.isNonEmptyString(i)?i:h.EMPTY_STRING,this}setElementsAsKeys(t){return s(this,E).elementKeys=!!t,this}setAttributesAsKeys(t){return s(this,E).attributeKeys=!!t,this}allowRawContent(t){return s(this,E).rawContent=!!t,this}setRawContent(t){return s(this,E).rawContent?u(this,F,t):G.onAllowHTML(),this}appendRawContent(t){return s(this,E).rawContent?u(this,F,s(this,F)+t):G.onAllowHTML(),this}prependRawContent(t){return s(this,E).rawContent?u(this,F,t+s(this,F)):G.onAllowHTML(),this}appendCSSRule(t,i,n){if(n)return this.appendCSSNestedRule(t,i,n);let d=s(this,T).slice(-1),c=w.newRule(t,i);return(!d.length||!w.tryToJoinRules(d[0],c))&&s(this,T).append(c),this}prependCSSRule(t,i,n){if(n)return this.prependCSSNestedRule(t,i,n);let d=s(this,T).slice(0,1),c=w.newRule(t,i);return(!d.length||!w.tryToJoinRules(d[0],c))&&s(this,T).prepend(c),this}appendCSSNestedRule(t,i,n){let d=s(this,T).slice(-1),c=w.newNestedRule(t,i,n);return(!d.length||!w.tryToJoinNestedRules(d[0],c))&&s(this,T).append(c),this}prependCSSNestedRule(t,i,n){let d=s(this,T).slice(0,1),c=w.newNestedRule(t,i,n);return(!d.length||!w.tryToJoinNestedRules(d[0],c))&&s(this,T).prepend(c),this}appendChildElement(t,i){let n=w.performValidations(w.newChild(t,i));return n!==null&&s(this,I).append(n),this}prependChildElement(t,i){let n=w.performValidations(w.newChild(t,i));return n!==null&&s(this,I).prepend(n),this}appendChildElements(t){return(h.isOf(t,window.Array)?t:h.forcedStringSplit(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.appendChildElement(i)),this}prependChildElements(t){return(h.isOf(t,window.Array)?t:h.forcedStringSplit(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.prependChildElement(i)),this}replaceChildElementById(t,i,n){let d=w.newChild(i,n);return d!==null&&s(this,I).replace(s(this,I).findIndex(c=>c.id===t),d),this}checkChildElementIsIncludedById(t,i,n){let d=c=>h.isOf(c,window.Function)?c():void 0;return s(this,I).some(c=>c.id===t&&c.rendering)?d(i):d(n),this}includeChildElementById(t){return s(this,I).forEach(i=>i.id===t&&g.renderingIncluder(i)),this}excludeChildElementById(t){return s(this,I).forEach(i=>i.id===t&&g.renderingExcluder(i)),this}invalidateChildElementsById(t){return s(this,I).forEach(i=>t.indexOf(i.id)>-1&&g.cacheInvalidator(i)),this}invalidateChildElements(t){return h.isOf(t,window.Array)&&t.forEach(g.cacheInvalidator),this}makeField(t,i){return this[t]=i,s(this,H).append({name:t,value:i}),this}makeReactiveField(t,i,n,d=!0){return l(this,$e,Hi).call(this,t,i,n,d)}makeExternalReactiveField(t,i,n,d,c=!0){return this.makeReactiveField(i,t[i]||n,f=>{t[i]=this[i],d(f)},c)}static initialize(t){if(R.initialize(v.DEFAULT_REPLACEMENT_OPEN,v.DEFAULT_REPLACEMENT_CLOSE),h.isOf(t,window.Object)){h.isOf(t.onFetchTemplate,window.Function)&&g.initialize({onFetchTemplate:t.onFetchTemplate}),h.isOf(t.onAllowHTML,window.Function)&&(G.onAllowHTML=t.onAllowHTML),h.isOf(t.onInvalidKey,window.Function)&&(G.onInvalidKey=t.onInvalidKey),h.isOf(t.onInvalidState,window.Function)&&(G.onInvalidState=t.onInvalidState);let i={onInvalidDefinition:h.noop,onInexistentTemplate:h.noop,onUnespecifiedSlot:h.noop,onInvalidId:h.noop};h.isOf(t.onInvalidDefinition,window.Function)&&(G.onInvalidDefinition=t.onInvalidDefinition,i.onInvalidDefinition=t.onInvalidDefinition),h.isOf(t.onInexistentTemplate,window.Function)&&(i.onInexistentTemplate=t.onInexistentTemplate),h.isOf(t.onUnespecifiedSlot,window.Function)&&(i.onUnespecifiedSlot=t.onUnespecifiedSlot),h.isOf(t.onInvalidId,window.Function)&&(i.onInvalidId=t.onInvalidId),w.initialize(i)}}},P=ni;F=new WeakMap,T=new WeakMap,I=new WeakMap,H=new WeakMap,E=new WeakMap,Wt=new WeakMap,V=new WeakMap,X=new WeakMap,rt=new WeakMap,K=new WeakMap,q=new WeakMap,qt=new WeakMap,Et=new WeakMap,Q=new WeakMap,ot=new WeakMap,C=new WeakMap,Z=new WeakMap,tt=new WeakMap,p=new WeakMap,Ft=new WeakMap,Qt=new WeakMap,gt=new WeakMap,j=new WeakMap,et=new WeakSet,mt=function(t){s(this,V)&&window.Wuse.debug(`#${s(this,E).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},Me=new WeakSet,Wi=function(){s(this,K)&&s(this,K).affiliate(),s(this,rt).affiliate(),u(this,Et,!0)},Ue=new WeakSet,Fi=function(){u(this,K,s(this,T).length?new Lt(s(this,q),w.makeStyleNode(s(this,E).styleMedia,s(this,E).styleType)):null),u(this,rt,new Lt(s(this,q),w.makeMainNode(s(this,E).mainDefinition))),s(this,I).forEach(g.cacheInvalidator),s(this,T).forEach(g.cacheInvalidator)},We=new WeakSet,ji=function(){s(this,Et)&&(s(this,rt).disaffiliate(),s(this,K)&&s(this,K).disaffiliate(),s(this,X)&&s(this,qt)&&window.Wuse.WebHelpers.removeChildren(this)),u(this,Et,!1)},Fe=new WeakSet,xi=function(t){return{key:s(this,E).elementKeys&&t.key(),event:(i,n,d)=>{let c=this[`on_${i}_${n}`];if(c){let f=l(this,Zt,Qe).call(this,i);f&&f[t.event](n,c,d)}},slots:()=>this.on_slot_change&&s(this,q).querySelectorAll("slot").forEach(i=>i[t.event]("slotchange",this.on_slot_change))}},at=new WeakSet,Ut=function(t){if(s(this,Q)&&!t||!s(this,Q)&&t){let i=l(this,Fe,xi).call(this,t?s(this,Qt).bind:s(this,Qt).unbind);s(this,I).forEach(n=>{!n.rendering&&t||(i.key&&i.key(n),n.events.forEach(d=>d&&i.event(n.id,d.kind,d.capture)))}),s(this,X)&&i.slots(),u(this,Q,t)}},Zt=new WeakSet,Qe=function(t){return h.isNonEmptyString(t)?s(this,q).querySelector(`#${t}`):void 0},te=new WeakSet,Ze=function(){s(this,p).root.reset(h.EMPTY_STRING),s(this,p).style.reset(h.EMPTY_STRING),s(this,p).main.reset(s(this,F));let t=s(this,X)?s(this,p).renderizers.children.mixed:s(this,p).renderizers.children.normal;s(this,I).forEach(i=>i.rendering&&t(i)),s(this,T).forEach(s(this,p).renderizers.rule),s(this,p).main.verify(i=>!s(this,gt).main.compute(i)),s(this,p).style.verify(i=>!s(this,gt).style.compute(i))},ee=new WeakSet,ti=function(t,i,n){s(this,p).root.process(t),s(this,p).style.process(i),s(this,p).main.process(n),window.Wuse.DEBUG&&l(this,et,mt).call(this,s(this,p).getDebugInfo())},je=new WeakSet,$i=function(){!window.Wuse.RENDERING||(window.Wuse.MEASURE&&s(this,j).partial.start(),l(this,D,W).call(this,"on_prerender"),l(this,te,Ze).call(this),s(this,p).gotModified()?(l(this,at,Ut).call(this,!1),l(this,ee,ti).call(this,!1,!1,!1),l(this,at,Ut).call(this,!0),this.info.updatedRounds++,l(this,D,W).call(this,"on_update"),l(this,ne,si).call(this,"on_refresh")):this.info.unmodifiedRounds++,window.Wuse.DEBUG&&l(this,et,mt).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${s(this,gt).main.rounds}, style: ${s(this,gt).style.rounds}) | updated: ${this.info.updatedRounds}`),l(this,D,W).call(this,"on_postrender"),window.Wuse.MEASURE&&s(this,j).partial.stop(window.Wuse.DEBUG))},ie=new WeakSet,ei=function(t){l(this,Ue,Fi).call(this),l(this,Me,Wi).call(this),l(this,D,W).call(this,"on_inject"),l(this,te,Ze).call(this),l(this,ee,ti).call(this,!1,!!s(this,K),!0),l(this,at,Ut).call(this,!0),l(this,D,W).call(this,t)},xe=new WeakSet,Gi=function(){window.Wuse.MEASURE&&s(this,j).full.start(),l(this,at,Ut).call(this,!1),l(this,We,ji).call(this),l(this,D,W).call(this,"on_unload"),s(this,jt).call(this),l(this,ie,ei).call(this,"on_reload"),l(this,ne,si).call(this,"on_repaint"),window.Wuse.MEASURE&&s(this,j).full.stop(window.Wuse.DEBUG)},se=new WeakSet,ii=function(t,i="$none"){if(s(this,Q)){let n=R.scanRulesForReplacements(s(this,T),t);n.forEach(g.cacheInvalidator);let d=R.scanChildrenForReplacements(s(this,I),t);d.forEach(g.cacheInvalidator),window.Wuse.DEBUG&&l(this,et,mt).call(this,`reactive render (label: ${i}, field: ${t}, children: ${d.length}, rules: ${n.length})`),(!!n.length||!!d.length)&&(d.some(c=>!!c.kind.length)&&s(this,I).forEach(c=>c.kind===v.SLOTS_KIND?g.cacheInvalidator(c):void 0),this.render())}},$e=new WeakSet,Hi=function(t,i,n,d=!0){return Ui(this,t,i,n,(c,f)=>l(this,se,ii).call(this,c,f||"$auto")),s(this,H).append({name:t,value:i}),d&&l(this,se,ii).call(this,t,"$init"),this},D=new WeakSet,W=function(t,i){s(this,Wt)[t]&&this[t].call(this,i)},ne=new WeakSet,si=function(t,i){s(this,tt)&&this.persistToElementsStore(),s(this,Wt)[t]&&window.requestAnimationFrame(()=>this[t].call(this,i))},jt=new WeakMap,Ge=new WeakSet,Ki=function(){if(s(this,tt)){let t=s(this,ot).hasItem(s(this,Z))?s(this,ot).getItem(s(this,Z)):w.newState();if(h.isOf(t,window.Object))return u(this,C,t),s(this,C).generation++,l(this,xt,Le).call(this),!0;G.onInvalidState()}return!1},xt=new WeakSet,Le=function(){window.Wuse.DEBUG&&(s(this,C).key=s(this,Z)),s(this,C).persisted=!!s(this,C).data,s(this,ot).setItem(s(this,Z),s(this,C))},He=new WeakSet,Pi=function(){let t=s(this,C);return h.isOf(t,window.Object)&&t.persisted&&t.data?(delete t.data,l(this,xt,Le).call(this),!0):!1},$t=new WeakSet,Re=function(){return s(this,tt)?!0:(G.onInvalidKey(),!1)},a(P,"instancesCount",0);var e,m,Ke,ki,Pe,Bi,re,ri,ke,zi;window.Wuse=(m=class{static get VERSION(){return"0.5.1"}static get elementCount(){return P.instancesCount}},Ke=new WeakSet,ki=function(e){let t=(i,n)=>!i&&y.UNSUPPORTED_FEATURE.emit(n);try{t(e.JsHelpers.isOf(window.document,window.HTMLDocument),"HTML Document"),t(e.JsHelpers.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),e.WebHelpers.onDOMContentLoaded(()=>t(e.JsHelpers.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(i){y.UNKNOWN_ERROR.emit()}},Pe=new WeakSet,Bi=function(e){e.PerformanceMeasurement.initialize((t,i)=>e.debug(JSON.stringify(e.JsHelpers.buildArray(n=>{switch(n.push({instances:e.elementCount}),n.push(t.getDebugInfo()),i){case"stop":n.push(e.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo());break;case"finish":n.push(e.PerformanceMeasurement.BrowserRender.overall.getDebugInfo());break}})))),it.initialize({onExtinctTemplate:y.EXTINCT_TEMPLATE.emit,onInvalidTemplate:y.INVALID_TEMPLATE.emit}),b.initialize({onMisnamedClass:y.MISNAMED_CLASS.emit,onUnregistrableClass:y.UNREGISTRABLE_CLASS.emit,onUnregisteredClass:y.UNREGISTERED_CLASS.emit,onInvalidClass:y.INVALID_CLASS.emit,onDeferredInstantiation:e.WebHelpers.onDOMContentLoaded}),P.initialize({onAllowHTML:y.ALLOW_HTML.emit,onInvalidKey:y.INVALID_KEY.emit,onInvalidDefinition:y.INVALID_DEFINITION.emit,onInexistentTemplate:y.INEXISTENT_TEMPLATE.emit,onUnespecifiedSlot:y.UNESPECIFIED_SLOT.emit,onInvalidId:y.INVALID_ID.emit,onInvalidState:y.INVALID_STATE.emit,onFetchTemplate:it.fetch})},re=new WeakSet,ri=function(e,t){window.Object.getOwnPropertyNames(t).forEach(i=>Object.defineProperty(e,i,{value:t[i],writable:!1,configurable:!1,enumerable:!1}))},ke=new WeakSet,zi=function(e,t){l(this,re,ri).call(this,e,t.fields),l(this,re,ri).call(this,e,t.methods),l(this,Ke,ki).call(this,e),l(this,Pe,Bi).call(this,e)},o(m,Ke),o(m,Pe),o(m,re),o(m,ke),a(m,"DEBUG",!1),a(m,"FATALS",!1),a(m,"MEASURE",!1),a(m,"RENDERING",!0),a(m,"hashRoutine",e=>{var t=0;for(let i=0;i<e.length;i++)t=(t=(t<<5)-t+e.charCodeAt(i))&t;return t}),a(m,"elementsStorage",new Gt),a(m,"tmp",null),a(m,"WebHelpers",null),a(m,"JsHelpers",null),a(m,"PerformanceMeasurement",null),a(m,"NonShadowElement",null),a(m,"OpenShadowElement",null),a(m,"ClosedShadowElement",null),a(m,"debug",h.noop),a(m,"blockUpdate",h.noop),a(m,"register",h.noop),a(m,"instantiate",h.noop),a(m,"isShadowElement",h.noop),(()=>{l(e=m,ke,zi).call(e,m,{fields:{tmp:new window.Object,WebHelpers:lt,JsHelpers:h,PerformanceMeasurement:B,NonShadowElement:L.specializeClass(P,L.REGULAR),OpenShadowElement:L.specializeClass(P,L.OPEN),ClosedShadowElement:L.specializeClass(P,L.CLOSED)},methods:{debug:t=>window.console.log("[WUSE:DEBUG]",t),blockUpdate:(t,i)=>{if(h.isOf(t,Function)){window.Wuse.DEBUG&&window.Wuse.debug("blocking"),window.Wuse.RENDERING=!1;try{t(i)}catch(n){throw n}finally{window.Wuse.RENDERING=!0,window.Wuse.DEBUG&&window.Wuse.debug("unblocking")}}},register:t=>b.registerClasses(h.isOf(t,window.Array)?t:new window.Array(t)),instantiate:(t,i,n)=>b.instantiateClasses(h.isOf(t,window.Array)?t:new window.Array(t),i,n),isShadowElement:t=>{let i=window.Object.getPrototypeOf(t.constructor);return i===window.Wuse.OpenShadowElement||i===window.Wuse.ClosedShadowElement}}})})(),m);})();
