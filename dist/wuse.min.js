(()=>{var qi=Object.defineProperty;var Xi=(s,e,t)=>e in s?qi(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(Xi(s,typeof e!="symbol"?e+"":e,t),t),Ye=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var i=(s,e,t)=>(Ye(s,e,"read from private field"),t?t.call(s):e.get(s)),o=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},c=(s,e,t,n)=>(Ye(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);var l=(s,e,t)=>(Ye(s,e,"access private method"),t);var D=(s,e)=>({code:s,emit:t=>{let n=s<80?"error":"warn",r=`[WUSE:${n.toUpperCase()}] ${s} | ${e(t)}`;if(window.Wuse&&window.Wuse.FATALS||s<10)throw new window.Error(r);return window.console[n](r),null}}),y=class{static get UNKNOWN_ERROR(){return D(0,e=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return D(1,e=>`Unsupported feature: ${e}.`)}static get UNREGISTERED_CLASS(){return D(2,e=>`Unregistered class: ${e}.`)}static get UNREGISTRABLE_CLASS(){return D(3,e=>`Unregistrable class: ${e}.`)}static get INVALID_CLASS(){return D(4,e=>`Invalid class: ${e}.`)}static get MISNAMED_CLASS(){return D(5,e=>`Misnamed class: ${e}.`)}static get ALREADY_REGISTERED(){return D(6,e=>`Already registered: ${e}.`)}static get INVALID_DEFINITION(){return D(10,e=>`Invalid definition: ${e}.`)}static get INVALID_ID(){return D(11,e=>`Invalid id: ${e}.`)}static get INVALID_KEY(){return D(12,e=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return D(13,e=>"Call first: this.allowRawContent(true).")}static get INVALID_STATE(){return D(14,e=>"Invalid state.")}static get INEXISTENT_TEMPLATE(){return D(20,e=>`Inexistent template: #${e}.`)}static get EXTINCT_TEMPLATE(){return D(21,e=>`Extinct template: #${e}.`)}static get INVALID_TEMPLATE(){return D(22,e=>`Invalid template: #${e}.`)}static get UNESPECIFIED_SLOT(){return D(30,e=>`Unespecified slot: #${e}.`)}static get LOCKED_DEFINITION(){return D(40,e=>`Locked definition: #${e}.`)}static get UNKNOWN_TAG(){return D(80,e=>`Unknown tag: ${e}.`)}};var me,pe,li=(s,e)=>(typeof e=="function"&&e(s),s),g=class{static get EMPTY_STRING(){return i(this,me)}static get EMPTY_ARRAY(){return i(this,pe)}static noop(){}static isNonEmptyString(e){return typeof e=="string"&&!!e.length}static forcedStringSplit(e,t){return typeof e=="string"?e.split(t):new window.Array}static buildArray(e){return li(new window.Array,e)}static buildObject(e){return li(new window.Object,e)}static ensureFunction(e,t=()=>{}){return typeof e=="function"?e:t}static isOf(e,t){return e!=null&&(e.constructor===t||t!=null&&e.constructor.name===t.name)}static hasObjectKeys(e){return!!(e&&!!window.Object.keys(e).length)}static cloneObject(e){return window.Object.assign(new window.Object,e)}static forEachOwnProperty(e,t){e&&window.Object.getOwnPropertyNames(e).forEach(t)}static isAssignedObject(e){return typeof e=="object"&&e!==null}static isAssignedArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"}static isNonEmptyArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"&&!!e.length}};me=new WeakMap,pe=new WeakMap,o(g,me,new window.String().valueOf()),o(g,pe,window.Object.freeze(new window.Array));var Dt,_t,{noop:ci,ensureFunction:hi,isAssignedObject:Qi}=g,dt=class{static fetch(e){let t=window.document.getElementById(e);return t===null?i(this,Dt).call(this,e):t.tagName!=="TEMPLATE"?i(this,_t).call(this,e):t.innerHTML}static initialize(e){Qi(e)&&(c(this,Dt,hi(e.onExtinctTemplate,i(this,Dt))),c(this,_t,hi(e.onInvalidTemplate,i(this,_t))))}};Dt=new WeakMap,_t=new WeakMap,o(dt,Dt,ci),o(dt,_t,ci);var Ot,Ct,Lt,Ut,Rt,Wt,ge,wi,Ee,mi,be,pi,ye,gi,Te,Ei,{noop:Nt,ensureFunction:lt,isAssignedObject:ui,isAssignedArray:$n,isNonEmptyArray:fi}=g,Zi=s=>s.toLowerCase().replaceAll("_","-"),A=class{static registerClasses(e){fi(e)&&window.Array.prototype.forEach.call(e,t=>typeof t=="function"?l(this,be,pi).call(this,t):i(this,Lt).call(this,t))}static instantiateClasses(e,t,n){fi(e)&&window.Array.prototype.forEach.call(e,r=>window.customElements.get(r.tag)?l(this,Te,Ei).call(this,r,t,ui(n)?n:new window.Object):i(this,Rt).call(this,r.name))}static initialize(e){ui(e)&&(c(this,Ot,lt(e.onDeferredInstantiation,i(this,Ot))),c(this,Lt,lt(e.onInvalidClass,i(this,Lt))),c(this,Ct,lt(e.onMisnamedClass,i(this,Ct))),c(this,Ut,lt(e.onUnregistrableClass,i(this,Ut))),c(this,Rt,lt(e.onUnregisteredClass,i(this,Rt))),c(this,Wt,lt(e.onAlreadyRegistered,i(this,Wt))))}};Ot=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,Rt=new WeakMap,Wt=new WeakMap,ge=new WeakSet,wi=function(e){window.HTMLElement.isPrototypeOf(e)?window.customElements.define(e.tag,e):i(this,Ut).call(this,e.name)},Ee=new WeakSet,mi=function(e){window.customElements.get(e.tag=Zi(e.name))?i(this,Wt).call(this,e.name):l(this,ge,wi).call(this,e)},be=new WeakSet,pi=function(e){e.name.indexOf("_")>0?l(this,Ee,mi).call(this,e):i(this,Ct).call(this,e.name)},ye=new WeakSet,gi=function(e,t,n){let r=null;try{r=window.document.querySelector(t)}catch(h){if(lt(n.onBadTarget)(t)===!1)return}finally{r=r||window.document.body}let d=window.document.createElement(e.tag);lt(n.onElementInstantiated)(d,t),r.appendChild(d)},Te=new WeakSet,Ei=function(e,t,n){let r=()=>l(this,ye,gi).call(this,e,t,n);window.document.body?r():i(this,Ot).call(this,r)},o(A,ge),o(A,Ee),o(A,be),o(A,ye),o(A,Te),o(A,Ot,Nt),o(A,Ct,Nt),o(A,Lt,Nt),o(A,Ut,Nt),o(A,Rt,Nt),o(A,Wt,Nt);var _=class{static get TEMPLATES_KIND(){return"%templates%"}static get SLOTS_KIND(){return"%slots%"}static get TEXTNODE_TAG(){return"^text^"}static get DEFAULT_KIND(){return""}static get DEFAULT_TAG(){return"div"}static get DEFAULT_STYLE_MEDIA(){return"screen"}static get DEFAULT_STYLE_TYPE(){return"text/css"}static get DEFAULT_REPLACEMENT_OPEN(){return"~{"}static get DEFAULT_REPLACEMENT_CLOSE(){return"}~"}};var Jt,Ie,mt,Yt,Vt,{EMPTY_ARRAY:tn,buildArray:Ve,buildObject:en,isNonEmptyString:nn,isOf:sn}=g,kt=class{static initialize(e,t){this.begin=e,this.end=t}},V=kt;a(V,"begin",null),a(V,"end",null),a(V,"enclose",e=>kt.begin+e+kt.end),a(V,"makeRegExp",()=>new window.RegExp("(?<="+kt.begin+").*?(?="+kt.end+")","gs"));var rn=["contents","classes","styles","attributes"],Mt=class{};a(Mt,"rules",(e,t)=>Ve(n=>e.forEach(r=>r.replacements.forEach(d=>d.field===t&&n.push(r))))),a(Mt,"children",(e,t)=>Ve(n=>{let r=d=>{let h=u=>u.forEach(v=>v.field===t&&n.push(d));rn.forEach(u=>h(d.replacements[u])),d.rules.forEach(u=>u.replacements.forEach(v=>v.field===t&&n.push(d)))};e.forEach(d=>d.included&&r(d))}));var O=class{static initialize(e){c(this,Jt,e)}},M=O;Jt=new WeakMap,Ie=new WeakMap,mt=new WeakMap,Yt=new WeakMap,Vt=new WeakMap,o(M,Jt,null),o(M,Ie,(e,t,n)=>e.push({at:t,field:n.trim(),find:V.enclose(n)})),o(M,mt,(e,t,n)=>nn(n)&&(n.match(i(O,Jt))||tn).forEach(r=>{var d;return i(d=O,Ie).call(d,e,t,r)})),o(M,Yt,(e,t,n)=>{var r;e[t]=new window.Array,i(r=O,mt).call(r,e[t],t,n)}),o(M,Vt,(e,t,n)=>{e[t]=new window.Array,window.Object.keys(n).forEach(r=>{var d,h;i(d=O,mt).call(d,e[t],t,r),i(h=O,mt).call(h,e[t],t,n[r])})}),a(M,"child",e=>en(t=>{var n,r,d,h;i(n=O,Yt).call(n,t,"contents",e.content),i(r=O,Yt).call(r,t,"classes",e.classes.join(" ")),i(d=O,Vt).call(d,t,"styles",e.style),i(h=O,Vt).call(h,t,"attributes",e.attributes),e.rules.forEach(u=>u.replacements=O.rule(u))})),a(M,"rule",e=>Ve(t=>{var r;if(sn(e.nested,window.Array))return e.nested.map(d=>O.rule(d));var n="";for(let d in e.properties)n+=`${d}:${e.properties[d]};`;i(r=O,mt).call(r,t,"rules",n)}));var U=class{static initialize(e,t){V.initialize(e,t),M.initialize(V.makeRegExp())}};a(U,"extractReplacementsFromRule",M.rule),a(U,"extractReplacementsFromChild",M.child),a(U,"scanRulesForReplacements",Mt.rules),a(U,"scanChildrenForReplacements",Mt.children);var pt=class{static defaultRoutine(e=""){var t=0;for(let n=0;n<e.length;n++)t=(t=(t<<5)-t+e.charCodeAt(n))&t;return t}};var bi=pt.defaultRoutine,on=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","content","col","colgroup","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","marquee","mark","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","shadow","select","slot","small","source","spacer","span","strike","strong","style","sub","sup","summary","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","xmp","wbr"].map(bi),q=class{static onDOMContentLoaded(e){if(e&&e.constructor===window.Function){let t=()=>{e(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",t),100)};window.addEventListener("DOMContentLoaded",t)}}static getUniqueId(e="WUSE"){let t="_"+(e||"")+"_";for(var n;window.document.getElementById(n=t+(""+window.Math.random()).substring(2))!==null;);return n}static removeChildren(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static isHTMLTag(e){return on.indexOf(bi(e))>-1}static htmlEncode(e=""){return typeof e!="string"?null:e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static getCSSVendorPrefix(){let e=window.getComputedStyle(window.document.body,""),n=window.Array.prototype.slice.call(e).filter(r=>r.charAt(0)==="-");return n.length?"-"+n[0].split("-")[1]+"-":""}};var Ft,{noop:an,isOf:dn,hasObjectKeys:yi,isNonEmptyString:Ti,isNonEmptyArray:ln,isAssignedObject:cn,ensureFunction:hn}=g,{htmlEncode:Ii}=q,{TEMPLATES_KIND:un,TEXTNODE_TAG:fn}=_,Ae=class{static initialize(e){cn(e)&&c(this,Ft,hn(e.onFetchTemplate,i(this,Ft)))}},E=Ae;Ft=new WeakMap,o(E,Ft,an),a(E,"cacheInvalidator",e=>e.cache=null),a(E,"renderingIncluder",e=>e.included=!0),a(E,"renderingExcluder",e=>e.included=!1),a(E,"renderRule",(e,t)=>{if(dn(t.nested,window.Array))return`${t.selector}{${t.nested.map(r=>Ae.renderRule(e,r)).join(`
`)}}`;if(Ti(t.selector)&&!t.nested){var n=new window.String;for(let r in t.properties)n+=`${r}:${t.properties[r]};`;return ln(t.replacements)&&t.replacements.forEach(r=>n=e(n,r)),`${t.selector}{${n}}`}return null}),a(E,"renderChild",(e,t)=>{var d;if(t.kind===un)return i(d=Ae,Ft).call(d,t.id);if(t.tag===fn){var n=t.content;return t.replacements.contents.forEach(h=>n=e(n,h)),t.encode?Ii(n):n}var r=Ti(t.id)?`<${t.tag} id='${t.id}'`:`<${t.tag}`;if(t.classes.length){var n=t.classes.join(" ");t.replacements.classes.forEach(u=>n=e(n,u)),r+=` class='${n}'`}if(yi(t.style)){var n=" style='";for(let u in t.style)n+=u+": "+t.style[u]+"; ";n+="'",t.replacements.styles.forEach(u=>n=e(n,u)),r+=n}if(yi(t.attributes)){var n=new window.String;for(let u in t.attributes)n+=` ${u}=${t.attributes[u]}`;t.replacements.attributes.forEach(u=>n=e(n,u)),r+=n}if(typeof t.content=="string"){var n=t.content;t.replacements.contents.forEach(u=>n=e(n,u)),r+=`>${t.encode?Ii(n):n}</${t.tag}>`}else r+="/>";return r});var qt,Xt,Qt,Zt,{ensureFunction:wn}=g,xt=class{constructor(e){a(this,"rounds",0);o(this,qt,0);o(this,Xt,null);o(this,Qt,!1);o(this,Zt,null);c(this,Zt,wn(e))}compute(e){return this.rounds+=+c(this,Qt,i(this,qt)==c(this,Xt,i(this,Zt).call(this,e))),c(this,qt,i(this,Xt)),i(this,Qt)}};qt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,Zt=new WeakMap;var gt,B,ct,Se,Ai,jt=class{constructor(e,t){o(this,Se);o(this,gt,null);o(this,B,null);o(this,ct,null);if(e instanceof Node&&t instanceof Node)c(this,gt,e),c(this,B,t),c(this,ct,t.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return i(this,B)}affiliate(){i(this,gt).appendChild(i(this,B))}disaffiliate(){i(this,gt).removeChild(i(this,B))}promote(e){i(this,ct).innerHTML=e,i(this,gt).replaceChild(i(this,ct),i(this,B)),l(this,Se,Ai).call(this)}};gt=new WeakMap,B=new WeakMap,ct=new WeakMap,Se=new WeakSet,Ai=function(){let e=i(this,ct);c(this,ct,i(this,B).cloneNode(!1)),c(this,B,e)};var Et,bt,yt=class{constructor(e){a(this,"owner",null);o(this,Et,!1);o(this,bt,"");this.owner=e}get invalidated(){return i(this,Et)}reset(e){c(this,Et,!1),c(this,bt,e)}append(e){c(this,bt,i(this,bt)+e)}verify(e){c(this,Et,e(i(this,bt)))}process(e){(e||i(this,Et))&&this.on_content_invalidation(i(this,bt))}on_content_invalidation(e){}};Et=new WeakMap,bt=new WeakMap;var Tt,te,{isOf:qe,cloneObject:Si,forEachOwnProperty:vi,buildArray:mn}=g,It=class extends window.Array{constructor(t){super();o(this,Tt);a(this,"owner",null);a(this,"last",null);a(this,"version",0);a(this,"locked",!1);this.owner=t}append(t){this.locked?this.on_forbidden_change():qe(t,window.Object)&&(this.push(t),l(this,Tt,te).call(this,t))}prepend(t){this.locked?this.on_forbidden_change():qe(t,window.Object)&&(this.unshift(t),l(this,Tt,te).call(this,t))}replace(t,n){this.locked?this.on_forbidden_change():t>-1&&qe(n,window.Object)&&l(this,Tt,te).call(this,this[t]=n)}remove(t){if(this.locked)this.on_forbidden_change();else if(t>-1){let n=this.splice(t,1);l(this,Tt,te).call(this,n.length?n[0]:null)}}persist(){return mn(t=>vi(this,n=>{switch(n){case"owner":case"last":case"length":break;case"version":case"locked":t[n]=this[n];break;default:if(window.Number.isInteger(window.Number(n))){let r=Si(this[n]);r.cache&&(r.cache=null),t.push(r)}break}}))}restore(t){vi(t,n=>{switch(n){case"length":break;case"version":case"locked":this[n]=t[n];break;default:if(window.Number.isInteger(window.Number(n))){let r=Si(t[n]);r.cache&&(r.cache=null),this.push(r)}break}})}on_version_change(){}on_forbidden_change(){}};Tt=new WeakSet,te=function(t){this.last=t,this.version++,this.on_version_change()};var De,Oi,_e,Ci,Ne,Li,Oe,Ui,Ce,Ri,$t,ve,Le,Wi,{isHTMLTag:pn}=q,{EMPTY_STRING:k,EMPTY_ARRAY:gn,noop:ee,buildArray:os,buildObject:En,isOf:N,hasObjectKeys:Di,isNonEmptyString:X,forcedStringSplit:bn}=g,{DEFAULT_TAG:yn,DEFAULT_KIND:Tn,TEMPLATES_KIND:Xe,SLOTS_KIND:Qe,TEXTNODE_TAG:In}=_,z={onInvalidDefinition:ee,onInexistentTemplate:ee,onUnespecifiedSlot:ee,onInvalidId:ee,onUnknownTag:ee},Q=class{static parse(e){if(X(e)){let t=e.trimLeft(),n=_i();return t.charAt(0)==="%"?t.startsWith(Xe)?l(this,$t,ve).call(this,n,t.replace(n.kind=Xe,k)):t.startsWith(Qe)?l(this,$t,ve).call(this,n,t.replace(n.kind=Qe,k)):null:l(this,$t,ve).call(this,n,t)}return null}};De=new WeakSet,Oi=function(e,t){let n=t.indexOf("["),r=t.indexOf("]");if(n>-1&&r>-1&&r>n){let d=t.substr(n,r-n+1),h=d.substr(1,d.length-2).split("|");for(let u in h){let v=h[u].split("=");v[0]==="style"?v[1].split(";").forEach(K=>{let ai=K.split(":"),di=ai[0].trim();di.length&&(e.style[di]=ai[1].trim())}):e.attributes[v[0]]=v[1]}return t.replace(d,k)}return t},_e=new WeakSet,Ci=function(e,t){let n=t.indexOf("=");return n>-1?(e.content=t.slice(n+1),!!e.content.length&&e.content.charAt(0)==="&"&&(e.content=e.content.slice(1),e.encode=!!e.content.length&&e.content.charAt(0)!=="&"),t.slice(0,n)):t},Ne=new WeakSet,Li=function(e,t){let n=t.replaceAll("!"," ").split(" ");return n.slice(1).map(r=>{let[d,...h]=r.toLowerCase().split("+"),u=(h||gn).indexOf("capture")>-1;e.events.push(Ni(d,u))}),n[0]},Oe=new WeakSet,Ui=function(e,t){let n=t.replaceAll("."," ").split(" ");return e.classes=n.slice(1),n[0]},Ce=new WeakSet,Ri=function(e,t){if(X(t)){let n=t.indexOf("#");n===-1?e.tag=t:(n>0&&(e.tag=t.substr(0,n)),e.id=t.substr(n+1))}return e},$t=new WeakSet,ve=function(e,t){return l(this,Ce,Ri).call(this,e,l(this,Oe,Ui).call(this,e,l(this,Ne,Li).call(this,e,l(this,_e,Ci).call(this,e,l(this,De,Oi).call(this,e,t)))))},o(Q,De),o(Q,_e),o(Q,Ne),o(Q,Oe),o(Q,Ce),o(Q,$t);var ie=class{static parse(e){return En(t=>(N(e,window.Array)?e:bn(e,`
`).map(n=>n.trim()).join(k).split(";")).forEach(n=>X(n)&&l(this,Le,Wi).call(this,t,n.trim())))}};Le=new WeakSet,Wi=function(e,t){if(!!t.length&&t.indexOf(":")>-1){let[n,...r]=t.split(":"),d=n.trim();if(d.length){let h=r.join(":").trim();e[d]=h.endsWith(";")?h.slice(0,-1):h}}},o(ie,Le);var _i=()=>({kind:Tn,tag:yn,id:k,classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:k,encode:!1}),An=()=>({generation:0,persisted:!1}),Ni=(s,e)=>typeof s=="string"&&typeof e=="boolean"?{kind:s,capture:e}:null,Sn=(s,e)=>{let t=Q.parse(s);return t?(t.rules=N(e,window.Array)?e:new window.Array,t.included=!0,t.cache=null,t):z.onInvalidDefinition(s)},vn=s=>{if(s!==null)if(s.kind===Xe){if(!window.document.getElementById(s.id))return z.onInexistentTemplate(s.id)}else if(s.kind===Qe){if(new window.String(s.attributes.slot).replaceAll('"',k).replaceAll("'",k).length===0)return z.onUnespecifiedSlot(s.id)}else{if(s.tag.indexOf("-")===-1?!pn(s.tag)&&s.tag!==In:!window.customElements.get(s.tag))return z.onUnknownTag(s.tag);if(typeof s.id!="string"||X(s.id)&&window.document.getElementById(s.id)!==null)return z.onInvalidId(s.id)}return s},Dn=s=>{if(!N(s,window.Object))return null;let e=window.document.createElement(s.tag);if(s.id.length&&e.setAttribute("id",s.id),s.classes.length&&e.setAttribute("class",s.classes.join(" ")),Di(s.style)){var t=new window.String;for(let n in s.style)t+=n+": "+s.style[n]+"; ";if(t.length){let n=t.trim();e.setAttribute("style",n.endsWith(";")?n.slice(0,-1):n)}}if(Di(s.attributes))for(let n in s.attributes)e.setAttribute(n,s.attributes[n]);return e},_n=(s,e)=>{let t=window.document.createElement("style");return X(s)&&t.setAttribute("media",s),X(e)&&t.setAttribute("type",e),t.appendChild(window.document.createTextNode(k)),t},Nn=(s,e)=>{let t=N(s,window.Array)?s.join(","):X(s)?s:k;return t.length?{selector:t,properties:N(e,window.Object)?e:ie.parse(e),cache:null}:null},On=(s,e,t)=>{let n=N(s,window.Array)?s.join(","):X(s)?s:k,r=N(e,window.Array)?e.join(","):X(e)?e:k;return!n.length||!r.length?null:{selector:n,nested:[{selector:r,properties:N(t,window.Object)?t:ie.parse(t)}],cache:null}},Cn=(s,e)=>{if(s.selector===e.selector){for(let t in e.properties)s.properties[t]=e.properties[t];return s.cache=null,!0}return!1},Ln=(s,e)=>N(s.nested,window.Array)&&s.selector===e.selector?(e.nested.forEach(t=>{var n=!1;for(let r in s.nested)if(n=s.nested[r].selector===t.selector){for(let d in t.properties)s.nested[r].properties[d]=t.properties[d];break}n||s.nested.push(t)}),s.cache=null,!0):!1,f=class{static initialize(e){N(e,window.Object)&&(N(e.onInvalidDefinition,window.Function)&&(z.onInvalidDefinition=e.onInvalidDefinition),N(e.onInexistentTemplate,window.Function)&&(z.onInexistentTemplate=e.onInexistentTemplate),N(e.onUnespecifiedSlot,window.Function)&&(z.onUnespecifiedSlot=e.onUnespecifiedSlot),N(e.onInvalidId,window.Function)&&(z.onInvalidId=e.onInvalidId),N(e.onUnknownTag,window.Function)&&(z.onUnknownTag=e.onUnknownTag))}};a(f,"makeStyleNode",_n),a(f,"newRule",Nn),a(f,"newNestedRule",On),a(f,"tryToJoinRules",Cn),a(f,"tryToJoinNestedRules",Ln),a(f,"performValidations",vn),a(f,"makeMainNode",Dn),a(f,"newChild",Sn),a(f,"newDefinition",_i),a(f,"newEvent",Ni),a(f,"newState",An);var R=class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}};a(R,"specializeClass",(e,t)=>class extends e{constructor(){super(t)}});var Z,Gt,Un=["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"],ne=class{constructor(e){o(this,Z,null);o(this,Gt,new window.Object);c(this,Z,e)}detect(){Un.forEach(e=>i(this,Gt)[e]=typeof i(this,Z)[e]=="function")}immediateTrigger(e,t){i(this,Gt)[e]&&i(this,Z)[e].call(i(this,Z),t)}committedTrigger(e,t){i(this,Gt)[e]&&window.requestAnimationFrame(()=>i(this,Z)[e].call(i(this,Z),t))}};Z=new WeakMap,Gt=new WeakMap;var $,I,b,x,w,S,tt,et,re,it,J,nt,ut,st,At,ft,L,rt,Y,m,Kt,oe,St,G,j,P,We,xi,Me,ji,ke,$i,Fe,Gi,wt,Ht,ae,Ze,de,ti,le,ei,xe,Hi,ce,ii,je,Ki,he,ni,$e,Bi,Bt,Ue,Ge,zi,zt,Re,{EMPTY_STRING:se,noop:F,isOf:T,isNonEmptyArray:Mi,isNonEmptyString:ht,forcedStringSplit:ki}=g;function Fi(s,e,t,n,r){let d=(v,K)=>window.Object.defineProperty(s,e,{get:v,set:K,enumerable:!0,configurable:!0}),h=()=>delete s[e],u=(v,K)=>Fi(s,e,v,K,r);d(()=>t,v=>{u(v,n),T(n,window.Function)?n({renderize:K=>r(e,K),automate:()=>u(v,null),freeze:()=>d(()=>v,K=>{}),defreeze:()=>u(v,n),dereact:()=>d(()=>v,K=>{h(),s[e]=K}),remove:()=>h()}):r(e)})}var C={onInvalidState:F,onInvalidKey:F,onInvalidDefinition:F,onLockedDefinition:F,onAllowHTML:F},si=class extends window.HTMLElement{constructor(t){super();o(this,j);o(this,We);o(this,Me);o(this,ke);o(this,Fe);o(this,wt);o(this,ae);o(this,de);o(this,le);o(this,xe);o(this,ce);o(this,je);o(this,he);o(this,$e);o(this,Bt);o(this,Ge);o(this,zt);o(this,$,new window.String);o(this,I,new class extends It{on_version_change(){var t;this.last!==null&&(this.last.version=this.version,this.last.replacements=U.extractReplacementsFromRule(this.last)),window.Wuse.DEBUG&&l(t=this.owner,j,P).call(t,`rules list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&l(t=this.owner,j,P).call(t,"rules list is locked and can not be changed"),C.onLockedDefinition(i(this,w).mainDefinition.id)}}(this));o(this,b,new class extends It{on_version_change(){var t,n;this.last!==null&&(this.last.version=this.version,this.last.replacements=U.extractReplacementsFromChild(this.last),c(t=this.owner,et,i(t,et)|this.last.kind===_.SLOTS_KIND)),window.Wuse.DEBUG&&l(n=this.owner,j,P).call(n,`children list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&l(t=this.owner,j,P).call(t,"children list is locked and can not be changed"),C.onLockedDefinition(i(this,w).mainDefinition.id)}}(this));o(this,x,new class extends It{on_version_change(){var t;window.Wuse.DEBUG&&l(t=this.owner,j,P).call(t,`fields list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&l(t=this.owner,j,P).call(t,"fields list is locked and can not be changed"),C.onLockedDefinition(i(this,w).mainDefinition.id)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));o(this,w,{mainDefinition:f.newDefinition(),styleMedia:_.DEFAULT_STYLE_MEDIA,styleType:_.DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0});o(this,S,new ne(this));o(this,tt,!1);o(this,et,!1);o(this,re,window.Wuse.isShadowElement(this));o(this,it,void 0);o(this,J,void 0);o(this,nt,null);o(this,ut,!1);o(this,st,!1);o(this,At,!0);o(this,ft,window.Wuse.elementsStorage);o(this,L,null);o(this,rt,new window.String);o(this,Y,!1);o(this,m,{root:new class extends yt{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends yt{on_content_invalidation(t){i(this.owner,J).promote(t)}}(this),main:new class extends yt{on_content_invalidation(t){i(this.owner,it).promote(t)}}(this),renderizers:{rule:t=>i(this,m).style.append(t.cache?t.cache:t.cache=E.renderRule(i(this,Kt),t)),children:{mixed:t=>i(this,re)&&t.kind===_.SLOTS_KIND?i(this,m).renderizers.children.slot(t):i(this,m).renderizers.children.normal(t),slot:t=>{t.cache||(i(this,m).root.verify(n=>!0),i(this,m).root.append(t.cache=E.renderChild(i(this,Kt),t)))},normal:t=>{i(this,m).main.append(t.cache?t.cache:t.cache=E.renderChild(i(this,Kt),t)),t.rules.forEach(i(this,m).renderizers.rule)}}},gotModified:()=>i(this,m).root.invalidated||i(this,m).main.invalidated||i(this,m).style.invalidated,getDebugInfo:()=>`updated (root: ${i(this,m).root.invalidated}, main: ${i(this,m).main.invalidated}, style: ${i(this,m).style.invalidated})`});o(this,Kt,(t,n)=>t.replace(n.find,this[n.field]!==void 0?this[n.field]:se));o(this,oe,{bind:{key:()=>{let t=n=>{ht(n)&&(this[n]=l(this,ae,Ze).call(this,n))};return i(this,tt)&&t(i(this,w).mainDefinition.id),n=>t(n.id)},event:"addEventListener"},unbind:{key:()=>{let t=n=>delete this[n];return i(this,tt)&&t(i(this,w).mainDefinition.id),n=>t(n.id)},event:"removeEventListener"}});o(this,St,{main:new xt(window.Wuse.hashRoutine),style:new xt(window.Wuse.hashRoutine)});o(this,G,{attachment:new window.Wuse.PerformanceMeasurement.StopWatch,partial:new window.Wuse.PerformanceMeasurement.StopWatch,full:new window.Wuse.PerformanceMeasurement.StopWatch,dettachment:new window.Wuse.PerformanceMeasurement.StopWatch});a(this,"info",{instanceNumber:++si.instancesCount,unmodifiedRounds:0,updatedRounds:0});c(this,nt,t!==R.REGULAR?this.attachShadow({mode:t}):this),i(this,S).detect(),i(this,S).immediateTrigger("on_create"),i(this,w).attributeKeys&&this.getAttributeNames().forEach(n=>this[n]=this.getAttribute(n)),l(this,$e,Bi).call(this)&&i(this,L).generation>1?i(this,S).immediateTrigger("on_reconstruct",i(this,L)):i(this,S).immediateTrigger("on_construct")}get render(){return i(this,st)?l(this,xe,Hi):F}get redraw(){return i(this,st)?l(this,je,Ki):F}connectedCallback(){window.Wuse.MEASURE&&i(this,G).attachment.start(),i(this,S).detect(),i(this,S).immediateTrigger("on_connect"),l(this,ce,ii).call(this,"on_load"),i(this,Y)&&this.persistToElementsStore(),window.Wuse.MEASURE&&i(this,G).attachment.stop(window.Wuse.DEBUG)}disconnectedCallback(){window.Wuse.MEASURE&&i(this,G).dettachment.start(),l(this,wt,Ht).call(this,!1),i(this,S).immediateTrigger("on_disconnect"),window.Wuse.MEASURE&&i(this,G).dettachment.stop(window.Wuse.DEBUG)}getElementsStore(){return i(this,ft)}setElementsStore(t){return c(this,ft,t),this}hasElementsStoreKey(t){return i(this,Y)}getElementsStoreKey(t){return i(this,rt)}setElementsStoreKey(t){return c(this,Y,ht(c(this,rt,t))),this}persistToElementsStore(){if(l(this,zt,Re).call(this)){let t=i(this,L);if(T(t,window.Object))return i(this,x).snapshot(),t.data=new window.Object({options:i(this,w),html:i(this,$),children:i(this,b).persist(),rules:i(this,I).persist(),fields:i(this,x).persist(),slotted:i(this,et),identified:i(this,tt)}),l(this,Bt,Ue).call(this),!0}return!1}restoreFromElementsStore(){if(l(this,zt,Re).call(this)){let t=i(this,L);if(T(t,window.Object)&&t.persisted&&t.data)return c(this,w,t.data.options),c(this,et,t.data.slotted),c(this,tt,t.data.identified),c(this,$,t.data.html),i(this,b).restore(t.data.children),i(this,b).owner=this,i(this,I).restore(t.data.rules),i(this,I).owner=this,i(this,x).restore(t.data.fields),i(this,x).owner=this,i(this,x).recall(),!0}return!1}removeFromElementsStore(){return l(this,zt,Re).call(this)&&l(this,Ge,zi).call(this)}selectChildElement(t){return i(this,nt).querySelector(t)}getMainAttribute(t){return i(this,ut)?i(this,it).element.setAttribute(t):void 0}setMainAttribute(t,n){return i(this,ut)&&i(this,it).element.setAttribute(t,n),this}setMainElement(t){let n=f.performValidations(f.newChild(t));if(n!==null){if(ht(n.content)||Mi(n.events))return C.onInvalidDefinition(t);c(this,tt,ht(n.id))&&(i(this,w).mainDefinition.id=n.id),ht(n.tag)&&(i(this,w).mainDefinition.tag=n.tag),Mi(n.classes)&&(i(this,w).mainDefinition.classes=n.classes),T(n.style,window.Object)&&(i(this,w).mainDefinition.style=n.style),T(n.attributes,window.Array)&&(i(this,w).mainDefinition.attributes=n.attributes)}return this}setStyleOptions(t,n){return i(this,w).styleMedia=ht(t)?t:se,i(this,w).styleType=ht(n)?n:se,this}setElementsAsKeys(t){return i(this,w).elementKeys=!!t,this}setAttributesAsKeys(t){return i(this,w).attributeKeys=!!t,this}allowRawContent(t){return i(this,w).rawContent=!!t,this}setRawContent(t){return i(this,w).rawContent?c(this,$,t):C.onAllowHTML(),this}appendRawContent(t){return i(this,w).rawContent?c(this,$,i(this,$)+t):C.onAllowHTML(),this}prependRawContent(t){return i(this,w).rawContent?c(this,$,t+i(this,$)):C.onAllowHTML(),this}lockCSSRules(){return i(this,I).locked=!0,this}unlockCSSRules(){return i(this,I).locked=!1,this}appendCSSRule(t,n,r){if(r)return this.appendCSSNestedRule(t,n,r);let d=i(this,I).slice(-1),h=f.newRule(t,n);return(!d.length||!f.tryToJoinRules(d[0],h))&&i(this,I).append(h),this}prependCSSRule(t,n,r){if(r)return this.prependCSSNestedRule(t,n,r);let d=i(this,I).slice(0,1),h=f.newRule(t,n);return(!d.length||!f.tryToJoinRules(d[0],h))&&i(this,I).prepend(h),this}appendCSSNestedRule(t,n,r){let d=i(this,I).slice(-1),h=f.newNestedRule(t,n,r);return(!d.length||!f.tryToJoinNestedRules(d[0],h))&&i(this,I).append(h),this}prependCSSNestedRule(t,n,r){let d=i(this,I).slice(0,1),h=f.newNestedRule(t,n,r);return(!d.length||!f.tryToJoinNestedRules(d[0],h))&&i(this,I).prepend(h),this}lockChildElements(){return i(this,b).locked=!0,this}unlockChildElements(){return i(this,b).locked=!1,this}appendChildElement(t,n){let r=f.performValidations(f.newChild(t,n));return r!==null&&i(this,b).append(r),this}prependChildElement(t,n){let r=f.performValidations(f.newChild(t,n));return r!==null&&i(this,b).prepend(r),this}appendChildElements(t){return(T(t,window.Array)?t:ki(t,`
`)).forEach(n=>typeof n=="string"&&!!n.trim().length&&this.appendChildElement(n)),this}prependChildElements(t){return(T(t,window.Array)?t:ki(t,`
`)).forEach(n=>typeof n=="string"&&!!n.trim().length&&this.prependChildElement(n)),this}replaceChildElementById(t,n,r){let d=f.newChild(n,r);return d!==null&&i(this,b).replace(i(this,b).findIndex(h=>h.id===t),d),this}removeChildElementById(t){return i(this,b).remove(i(this,b).findIndex(n=>n.id===t)),this}checkChildElementIsIncludedById(t,n,r){let d=h=>T(h,window.Function)?h():void 0;return i(this,b).some(h=>h.id===t&&h.included)?d(n):d(r),this}includeChildElementById(t){return i(this,b).forEach(n=>n.id===t&&E.renderingIncluder(n)),this}excludeChildElementById(t){return i(this,b).forEach(n=>n.id===t&&E.renderingExcluder(n)),this}invalidateChildElementsById(t){return i(this,b).forEach(n=>t.indexOf(n.id)>-1&&E.cacheInvalidator(n)),this}invalidateChildElements(t){return T(t,window.Array)&&t.forEach(E.cacheInvalidator),this}lockInstanceFields(){return i(this,x).locked=!0,this}unlockInstanceFields(){return i(this,x).locked=!1,this}makeField(t,n){return this[t]=n,i(this,x).append({name:t,value:n}),this}makeReactiveField(t,n,r,d=!0){return Fi(this,t,n,r,(h,u)=>l(this,he,ni).call(this,h,u||"$auto")),i(this,x).append({name:t,value:n}),d&&l(this,he,ni).call(this,t,"$init"),this}makeExternalReactiveField(t,n,r,d,h=!0){return this.makeReactiveField(n,t[n]||r,u=>{t[n]=this[n],d(u)},h)}suspendRender(){return c(this,At,!1),this}resumeRender(t=!0){return c(this,At,!0),t&&this.render(),this}isRenderSuspended(){return!i(this,At)}static initialize(t){if(U.initialize(_.DEFAULT_REPLACEMENT_OPEN,_.DEFAULT_REPLACEMENT_CLOSE),T(t,window.Object)){T(t.onFetchTemplate,window.Function)&&E.initialize({onFetchTemplate:t.onFetchTemplate}),T(t.onAllowHTML,window.Function)&&(C.onAllowHTML=t.onAllowHTML),T(t.onInvalidKey,window.Function)&&(C.onInvalidKey=t.onInvalidKey),T(t.onInvalidState,window.Function)&&(C.onInvalidState=t.onInvalidState),T(t.onLockedDefinition,window.Function)&&(C.onLockedDefinition=t.onLockedDefinition);let n={onInvalidDefinition:F,onInexistentTemplate:F,onUnespecifiedSlot:F,onInvalidId:F,onUnknownTag:F};T(t.onInvalidDefinition,window.Function)&&(C.onInvalidDefinition=t.onInvalidDefinition,n.onInvalidDefinition=t.onInvalidDefinition),T(t.onInexistentTemplate,window.Function)&&(n.onInexistentTemplate=t.onInexistentTemplate),T(t.onUnespecifiedSlot,window.Function)&&(n.onUnespecifiedSlot=t.onUnespecifiedSlot),T(t.onInvalidId,window.Function)&&(n.onInvalidId=t.onInvalidId),T(t.onUnknownTag,window.Function)&&(n.onUnknownTag=t.onUnknownTag),f.initialize(n)}}},H=si;$=new WeakMap,I=new WeakMap,b=new WeakMap,x=new WeakMap,w=new WeakMap,S=new WeakMap,tt=new WeakMap,et=new WeakMap,re=new WeakMap,it=new WeakMap,J=new WeakMap,nt=new WeakMap,ut=new WeakMap,st=new WeakMap,At=new WeakMap,ft=new WeakMap,L=new WeakMap,rt=new WeakMap,Y=new WeakMap,m=new WeakMap,Kt=new WeakMap,oe=new WeakMap,St=new WeakMap,G=new WeakMap,j=new WeakSet,P=function(t){i(this,tt)&&window.Wuse.debug(`#${i(this,w).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},We=new WeakSet,xi=function(){i(this,J)&&i(this,J).affiliate(),i(this,it).affiliate(),c(this,ut,!0)},Me=new WeakSet,ji=function(){c(this,J,i(this,I).length?new jt(i(this,nt),f.makeStyleNode(i(this,w).styleMedia,i(this,w).styleType)):null),c(this,it,new jt(i(this,nt),f.makeMainNode(i(this,w).mainDefinition))),i(this,b).forEach(E.cacheInvalidator),i(this,I).forEach(E.cacheInvalidator)},ke=new WeakSet,$i=function(){i(this,ut)&&(i(this,it).disaffiliate(),i(this,J)&&i(this,J).disaffiliate(),i(this,et)&&i(this,re)&&window.Wuse.WebHelpers.removeChildren(this)),c(this,ut,!1)},Fe=new WeakSet,Gi=function(t){return{key:i(this,w).elementKeys&&t.key(),event:(n,r,d)=>{let h=this[`on_${n}_${r}`];if(h){let u=l(this,ae,Ze).call(this,n);u&&u[t.event](r,h,d)}},slots:()=>this.on_slot_change&&i(this,nt).querySelectorAll("slot").forEach(n=>n[t.event]("slotchange",this.on_slot_change))}},wt=new WeakSet,Ht=function(t){if(i(this,st)&&!t||!i(this,st)&&t){let n=l(this,Fe,Gi).call(this,t?i(this,oe).bind:i(this,oe).unbind);i(this,b).forEach(r=>{!r.included&&t||(n.key&&n.key(r),r.events.forEach(d=>d&&n.event(r.id,d.kind,d.capture)))}),i(this,et)&&n.slots(),c(this,st,t)}},ae=new WeakSet,Ze=function(t){return ht(t)?i(this,nt).querySelector(`#${t}`):void 0},de=new WeakSet,ti=function(){i(this,m).root.reset(se),i(this,m).style.reset(se),i(this,m).main.reset(i(this,$));let t=i(this,et)?i(this,m).renderizers.children.mixed:i(this,m).renderizers.children.normal;i(this,b).forEach(n=>n.included&&t(n)),i(this,I).forEach(i(this,m).renderizers.rule),i(this,m).main.verify(n=>!i(this,St).main.compute(n)),i(this,m).style.verify(n=>!i(this,St).style.compute(n))},le=new WeakSet,ei=function(t,n,r){i(this,m).root.process(t),i(this,m).style.process(n),i(this,m).main.process(r),window.Wuse.DEBUG&&l(this,j,P).call(this,i(this,m).getDebugInfo())},xe=new WeakSet,Hi=function(){!window.Wuse.RENDERING||!i(this,At)||(window.Wuse.MEASURE&&i(this,G).partial.start(),i(this,S).immediateTrigger("on_prerender"),l(this,de,ti).call(this),i(this,m).gotModified()?(l(this,wt,Ht).call(this,!1),l(this,le,ei).call(this,!1,!1,!1),l(this,wt,Ht).call(this,!0),this.info.updatedRounds++,i(this,S).immediateTrigger("on_update"),i(this,Y)&&this.persistToElementsStore(),i(this,S).committedTrigger("on_refresh")):this.info.unmodifiedRounds++,window.Wuse.DEBUG&&l(this,j,P).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${i(this,St).main.rounds}, style: ${i(this,St).style.rounds}) | updated: ${this.info.updatedRounds}`),i(this,S).immediateTrigger("on_postrender"),window.Wuse.MEASURE&&i(this,G).partial.stop(window.Wuse.DEBUG))},ce=new WeakSet,ii=function(t){l(this,Me,ji).call(this),l(this,We,xi).call(this),i(this,S).immediateTrigger("on_inject"),l(this,de,ti).call(this),l(this,le,ei).call(this,!1,!!i(this,J),!0),l(this,wt,Ht).call(this,!0),i(this,S).immediateTrigger(t)},je=new WeakSet,Ki=function(){window.Wuse.MEASURE&&i(this,G).full.start(),l(this,wt,Ht).call(this,!1),l(this,ke,$i).call(this),i(this,S).immediateTrigger("on_unload"),i(this,S).detect(),l(this,ce,ii).call(this,"on_reload"),i(this,Y)&&this.persistToElementsStore(),i(this,S).committedTrigger("on_repaint"),window.Wuse.MEASURE&&i(this,G).full.stop(window.Wuse.DEBUG)},he=new WeakSet,ni=function(t,n="$none"){if(i(this,st)){let r=U.scanRulesForReplacements(i(this,I),t);r.forEach(E.cacheInvalidator);let d=U.scanChildrenForReplacements(i(this,b),t);d.forEach(E.cacheInvalidator),window.Wuse.DEBUG&&l(this,j,P).call(this,`reactive render (label: ${n}, field: ${t}, children: ${d.length}, rules: ${r.length})`),(!!r.length||!!d.length)&&(d.some(h=>!!h.kind.length)&&i(this,b).forEach(h=>h.kind===_.SLOTS_KIND?E.cacheInvalidator(h):void 0),this.render())}},$e=new WeakSet,Bi=function(){if(i(this,Y)){let t=i(this,ft).hasItem(i(this,rt))?i(this,ft).getItem(i(this,rt)):f.newState();if(T(t,window.Object))return c(this,L,t),i(this,L).generation++,l(this,Bt,Ue).call(this),!0;C.onInvalidState()}return!1},Bt=new WeakSet,Ue=function(){window.Wuse.DEBUG&&(i(this,L).key=i(this,rt)),i(this,L).persisted=!!i(this,L).data,i(this,ft).setItem(i(this,rt),i(this,L))},Ge=new WeakSet,zi=function(){let t=i(this,L);return T(t,window.Object)&&t.persisted&&t.data?(delete t.data,l(this,Bt,Ue).call(this),!0):!1},zt=new WeakSet,Re=function(){return i(this,Y)?!0:(C.onInvalidKey(),!1)},a(H,"instancesCount",0);var Pi=(s,e)=>window.Object.getOwnPropertyNames(e).forEach(t=>Object.defineProperty(s,t,{value:e[t],writable:!1,configurable:!1,enumerable:!1})),vt=class{static detectFeatures(e){let t=(n,r)=>!n&&y.UNSUPPORTED_FEATURE.emit(r);try{t(e.JsHelpers.isOf(window.document,window.HTMLDocument),"HTML Document"),t(e.JsHelpers.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),e.WebHelpers.onDOMContentLoaded(()=>t(e.JsHelpers.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(n){y.UNKNOWN_ERROR.emit()}}static initializeModules(e){e.PerformanceMeasurement.initialize((t,n)=>e.debug(JSON.stringify(e.JsHelpers.buildArray(r=>{switch(r.push({instances:e.elementCount}),r.push(t.getDebugInfo()),n){case"stop":r.push(e.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo());break;case"finish":r.push(e.PerformanceMeasurement.BrowserRender.overall.getDebugInfo());break}})))),dt.initialize({onExtinctTemplate:y.EXTINCT_TEMPLATE.emit,onInvalidTemplate:y.INVALID_TEMPLATE.emit}),A.initialize({onMisnamedClass:y.MISNAMED_CLASS.emit,onUnregistrableClass:y.UNREGISTRABLE_CLASS.emit,onUnregisteredClass:y.UNREGISTERED_CLASS.emit,onAlreadyRegistered:y.ALREADY_REGISTERED.emit,onInvalidClass:y.INVALID_CLASS.emit,onDeferredInstantiation:e.WebHelpers.onDOMContentLoaded}),H.initialize({onAllowHTML:y.ALLOW_HTML.emit,onInvalidKey:y.INVALID_KEY.emit,onInvalidDefinition:y.INVALID_DEFINITION.emit,onLockedDefinition:y.LOCKED_DEFINITION.emit,onInexistentTemplate:y.INEXISTENT_TEMPLATE.emit,onUnespecifiedSlot:y.UNESPECIFIED_SLOT.emit,onUnknownTag:y.UNKNOWN_TAG.emit,onInvalidId:y.INVALID_ID.emit,onInvalidState:y.INVALID_STATE.emit,onFetchTemplate:dt.fetch})}static declareUnwritableMembers(e,t){Pi(e,t.fields),Pi(e,t.methods)}};var Je,Yi,Ji,ze,Pe,Pt,He=s=>s>1e3?(s/1e3).toFixed(2)+"s":s.toFixed(2)+"ms",Ke=class{constructor(){a(this,"round",0);a(this,"domTime",window.Number.MAX_SAFE_INTEGER);a(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var e=new window.Object;return e.round=this.round,e.domTime=He(this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(e.renderTime=He(this.renderTime)),e}},Be=class{constructor(e){a(this,"name","");a(this,"rounds",0);a(this,"time",0);a(this,"average",0);this.name=e}compute(e){this.rounds++,this.time+=e,this.average=this.time/this.rounds}getDebugInfo(){let e=He(this.time),t=He(this.average);return{name:this.name,rounds:this.rounds,spent:e,average:t}}},W=class{static initialize(e){typeof e=="function"&&c(W,Pt,e),W.DOMUpdate.overall=new Be("overall-dom-update"),W.BrowserRender.overall=new Be("overall-browser-render")}},ot=W;Pt=new WeakMap,o(ot,Pt,()=>{}),a(ot,"StopWatch",(Ji=class{constructor(){o(this,Je);a(this,"_begin",0);a(this,"_end",{dom:0,render:0});a(this,"rounds",0);a(this,"last",new Ke);a(this,"best",new Ke);a(this,"averages",{dom:0,render:0})}start(){(W.DOMUpdate.check||W.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(e){var t;W.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,W.DOMUpdate.overall.compute(this.last.domTime)),W.BrowserRender.check?setTimeout(()=>l(this,Je,Yi).bind(this)(e)):e&&i(t=W,Pt).call(t,this,"stop")}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages}}},Je=new WeakSet,Yi=function(e){var t;this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,W.BrowserRender.overall.compute(this.last.renderTime),e&&i(t=W,Pt).call(t,this,"finish")},Ji)),a(ot,"DOMUpdate",(ze=class{},a(ze,"check",!0),a(ze,"overall",null),ze)),a(ot,"BrowserRender",(Pe=class{},a(Pe,"check",!1),a(Pe,"overall",null),Pe));var at,fe,ri,ue=class{constructor(){o(this,fe);o(this,at,new window.Object)}get length(){return l(this,fe,ri).call(this).length}key(e){return l(this,fe,ri).call(this)[e]||null}getItem(e){return i(this,at)[e]}setItem(e,t){i(this,at)[e]=t}removeItem(e){delete i(this,at)[e]}clear(){c(this,at,new window.Object)}hasItem(e){return i(this,at).hasOwnProperty(e)}};at=new WeakMap,fe=new WeakSet,ri=function(){return window.Object.keys(i(this,at))};var Vi="0.5.8";var p,{noop:we,isOf:oi}=g;window.Wuse=(p=class{static get VERSION(){return Vi}static get elementCount(){return H.instancesCount}},a(p,"DEBUG",!1),a(p,"FATALS",!1),a(p,"MEASURE",!1),a(p,"RENDERING",!0),a(p,"hashRoutine",pt.defaultRoutine),a(p,"elementsStorage",new ue),a(p,"tmp",null),a(p,"WebHelpers",null),a(p,"JsHelpers",null),a(p,"PerformanceMeasurement",null),a(p,"NonShadowElement",null),a(p,"OpenShadowElement",null),a(p,"ClosedShadowElement",null),a(p,"debug",we),a(p,"blockUpdate",we),a(p,"register",we),a(p,"instantiate",we),a(p,"isShadowElement",we),(()=>{vt.declareUnwritableMembers(p,{fields:{tmp:new window.Object,WebHelpers:q,JsHelpers:g,PerformanceMeasurement:ot,NonShadowElement:R.specializeClass(H,R.REGULAR),OpenShadowElement:R.specializeClass(H,R.OPEN),ClosedShadowElement:R.specializeClass(H,R.CLOSED)},methods:{debug:e=>window.console.log("[WUSE:DEBUG]",e),blockUpdate:(e,t)=>{if(oi(e,Function)){window.Wuse.DEBUG&&window.Wuse.debug("blocking"),window.Wuse.RENDERING=!1;try{e(t)}catch(n){throw n}finally{window.Wuse.RENDERING=!0,window.Wuse.DEBUG&&window.Wuse.debug("unblocking")}}},register:e=>A.registerClasses(oi(e,window.Array)?e:new window.Array(e)),instantiate:(e,t,n)=>A.instantiateClasses(oi(e,window.Array)?e:new window.Array(e),t,n),isShadowElement:e=>{let t=window.Object.getPrototypeOf(e.constructor);return t===window.Wuse.OpenShadowElement||t===window.Wuse.ClosedShadowElement}}}),vt.detectFeatures(p),vt.initializeModules(p)})(),p);})();
