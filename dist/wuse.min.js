(()=>{var qi=Object.defineProperty;var Qi=(s,e,t)=>e in s?qi(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(Qi(s,typeof e!="symbol"?e+"":e,t),t),Ve=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var n=(s,e,t)=>(Ve(s,e,"read from private field"),t?t.call(s):e.get(s)),o=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},c=(s,e,t,i)=>(Ve(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var d=(s,e,t)=>(Ve(s,e,"access private method"),t);var v=(s,e)=>({code:s,emit:t=>{let i=`[WUSE:ERROR] ${s} | ${e(t)}`;if(window.Wuse&&window.Wuse.FATALS||s<10)throw new window.Error(i);return window.console.error(i),null}}),y=class{static get UNKNOWN_ERROR(){return v(0,e=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return v(1,e=>`Unsupported feature: ${e}.`)}static get UNREGISTERED_CLASS(){return v(2,e=>`Unregistered class: ${e}.`)}static get UNREGISTRABLE_CLASS(){return v(3,e=>`Unregistrable class: ${e}.`)}static get INVALID_CLASS(){return v(4,e=>`Invalid class: ${e}.`)}static get MISNAMED_CLASS(){return v(5,e=>`Misnamed class: ${e}.`)}static get ALREADY_REGISTERED(){return v(6,e=>`Already registered: ${e}.`)}static get INVALID_DEFINITION(){return v(10,e=>`Invalid definition: ${e}.`)}static get INVALID_ID(){return v(11,e=>`Invalid id: ${e}.`)}static get INVALID_KEY(){return v(12,e=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return v(13,e=>"Call first: this.allowRawContent(true).")}static get INVALID_STATE(){return v(14,e=>"Invalid state.")}static get INEXISTENT_TEMPLATE(){return v(20,e=>`Inexistent template: #${e}.`)}static get EXTINCT_TEMPLATE(){return v(21,e=>`Extinct template: #${e}.`)}static get INVALID_TEMPLATE(){return v(22,e=>`Invalid template: #${e}.`)}static get UNESPECIFIED_SLOT(){return v(30,e=>`Unespecified slot: #${e}.`)}static get LOCKED_DEFINITION(){return v(40,e=>`Locked definition: #${e}.`)}};var we,me,hi=(s,e)=>(typeof e=="function"&&e(s),s),E=class{static get EMPTY_STRING(){return n(this,we)}static get EMPTY_ARRAY(){return n(this,me)}static noop(){}static isNonEmptyString(e){return typeof e=="string"&&!!e.length}static forcedStringSplit(e,t){return typeof e=="string"?e.split(t):new window.Array}static buildArray(e){return hi(new window.Array,e)}static buildObject(e){return hi(new window.Object,e)}static ensureFunction(e,t=()=>{}){return typeof e=="function"?e:t}static isOf(e,t){return e!=null&&(e.constructor===t||t!=null&&e.constructor.name===t.name)}static hasObjectKeys(e){return!!(e&&!!window.Object.keys(e).length)}static cloneObject(e){return window.Object.assign(new window.Object,e)}static forEachOwnProperty(e,t){e&&window.Object.getOwnPropertyNames(e).forEach(t)}static isAssignedObject(e){return typeof e=="object"&&e!==null}static isAssignedArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"}static isNonEmptyArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"&&!!e.length}};we=new WeakMap,me=new WeakMap,o(E,we,new window.String().valueOf()),o(E,me,window.Object.freeze(new window.Array));var Tt,vt,{noop:ui,ensureFunction:fi,isAssignedObject:Zi}=E,rt=class{static fetch(e){let t=window.document.getElementById(e);return t===null?n(this,Tt).call(this,e):t.tagName!=="TEMPLATE"?n(this,vt).call(this,e):t.innerHTML}static initialize(e){Zi(e)&&(c(this,Tt,fi(e.onExtinctTemplate,n(this,Tt))),c(this,vt,fi(e.onInvalidTemplate,n(this,vt))))}};Tt=new WeakMap,vt=new WeakMap,o(rt,Tt,ui),o(rt,vt,ui);var _t,Ct,Ot,Nt,Lt,Rt,pe,pi,Ee,Ei,ge,gi,ye,yi,Ie,Ii,{noop:Dt,ensureFunction:ot,isAssignedObject:wi,isAssignedArray:jn,isNonEmptyArray:mi}=E,tn=s=>s.toLowerCase().replaceAll("_","-"),S=class{static registerClasses(e){mi(e)&&window.Array.prototype.forEach.call(e,t=>typeof t=="function"?d(this,ge,gi).call(this,t):n(this,Ot).call(this,t))}static instantiateClasses(e,t,i){mi(e)&&window.Array.prototype.forEach.call(e,r=>window.customElements.get(r.tag)?d(this,Ie,Ii).call(this,r,t,wi(i)?i:new window.Object):n(this,Lt).call(this,r.name))}static initialize(e){wi(e)&&(c(this,_t,ot(e.onDeferredInstantiation,n(this,_t))),c(this,Ot,ot(e.onInvalidClass,n(this,Ot))),c(this,Ct,ot(e.onMisnamedClass,n(this,Ct))),c(this,Nt,ot(e.onUnregistrableClass,n(this,Nt))),c(this,Lt,ot(e.onUnregisteredClass,n(this,Lt))),c(this,Rt,ot(e.onAlreadyRegistered,n(this,Rt))))}};_t=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,pe=new WeakSet,pi=function(e){window.HTMLElement.isPrototypeOf(e)?window.customElements.define(e.tag,e):n(this,Nt).call(this,e.name)},Ee=new WeakSet,Ei=function(e){window.customElements.get(e.tag=tn(e.name))?n(this,Rt).call(this,e.name):d(this,pe,pi).call(this,e)},ge=new WeakSet,gi=function(e){e.name.indexOf("_")>0?d(this,Ee,Ei).call(this,e):n(this,Ct).call(this,e.name)},ye=new WeakSet,yi=function(e,t,i){let r=null;try{r=window.document.querySelector(t)}catch(h){if(ot(i.onBadTarget)(t)===!1)return}finally{r=r||window.document.body}let l=window.document.createElement(e.tag);ot(i.onElementInstantiated)(l,t),r.appendChild(l)},Ie=new WeakSet,Ii=function(e,t,i){let r=()=>d(this,ye,yi).call(this,e,t,i);window.document.body?r():n(this,_t).call(this,r)},o(S,pe),o(S,Ee),o(S,ge),o(S,ye),o(S,Ie),o(S,_t,Dt),o(S,Ct,Dt),o(S,Ot,Dt),o(S,Nt,Dt),o(S,Lt,Dt),o(S,Rt,Dt);var D=class{static get TEMPLATES_KIND(){return"%templates%"}static get SLOTS_KIND(){return"%slots%"}static get TEXTNODE_TAG(){return"^text^"}static get DEFAULT_KIND(){return""}static get DEFAULT_TAG(){return"div"}static get DEFAULT_STYLE_MEDIA(){return"screen"}static get DEFAULT_STYLE_TYPE(){return"text/css"}static get DEFAULT_REPLACEMENT_OPEN(){return"~{"}static get DEFAULT_REPLACEMENT_CLOSE(){return"}~"}};var Jt,be,ft,Yt,Vt,{EMPTY_ARRAY:en,buildArray:Xe,buildObject:nn,isNonEmptyString:sn,isOf:rn}=E,Ut=class{static initialize(e,t){this.begin=e,this.end=t}},Y=Ut;a(Y,"begin",null),a(Y,"end",null),a(Y,"enclose",e=>Ut.begin+e+Ut.end),a(Y,"makeRegExp",()=>new window.RegExp("(?<="+Ut.begin+").*?(?="+Ut.end+")","gs"));var on=["contents","classes","styles","attributes"],Wt=class{};a(Wt,"rules",(e,t)=>Xe(i=>e.forEach(r=>r.replacements.forEach(l=>l.field===t&&i.push(r))))),a(Wt,"children",(e,t)=>Xe(i=>{let r=l=>{let h=u=>u.forEach(T=>T.field===t&&i.push(l));on.forEach(u=>h(l.replacements[u])),l.rules.forEach(u=>u.replacements.forEach(T=>T.field===t&&i.push(l)))};e.forEach(l=>l.included&&r(l))}));var _=class{static initialize(e){c(this,Jt,e)}},M=_;Jt=new WeakMap,be=new WeakMap,ft=new WeakMap,Yt=new WeakMap,Vt=new WeakMap,o(M,Jt,null),o(M,be,(e,t,i)=>e.push({at:t,field:i.trim(),find:Y.enclose(i)})),o(M,ft,(e,t,i)=>sn(i)&&(i.match(n(_,Jt))||en).forEach(r=>{var l;return n(l=_,be).call(l,e,t,r)})),o(M,Yt,(e,t,i)=>{var r;e[t]=new window.Array,n(r=_,ft).call(r,e[t],t,i)}),o(M,Vt,(e,t,i)=>{e[t]=new window.Array,window.Object.keys(i).forEach(r=>{var l,h;n(l=_,ft).call(l,e[t],t,r),n(h=_,ft).call(h,e[t],t,i[r])})}),a(M,"child",e=>nn(t=>{var i,r,l,h;n(i=_,Yt).call(i,t,"contents",e.content),n(r=_,Yt).call(r,t,"classes",e.classes.join(" ")),n(l=_,Vt).call(l,t,"styles",e.style),n(h=_,Vt).call(h,t,"attributes",e.attributes),e.rules.forEach(u=>u.replacements=_.rule(u))})),a(M,"rule",e=>Xe(t=>{var r;if(rn(e.nested,window.Array))return e.nested.map(l=>_.rule(l));var i="";for(let l in e.properties)i+=`${l}:${e.properties[l]};`;n(r=_,ft).call(r,t,"rules",i)}));var R=class{static initialize(e,t){Y.initialize(e,t),M.initialize(Y.makeRegExp())}};a(R,"extractReplacementsFromRule",M.rule),a(R,"extractReplacementsFromChild",M.child),a(R,"scanRulesForReplacements",Wt.rules),a(R,"scanChildrenForReplacements",Wt.children);var wt=class{static onDOMContentLoaded(e){if(e&&e.constructor===window.Function){let t=()=>{e(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",t),100)};window.addEventListener("DOMContentLoaded",t)}}static getUniqueId(e="WUSE"){let t="_"+(e||"")+"_";for(var i;window.document.getElementById(i=t+(""+window.Math.random()).substring(2))!==null;);return i}static removeChildren(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static htmlEncode(e=""){return typeof e!="string"?null:e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static getCSSVendorPrefix(){let e=window.getComputedStyle(window.document.body,""),i=window.Array.prototype.slice.call(e).filter(r=>r.charAt(0)==="-");return i.length?"-"+i[0].split("-")[1]+"-":""}};var Mt,{noop:an,isOf:dn,hasObjectKeys:bi,isNonEmptyString:Ai,isNonEmptyArray:ln,isAssignedObject:cn,ensureFunction:hn}=E,{htmlEncode:Si}=wt,{TEMPLATES_KIND:un,TEXTNODE_TAG:fn}=D,Ae=class{static initialize(e){cn(e)&&c(this,Mt,hn(e.onFetchTemplate,n(this,Mt)))}},g=Ae;Mt=new WeakMap,o(g,Mt,an),a(g,"cacheInvalidator",e=>e.cache=null),a(g,"renderingIncluder",e=>e.included=!0),a(g,"renderingExcluder",e=>e.included=!1),a(g,"renderRule",(e,t)=>{if(dn(t.nested,window.Array))return`${t.selector}{${t.nested.map(r=>Ae.renderRule(e,r)).join(`
`)}}`;if(Ai(t.selector)&&!t.nested){var i=new window.String;for(let r in t.properties)i+=`${r}:${t.properties[r]};`;return ln(t.replacements)&&t.replacements.forEach(r=>i=e(i,r)),`${t.selector}{${i}}`}return null}),a(g,"renderChild",(e,t)=>{var l;if(t.kind===un)return n(l=Ae,Mt).call(l,t.id);if(t.tag===fn){var i=t.content;return t.replacements.contents.forEach(h=>i=e(i,h)),t.encode?Si(i):i}var r=Ai(t.id)?`<${t.tag} id='${t.id}'`:`<${t.tag}`;if(t.classes.length){var i=t.classes.join(" ");t.replacements.classes.forEach(u=>i=e(i,u)),r+=` class='${i}'`}if(bi(t.style)){var i=" style='";for(let u in t.style)i+=u+": "+t.style[u]+"; ";i+="'",t.replacements.styles.forEach(u=>i=e(i,u)),r+=i}if(bi(t.attributes)){var i=new window.String;for(let u in t.attributes)i+=` ${u}=${t.attributes[u]}`;t.replacements.attributes.forEach(u=>i=e(i,u)),r+=i}if(typeof t.content=="string"){var i=t.content;t.replacements.contents.forEach(u=>i=e(i,u)),r+=`>${t.encode?Si(i):i}</${t.tag}>`}else r+="/>";return r});var Xt,qt,Qt,Zt,{ensureFunction:wn}=E,Ft=class{constructor(e){a(this,"rounds",0);o(this,Xt,0);o(this,qt,null);o(this,Qt,!1);o(this,Zt,null);c(this,Zt,wn(e))}compute(e){return this.rounds+=+c(this,Qt,n(this,Xt)==c(this,qt,n(this,Zt).call(this,e))),c(this,Xt,n(this,qt)),n(this,Qt)}};Xt=new WeakMap,qt=new WeakMap,Qt=new WeakMap,Zt=new WeakMap;var mt,z,at,Se,Ti,kt=class{constructor(e,t){o(this,Se);o(this,mt,null);o(this,z,null);o(this,at,null);if(e instanceof Node&&t instanceof Node)c(this,mt,e),c(this,z,t),c(this,at,t.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return n(this,z)}affiliate(){n(this,mt).appendChild(n(this,z))}disaffiliate(){n(this,mt).removeChild(n(this,z))}promote(e){n(this,at).innerHTML=e,n(this,mt).replaceChild(n(this,at),n(this,z)),d(this,Se,Ti).call(this)}};mt=new WeakMap,z=new WeakMap,at=new WeakMap,Se=new WeakSet,Ti=function(){let e=n(this,at);c(this,at,n(this,z).cloneNode(!1)),c(this,z,e)};var pt,Et,gt=class{constructor(e){a(this,"owner",null);o(this,pt,!1);o(this,Et,"");this.owner=e}get invalidated(){return n(this,pt)}reset(e){c(this,pt,!1),c(this,Et,e)}append(e){c(this,Et,n(this,Et)+e)}verify(e){c(this,pt,e(n(this,Et)))}process(e){(e||n(this,pt))&&this.on_content_invalidation(n(this,Et))}on_content_invalidation(e){}};pt=new WeakMap,Et=new WeakMap;var jt,Te,{isOf:qe,cloneObject:vi,forEachOwnProperty:Di,buildArray:mn}=E,yt=class extends window.Array{constructor(t){super();o(this,jt);a(this,"owner",null);a(this,"last",null);a(this,"version",0);a(this,"locked",!1);this.owner=t}append(t){this.locked?this.on_forbidden_change():qe(t,window.Object)&&(this.push(t),d(this,jt,Te).call(this,t))}prepend(t){this.locked?this.on_forbidden_change():qe(t,window.Object)&&(this.unshift(t),d(this,jt,Te).call(this,t))}replace(t,i){this.locked?this.on_forbidden_change():t>-1&&qe(i,window.Object)&&d(this,jt,Te).call(this,this[t]=i)}persist(){return mn(t=>Di(this,i=>{switch(i){case"owner":case"last":case"length":break;case"version":case"locked":t[i]=this[i];break;default:if(window.Number.isInteger(window.Number(i))){let r=vi(this[i]);r.cache&&(r.cache=null),t.push(r)}break}}))}restore(t){Di(t,i=>{switch(i){case"length":break;case"version":case"locked":this[i]=t[i];break;default:if(window.Number.isInteger(window.Number(i))){let r=vi(t[i]);r.cache&&(r.cache=null),this.push(r)}break}})}on_version_change(){}on_forbidden_change(){}};jt=new WeakSet,Te=function(t){this.last=t,this.version++,this.on_version_change()};var _e,Ni,Ce,Li,Oe,Ri,Ne,Wi,Le,Ui,xt,De,Re,Mi,{EMPTY_STRING:F,EMPTY_ARRAY:pn,noop:ve,buildArray:es,buildObject:En,isOf:C,hasObjectKeys:_i,isNonEmptyString:V,forcedStringSplit:gn}=E,{DEFAULT_TAG:yn,DEFAULT_KIND:In,TEMPLATES_KIND:Qe,SLOTS_KIND:Ze}=D,dt={onInvalidDefinition:ve,onInexistentTemplate:ve,onUnespecifiedSlot:ve,onInvalidId:ve},X=class{static parse(e){if(V(e)){let t=e.trimLeft(),i=Ci();return t.charAt(0)==="%"?t.startsWith(Qe)?d(this,xt,De).call(this,i,t.replace(i.kind=Qe,F)):t.startsWith(Ze)?d(this,xt,De).call(this,i,t.replace(i.kind=Ze,F)):null:d(this,xt,De).call(this,i,t)}return null}};_e=new WeakSet,Ni=function(e,t){let i=t.indexOf("["),r=t.indexOf("]");if(i>-1&&r>-1&&r>i){let l=t.substr(i,r-i+1),h=l.substr(1,l.length-2).split("|");for(let u in h){let T=h[u].split("=");T[0]==="style"?T[1].split(";").forEach(B=>{let li=B.split(":"),ci=li[0].trim();ci.length&&(e.style[ci]=li[1].trim())}):e.attributes[T[0]]=T[1]}return t.replace(l,F)}return t},Ce=new WeakSet,Li=function(e,t){let i=t.indexOf("=");return i>-1?(e.content=t.slice(i+1),!!e.content.length&&e.content.charAt(0)==="&"&&(e.content=e.content.slice(1),e.encode=!!e.content.length&&e.content.charAt(0)!=="&"),t.slice(0,i)):t},Oe=new WeakSet,Ri=function(e,t){let i=t.replaceAll("!"," ").split(" ");return i.slice(1).map(r=>{let[l,...h]=r.toLowerCase().split("+"),u=(h||pn).indexOf("capture")>-1;e.events.push(Oi(l,u))}),i[0]},Ne=new WeakSet,Wi=function(e,t){let i=t.replaceAll("."," ").split(" ");return e.classes=i.slice(1),i[0]},Le=new WeakSet,Ui=function(e,t){if(V(t)){let i=t.indexOf("#");i===-1?e.tag=t:(i>0&&(e.tag=t.substr(0,i)),e.id=t.substr(i+1))}return e},xt=new WeakSet,De=function(e,t){return d(this,Le,Ui).call(this,e,d(this,Ne,Wi).call(this,e,d(this,Oe,Ri).call(this,e,d(this,Ce,Li).call(this,e,d(this,_e,Ni).call(this,e,t)))))},o(X,_e),o(X,Ce),o(X,Oe),o(X,Ne),o(X,Le),o(X,xt);var te=class{static parse(e){return En(t=>(C(e,window.Array)?e:gn(e,`
`).map(i=>i.trim()).join(F).split(";")).forEach(i=>V(i)&&d(this,Re,Mi).call(this,t,i.trim())))}};Re=new WeakSet,Mi=function(e,t){if(!!t.length&&t.indexOf(":")>-1){let[i,...r]=t.split(":"),l=i.trim();if(l.length){let h=r.join(":").trim();e[l]=h.endsWith(";")?h.slice(0,-1):h}}},o(te,Re);var Ci=()=>({kind:In,tag:yn,id:F,classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:F,encode:!1}),bn=()=>({generation:0,persisted:!1}),Oi=(s,e)=>typeof s=="string"&&typeof e=="boolean"?{kind:s,capture:e}:null,An=(s,e)=>{let t=X.parse(s);return t?(t.rules=C(e,window.Array)?e:new window.Array,t.included=!0,t.cache=null,t):dt.onInvalidDefinition(s)},Sn=s=>{if(s!==null){if(s.kind===Qe){if(!window.document.getElementById(s.id))return dt.onInexistentTemplate(s.id)}else if(s.kind===Ze){if(new window.String(s.attributes.slot).replaceAll('"',F).replaceAll("'",F).length===0)return dt.onUnespecifiedSlot(s.id)}else if(typeof s.id!="string"||V(s.id)&&window.document.getElementById(s.id)!==null)return dt.onInvalidId(s.id)}return s},Tn=s=>{if(!C(s,window.Object))return null;let e=window.document.createElement(s.tag);if(s.id.length&&e.setAttribute("id",s.id),s.classes.length&&e.setAttribute("class",s.classes.join(" ")),_i(s.style)){var t=new window.String;for(let i in s.style)t+=i+": "+s.style[i]+"; ";if(t.length){let i=t.trim();e.setAttribute("style",i.endsWith(";")?i.slice(0,-1):i)}}if(_i(s.attributes))for(let i in s.attributes)e.setAttribute(i,s.attributes[i]);return e},vn=(s,e)=>{let t=window.document.createElement("style");return V(s)&&t.setAttribute("media",s),V(e)&&t.setAttribute("type",e),t.appendChild(window.document.createTextNode(F)),t},Dn=(s,e)=>{let t=C(s,window.Array)?s.join(","):V(s)?s:F;return t.length?{selector:t,properties:C(e,window.Object)?e:te.parse(e),cache:null}:null},_n=(s,e,t)=>{let i=C(s,window.Array)?s.join(","):V(s)?s:F,r=C(e,window.Array)?e.join(","):V(e)?e:F;return!i.length||!r.length?null:{selector:i,nested:[{selector:r,properties:C(t,window.Object)?t:te.parse(t)}],cache:null}},Cn=(s,e)=>{if(s.selector===e.selector){for(let t in e.properties)s.properties[t]=e.properties[t];return s.cache=null,!0}return!1},On=(s,e)=>C(s.nested,window.Array)&&s.selector===e.selector?(e.nested.forEach(t=>{var i=!1;for(let r in s.nested)if(i=s.nested[r].selector===t.selector){for(let l in t.properties)s.nested[r].properties[l]=t.properties[l];break}i||s.nested.push(t)}),s.cache=null,!0):!1,f=class{static initialize(e){C(e,window.Object)&&(C(e.onInvalidDefinition,window.Function)&&(dt.onInvalidDefinition=e.onInvalidDefinition),C(e.onInexistentTemplate,window.Function)&&(dt.onInexistentTemplate=e.onInexistentTemplate),C(e.onUnespecifiedSlot,window.Function)&&(dt.onUnespecifiedSlot=e.onUnespecifiedSlot),C(e.onInvalidId,window.Function)&&(dt.onInvalidId=e.onInvalidId))}};a(f,"makeStyleNode",vn),a(f,"newRule",Dn),a(f,"newNestedRule",_n),a(f,"tryToJoinRules",Cn),a(f,"tryToJoinNestedRules",On),a(f,"performValidations",Sn),a(f,"makeMainNode",Tn),a(f,"newChild",An),a(f,"newDefinition",Ci),a(f,"newEvent",Oi),a(f,"newState",bn);var W=class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}};a(W,"specializeClass",(e,t)=>class extends e{constructor(){super(t)}});var G,A,b,j,w,Gt,q,Q,ct,J,Z,ie,It,tt,bt,ht,N,et,it,m,Kt,ne,At,K,x,P,Me,xi,Fe,$i,ke,Gi,je,Ki,ut,$t,se,ti,re,ei,oe,ii,xe,Hi,ae,ni,$e,Bi,de,si,L,k,le,ri,Ht,Ge,zi,Bt,We,Ke,Pi,zt,Ue,{EMPTY_STRING:ee,noop:$,isOf:I,isNonEmptyArray:Fi,isNonEmptyString:lt,forcedStringSplit:ki}=E;function ji(s,e,t,i,r){let l=(T,B)=>window.Object.defineProperty(s,e,{get:T,set:B,enumerable:!0,configurable:!0}),h=()=>delete s[e],u=(T,B)=>ji(s,e,T,B,r);l(()=>t,T=>{u(T,i),I(i,window.Function)?i({renderize:B=>r(e,B),automate:()=>u(T,null),freeze:()=>l(()=>T,B=>{}),defreeze:()=>u(T,i),dereact:()=>l(()=>T,B=>{h(),s[e]=B}),remove:()=>h()}):r(e)})}var Nn=["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"],O={onInvalidState:$,onInvalidKey:$,onInvalidDefinition:$,onLockedDefinition:$,onAllowHTML:$},oi=class extends window.HTMLElement{constructor(t){super();o(this,x);o(this,Me);o(this,Fe);o(this,ke);o(this,je);o(this,ut);o(this,se);o(this,re);o(this,oe);o(this,xe);o(this,ae);o(this,$e);o(this,de);o(this,L);o(this,le);o(this,Ge);o(this,Bt);o(this,Ke);o(this,zt);o(this,G,new window.String);o(this,A,new class extends yt{on_version_change(){var t;this.last.version=this.version,this.last.replacements=R.extractReplacementsFromRule(this.last),window.Wuse.DEBUG&&d(t=this.owner,x,P).call(t,`rules list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,x,P).call(t,"rules list is locked and can not be changed"),O.onLockedDefinition(n(this,w).mainDefinition.id)}}(this));o(this,b,new class extends yt{on_version_change(){var t,i;this.last.version=this.version,this.last.replacements=R.extractReplacementsFromChild(this.last),c(t=this.owner,Q,n(t,Q)|this.last.kind===D.SLOTS_KIND),window.Wuse.DEBUG&&d(i=this.owner,x,P).call(i,`children list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,x,P).call(t,"children list is locked and can not be changed"),O.onLockedDefinition(n(this,w).mainDefinition.id)}}(this));o(this,j,new class extends yt{on_version_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,x,P).call(t,`fields list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,x,P).call(t,"fields list is locked and can not be changed"),O.onLockedDefinition(n(this,w).mainDefinition.id)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));o(this,w,{mainDefinition:f.newDefinition(),styleMedia:D.DEFAULT_STYLE_MEDIA,styleType:D.DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0});o(this,Gt,new window.Object);o(this,q,!1);o(this,Q,!1);o(this,ct,void 0);o(this,J,void 0);o(this,Z,null);o(this,ie,window.Wuse.isShadowElement(this));o(this,It,!1);o(this,tt,!1);o(this,bt,!0);o(this,ht,window.Wuse.elementsStorage);o(this,N,null);o(this,et,new window.String);o(this,it,!1);o(this,m,{root:new class extends gt{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends gt{on_content_invalidation(t){n(this.owner,J).promote(t)}}(this),main:new class extends gt{on_content_invalidation(t){n(this.owner,ct).promote(t)}}(this),renderizers:{rule:t=>n(this,m).style.append(t.cache?t.cache:t.cache=g.renderRule(n(this,Kt),t)),children:{mixed:t=>n(this,ie)&&t.kind===D.SLOTS_KIND?n(this,m).renderizers.children.slot(t):n(this,m).renderizers.children.normal(t),slot:t=>{t.cache||(n(this,m).root.verify(i=>!0),n(this,m).root.append(t.cache=g.renderChild(n(this,Kt),t)))},normal:t=>{n(this,m).main.append(t.cache?t.cache:t.cache=g.renderChild(n(this,Kt),t)),t.rules.forEach(n(this,m).renderizers.rule)}}},gotModified:()=>n(this,m).root.invalidated||n(this,m).main.invalidated||n(this,m).style.invalidated,getDebugInfo:()=>`updated (root: ${n(this,m).root.invalidated}, main: ${n(this,m).main.invalidated}, style: ${n(this,m).style.invalidated})`});o(this,Kt,(t,i)=>t.replace(i.find,this[i.field]!==void 0?this[i.field]:ee));o(this,ne,{bind:{key:()=>{let t=i=>{lt(i)&&(this[i]=d(this,se,ti).call(this,i))};return n(this,q)&&t(n(this,w).mainDefinition.id),i=>t(i.id)},event:"addEventListener"},unbind:{key:()=>{let t=i=>delete this[i];return n(this,q)&&t(n(this,w).mainDefinition.id),i=>t(i.id)},event:"removeEventListener"}});o(this,At,{main:new Ft(window.Wuse.hashRoutine),style:new Ft(window.Wuse.hashRoutine)});o(this,K,{attachment:new window.Wuse.PerformanceMeasurement.StopWatch,partial:new window.Wuse.PerformanceMeasurement.StopWatch,full:new window.Wuse.PerformanceMeasurement.StopWatch,dettachment:new window.Wuse.PerformanceMeasurement.StopWatch});o(this,Ht,()=>Nn.forEach(t=>n(this,Gt)[t]=typeof this[t]=="function"));a(this,"info",{instanceNumber:++oi.instancesCount,unmodifiedRounds:0,updatedRounds:0});c(this,Z,t!==W.REGULAR?this.attachShadow({mode:t}):this),n(this,Ht).call(this),d(this,L,k).call(this,"on_create"),n(this,w).attributeKeys&&this.getAttributeNames().forEach(i=>this[i]=this.getAttribute(i)),d(this,Ge,zi).call(this)&&n(this,N).generation>1?d(this,L,k).call(this,"on_reconstruct",n(this,N)):d(this,L,k).call(this,"on_construct")}get render(){return n(this,tt)?d(this,xe,Hi):$}get redraw(){return n(this,tt)?d(this,$e,Bi):$}connectedCallback(){window.Wuse.MEASURE&&n(this,K).attachment.start(),n(this,Ht).call(this),d(this,L,k).call(this,"on_connect"),d(this,ae,ni).call(this,"on_load"),n(this,it)&&this.persistToElementsStore(),window.Wuse.MEASURE&&n(this,K).attachment.stop(window.Wuse.DEBUG)}disconnectedCallback(){window.Wuse.MEASURE&&n(this,K).dettachment.start(),d(this,ut,$t).call(this,!1),d(this,L,k).call(this,"on_disconnect"),window.Wuse.MEASURE&&n(this,K).dettachment.stop(window.Wuse.DEBUG)}getElementsStore(){return n(this,ht)}setElementsStore(t){return c(this,ht,t),this}hasElementsStoreKey(t){return n(this,it)}getElementsStoreKey(t){return n(this,et)}setElementsStoreKey(t){return c(this,it,lt(c(this,et,t))),this}persistToElementsStore(){if(d(this,zt,Ue).call(this)){let t=n(this,N);if(I(t,window.Object))return n(this,j).snapshot(),t.data=new window.Object({options:n(this,w),html:n(this,G),children:n(this,b).persist(),rules:n(this,A).persist(),fields:n(this,j).persist(),slotted:n(this,Q),identified:n(this,q)}),d(this,Bt,We).call(this),!0}return!1}restoreFromElementsStore(){if(d(this,zt,Ue).call(this)){let t=n(this,N);if(I(t,window.Object)&&t.persisted&&t.data)return c(this,w,t.data.options),c(this,Q,t.data.slotted),c(this,q,t.data.identified),c(this,G,t.data.html),n(this,b).restore(t.data.children),n(this,b).owner=this,n(this,A).restore(t.data.rules),n(this,A).owner=this,n(this,j).restore(t.data.fields),n(this,j).owner=this,n(this,j).recall(),!0}return!1}removeFromElementsStore(){return d(this,zt,Ue).call(this)&&d(this,Ke,Pi).call(this)}selectChildElement(t){return n(this,Z).querySelector(t)}setMainAttribute(t,i){n(this,It)&&n(this,ct).element.setAttribute(t,i)}setMainElement(t){let i=f.performValidations(f.newChild(t));if(i!==null){if(lt(i.content)||Fi(i.events))return O.onInvalidDefinition(t);c(this,q,lt(i.id))&&(n(this,w).mainDefinition.id=i.id),lt(i.tag)&&(n(this,w).mainDefinition.tag=i.tag),Fi(i.classes)&&(n(this,w).mainDefinition.classes=i.classes),I(i.style,window.Object)&&(n(this,w).mainDefinition.style=i.style),I(i.attributes,window.Array)&&(n(this,w).mainDefinition.attributes=i.attributes)}return this}setStyleOptions(t,i){return n(this,w).styleMedia=lt(t)?t:ee,n(this,w).styleType=lt(i)?i:ee,this}setElementsAsKeys(t){return n(this,w).elementKeys=!!t,this}setAttributesAsKeys(t){return n(this,w).attributeKeys=!!t,this}allowRawContent(t){return n(this,w).rawContent=!!t,this}setRawContent(t){return n(this,w).rawContent?c(this,G,t):O.onAllowHTML(),this}appendRawContent(t){return n(this,w).rawContent?c(this,G,n(this,G)+t):O.onAllowHTML(),this}prependRawContent(t){return n(this,w).rawContent?c(this,G,t+n(this,G)):O.onAllowHTML(),this}lockCSSRules(){return n(this,A).locked=!0,this}unlockCSSRules(){return n(this,A).locked=!1,this}appendCSSRule(t,i,r){if(r)return this.appendCSSNestedRule(t,i,r);let l=n(this,A).slice(-1),h=f.newRule(t,i);return(!l.length||!f.tryToJoinRules(l[0],h))&&n(this,A).append(h),this}prependCSSRule(t,i,r){if(r)return this.prependCSSNestedRule(t,i,r);let l=n(this,A).slice(0,1),h=f.newRule(t,i);return(!l.length||!f.tryToJoinRules(l[0],h))&&n(this,A).prepend(h),this}appendCSSNestedRule(t,i,r){let l=n(this,A).slice(-1),h=f.newNestedRule(t,i,r);return(!l.length||!f.tryToJoinNestedRules(l[0],h))&&n(this,A).append(h),this}prependCSSNestedRule(t,i,r){let l=n(this,A).slice(0,1),h=f.newNestedRule(t,i,r);return(!l.length||!f.tryToJoinNestedRules(l[0],h))&&n(this,A).prepend(h),this}lockChildElements(){return n(this,b).locked=!0,this}unlockChildElements(){return n(this,b).locked=!1,this}appendChildElement(t,i){let r=f.performValidations(f.newChild(t,i));return r!==null&&n(this,b).append(r),this}prependChildElement(t,i){let r=f.performValidations(f.newChild(t,i));return r!==null&&n(this,b).prepend(r),this}appendChildElements(t){return(I(t,window.Array)?t:ki(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.appendChildElement(i)),this}prependChildElements(t){return(I(t,window.Array)?t:ki(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.prependChildElement(i)),this}replaceChildElementById(t,i,r){let l=f.newChild(i,r);return l!==null&&n(this,b).replace(n(this,b).findIndex(h=>h.id===t),l),this}checkChildElementIsIncludedById(t,i,r){let l=h=>I(h,window.Function)?h():void 0;return n(this,b).some(h=>h.id===t&&h.included)?l(i):l(r),this}includeChildElementById(t){return n(this,b).forEach(i=>i.id===t&&g.renderingIncluder(i)),this}excludeChildElementById(t){return n(this,b).forEach(i=>i.id===t&&g.renderingExcluder(i)),this}invalidateChildElementsById(t){return n(this,b).forEach(i=>t.indexOf(i.id)>-1&&g.cacheInvalidator(i)),this}invalidateChildElements(t){return I(t,window.Array)&&t.forEach(g.cacheInvalidator),this}lockInstanceFields(){return n(this,j).locked=!0,this}unlockInstanceFields(){return n(this,j).locked=!1,this}makeField(t,i){return this[t]=i,n(this,j).append({name:t,value:i}),this}makeReactiveField(t,i,r,l=!0){return ji(this,t,i,r,(h,u)=>d(this,de,si).call(this,h,u||"$auto")),n(this,j).append({name:t,value:i}),l&&d(this,de,si).call(this,t,"$init"),this}makeExternalReactiveField(t,i,r,l,h=!0){return this.makeReactiveField(i,t[i]||r,u=>{t[i]=this[i],l(u)},h)}suspendRender(){return c(this,bt,!1),this}resumeRender(t=!0){return c(this,bt,!0),t&&this.render(),this}isRenderSuspended(){return!n(this,bt)}static initialize(t){if(R.initialize(D.DEFAULT_REPLACEMENT_OPEN,D.DEFAULT_REPLACEMENT_CLOSE),I(t,window.Object)){I(t.onFetchTemplate,window.Function)&&g.initialize({onFetchTemplate:t.onFetchTemplate}),I(t.onAllowHTML,window.Function)&&(O.onAllowHTML=t.onAllowHTML),I(t.onInvalidKey,window.Function)&&(O.onInvalidKey=t.onInvalidKey),I(t.onInvalidState,window.Function)&&(O.onInvalidState=t.onInvalidState),I(t.onLockedDefinition,window.Function)&&(O.onLockedDefinition=t.onLockedDefinition);let i={onInvalidDefinition:$,onInexistentTemplate:$,onUnespecifiedSlot:$,onInvalidId:$};I(t.onInvalidDefinition,window.Function)&&(O.onInvalidDefinition=t.onInvalidDefinition,i.onInvalidDefinition=t.onInvalidDefinition),I(t.onInexistentTemplate,window.Function)&&(i.onInexistentTemplate=t.onInexistentTemplate),I(t.onUnespecifiedSlot,window.Function)&&(i.onUnespecifiedSlot=t.onUnespecifiedSlot),I(t.onInvalidId,window.Function)&&(i.onInvalidId=t.onInvalidId),f.initialize(i)}}},H=oi;G=new WeakMap,A=new WeakMap,b=new WeakMap,j=new WeakMap,w=new WeakMap,Gt=new WeakMap,q=new WeakMap,Q=new WeakMap,ct=new WeakMap,J=new WeakMap,Z=new WeakMap,ie=new WeakMap,It=new WeakMap,tt=new WeakMap,bt=new WeakMap,ht=new WeakMap,N=new WeakMap,et=new WeakMap,it=new WeakMap,m=new WeakMap,Kt=new WeakMap,ne=new WeakMap,At=new WeakMap,K=new WeakMap,x=new WeakSet,P=function(t){n(this,q)&&window.Wuse.debug(`#${n(this,w).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},Me=new WeakSet,xi=function(){n(this,J)&&n(this,J).affiliate(),n(this,ct).affiliate(),c(this,It,!0)},Fe=new WeakSet,$i=function(){c(this,J,n(this,A).length?new kt(n(this,Z),f.makeStyleNode(n(this,w).styleMedia,n(this,w).styleType)):null),c(this,ct,new kt(n(this,Z),f.makeMainNode(n(this,w).mainDefinition))),n(this,b).forEach(g.cacheInvalidator),n(this,A).forEach(g.cacheInvalidator)},ke=new WeakSet,Gi=function(){n(this,It)&&(n(this,ct).disaffiliate(),n(this,J)&&n(this,J).disaffiliate(),n(this,Q)&&n(this,ie)&&window.Wuse.WebHelpers.removeChildren(this)),c(this,It,!1)},je=new WeakSet,Ki=function(t){return{key:n(this,w).elementKeys&&t.key(),event:(i,r,l)=>{let h=this[`on_${i}_${r}`];if(h){let u=d(this,se,ti).call(this,i);u&&u[t.event](r,h,l)}},slots:()=>this.on_slot_change&&n(this,Z).querySelectorAll("slot").forEach(i=>i[t.event]("slotchange",this.on_slot_change))}},ut=new WeakSet,$t=function(t){if(n(this,tt)&&!t||!n(this,tt)&&t){let i=d(this,je,Ki).call(this,t?n(this,ne).bind:n(this,ne).unbind);n(this,b).forEach(r=>{!r.included&&t||(i.key&&i.key(r),r.events.forEach(l=>l&&i.event(r.id,l.kind,l.capture)))}),n(this,Q)&&i.slots(),c(this,tt,t)}},se=new WeakSet,ti=function(t){return lt(t)?n(this,Z).querySelector(`#${t}`):void 0},re=new WeakSet,ei=function(){n(this,m).root.reset(ee),n(this,m).style.reset(ee),n(this,m).main.reset(n(this,G));let t=n(this,Q)?n(this,m).renderizers.children.mixed:n(this,m).renderizers.children.normal;n(this,b).forEach(i=>i.included&&t(i)),n(this,A).forEach(n(this,m).renderizers.rule),n(this,m).main.verify(i=>!n(this,At).main.compute(i)),n(this,m).style.verify(i=>!n(this,At).style.compute(i))},oe=new WeakSet,ii=function(t,i,r){n(this,m).root.process(t),n(this,m).style.process(i),n(this,m).main.process(r),window.Wuse.DEBUG&&d(this,x,P).call(this,n(this,m).getDebugInfo())},xe=new WeakSet,Hi=function(){!window.Wuse.RENDERING||!n(this,bt)||(window.Wuse.MEASURE&&n(this,K).partial.start(),d(this,L,k).call(this,"on_prerender"),d(this,re,ei).call(this),n(this,m).gotModified()?(d(this,ut,$t).call(this,!1),d(this,oe,ii).call(this,!1,!1,!1),d(this,ut,$t).call(this,!0),this.info.updatedRounds++,d(this,L,k).call(this,"on_update"),d(this,le,ri).call(this,"on_refresh")):this.info.unmodifiedRounds++,window.Wuse.DEBUG&&d(this,x,P).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${n(this,At).main.rounds}, style: ${n(this,At).style.rounds}) | updated: ${this.info.updatedRounds}`),d(this,L,k).call(this,"on_postrender"),window.Wuse.MEASURE&&n(this,K).partial.stop(window.Wuse.DEBUG))},ae=new WeakSet,ni=function(t){d(this,Fe,$i).call(this),d(this,Me,xi).call(this),d(this,L,k).call(this,"on_inject"),d(this,re,ei).call(this),d(this,oe,ii).call(this,!1,!!n(this,J),!0),d(this,ut,$t).call(this,!0),d(this,L,k).call(this,t)},$e=new WeakSet,Bi=function(){window.Wuse.MEASURE&&n(this,K).full.start(),d(this,ut,$t).call(this,!1),d(this,ke,Gi).call(this),d(this,L,k).call(this,"on_unload"),n(this,Ht).call(this),d(this,ae,ni).call(this,"on_reload"),d(this,le,ri).call(this,"on_repaint"),window.Wuse.MEASURE&&n(this,K).full.stop(window.Wuse.DEBUG)},de=new WeakSet,si=function(t,i="$none"){if(n(this,tt)){let r=R.scanRulesForReplacements(n(this,A),t);r.forEach(g.cacheInvalidator);let l=R.scanChildrenForReplacements(n(this,b),t);l.forEach(g.cacheInvalidator),window.Wuse.DEBUG&&d(this,x,P).call(this,`reactive render (label: ${i}, field: ${t}, children: ${l.length}, rules: ${r.length})`),(!!r.length||!!l.length)&&(l.some(h=>!!h.kind.length)&&n(this,b).forEach(h=>h.kind===D.SLOTS_KIND?g.cacheInvalidator(h):void 0),this.render())}},L=new WeakSet,k=function(t,i){n(this,Gt)[t]&&this[t].call(this,i)},le=new WeakSet,ri=function(t,i){n(this,it)&&this.persistToElementsStore(),n(this,Gt)[t]&&window.requestAnimationFrame(()=>this[t].call(this,i))},Ht=new WeakMap,Ge=new WeakSet,zi=function(){if(n(this,it)){let t=n(this,ht).hasItem(n(this,et))?n(this,ht).getItem(n(this,et)):f.newState();if(I(t,window.Object))return c(this,N,t),n(this,N).generation++,d(this,Bt,We).call(this),!0;O.onInvalidState()}return!1},Bt=new WeakSet,We=function(){window.Wuse.DEBUG&&(n(this,N).key=n(this,et)),n(this,N).persisted=!!n(this,N).data,n(this,ht).setItem(n(this,et),n(this,N))},Ke=new WeakSet,Pi=function(){let t=n(this,N);return I(t,window.Object)&&t.persisted&&t.data?(delete t.data,d(this,Bt,We).call(this),!0):!1},zt=new WeakSet,Ue=function(){return n(this,it)?!0:(O.onInvalidKey(),!1)},a(H,"instancesCount",0);var Ji=(s,e)=>window.Object.getOwnPropertyNames(e).forEach(t=>Object.defineProperty(s,t,{value:e[t],writable:!1,configurable:!1,enumerable:!1})),St=class{static detectFeatures(e){let t=(i,r)=>!i&&y.UNSUPPORTED_FEATURE.emit(r);try{t(e.JsHelpers.isOf(window.document,window.HTMLDocument),"HTML Document"),t(e.JsHelpers.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),e.WebHelpers.onDOMContentLoaded(()=>t(e.JsHelpers.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(i){y.UNKNOWN_ERROR.emit()}}static initializeModules(e){e.PerformanceMeasurement.initialize((t,i)=>e.debug(JSON.stringify(e.JsHelpers.buildArray(r=>{switch(r.push({instances:e.elementCount}),r.push(t.getDebugInfo()),i){case"stop":r.push(e.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo());break;case"finish":r.push(e.PerformanceMeasurement.BrowserRender.overall.getDebugInfo());break}})))),rt.initialize({onExtinctTemplate:y.EXTINCT_TEMPLATE.emit,onInvalidTemplate:y.INVALID_TEMPLATE.emit}),S.initialize({onMisnamedClass:y.MISNAMED_CLASS.emit,onUnregistrableClass:y.UNREGISTRABLE_CLASS.emit,onUnregisteredClass:y.UNREGISTERED_CLASS.emit,onAlreadyRegistered:y.ALREADY_REGISTERED.emit,onInvalidClass:y.INVALID_CLASS.emit,onDeferredInstantiation:e.WebHelpers.onDOMContentLoaded}),H.initialize({onAllowHTML:y.ALLOW_HTML.emit,onInvalidKey:y.INVALID_KEY.emit,onInvalidDefinition:y.INVALID_DEFINITION.emit,onLockedDefinition:y.LOCKED_DEFINITION.emit,onInexistentTemplate:y.INEXISTENT_TEMPLATE.emit,onUnespecifiedSlot:y.UNESPECIFIED_SLOT.emit,onInvalidId:y.INVALID_ID.emit,onInvalidState:y.INVALID_STATE.emit,onFetchTemplate:rt.fetch})}static declareUnwritableMembers(e,t){Ji(e,t.fields),Ji(e,t.methods)}};var Ye,Vi,Yi,Pe,Je,Pt,He=s=>s>1e3?(s/1e3).toFixed(2)+"s":s.toFixed(2)+"ms",Be=class{constructor(){a(this,"round",0);a(this,"domTime",window.Number.MAX_SAFE_INTEGER);a(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var e=new window.Object;return e.round=this.round,e.domTime=He(this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(e.renderTime=He(this.renderTime)),e}},ze=class{constructor(e){a(this,"name","");a(this,"rounds",0);a(this,"time",0);a(this,"average",0);this.name=e}compute(e){this.rounds++,this.time+=e,this.average=this.time/this.rounds}getDebugInfo(){let e=He(this.time),t=He(this.average);return{name:this.name,rounds:this.rounds,spent:e,average:t}}},U=class{static initialize(e){typeof e=="function"&&c(U,Pt,e),U.DOMUpdate.overall=new ze("overall-dom-update"),U.BrowserRender.overall=new ze("overall-browser-render")}},nt=U;Pt=new WeakMap,o(nt,Pt,()=>{}),a(nt,"StopWatch",(Yi=class{constructor(){o(this,Ye);a(this,"_begin",0);a(this,"_end",{dom:0,render:0});a(this,"rounds",0);a(this,"last",new Be);a(this,"best",new Be);a(this,"averages",{dom:0,render:0})}start(){(U.DOMUpdate.check||U.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(e){var t;U.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,U.DOMUpdate.overall.compute(this.last.domTime)),U.BrowserRender.check?setTimeout(()=>d(this,Ye,Vi).bind(this)(e)):e&&n(t=U,Pt).call(t,this,"stop")}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages}}},Ye=new WeakSet,Vi=function(e){var t;this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,U.BrowserRender.overall.compute(this.last.renderTime),e&&n(t=U,Pt).call(t,this,"finish")},Yi)),a(nt,"DOMUpdate",(Pe=class{},a(Pe,"check",!0),a(Pe,"overall",null),Pe)),a(nt,"BrowserRender",(Je=class{},a(Je,"check",!1),a(Je,"overall",null),Je));var st,he,ai,ce=class{constructor(){o(this,he);o(this,st,new window.Object)}get length(){return d(this,he,ai).call(this).length}key(e){return d(this,he,ai).call(this)[e]||null}getItem(e){return n(this,st)[e]}setItem(e,t){n(this,st)[e]=t}removeItem(e){delete n(this,st)[e]}clear(){c(this,st,new window.Object)}hasItem(e){return n(this,st).hasOwnProperty(e)}};st=new WeakMap,he=new WeakSet,ai=function(){return window.Object.keys(n(this,st))};var ue=class{static defaultRoutine(e=""){var t=0;for(let i=0;i<e.length;i++)t=(t=(t<<5)-t+e.charCodeAt(i))&t;return t}};var Xi="0.5.6";var p,{noop:fe,isOf:di}=E;window.Wuse=(p=class{static get VERSION(){return Xi}static get elementCount(){return H.instancesCount}},a(p,"DEBUG",!1),a(p,"FATALS",!1),a(p,"MEASURE",!1),a(p,"RENDERING",!0),a(p,"hashRoutine",ue.defaultRoutine),a(p,"elementsStorage",new ce),a(p,"tmp",null),a(p,"WebHelpers",null),a(p,"JsHelpers",null),a(p,"PerformanceMeasurement",null),a(p,"NonShadowElement",null),a(p,"OpenShadowElement",null),a(p,"ClosedShadowElement",null),a(p,"debug",fe),a(p,"blockUpdate",fe),a(p,"register",fe),a(p,"instantiate",fe),a(p,"isShadowElement",fe),(()=>{St.declareUnwritableMembers(p,{fields:{tmp:new window.Object,WebHelpers:wt,JsHelpers:E,PerformanceMeasurement:nt,NonShadowElement:W.specializeClass(H,W.REGULAR),OpenShadowElement:W.specializeClass(H,W.OPEN),ClosedShadowElement:W.specializeClass(H,W.CLOSED)},methods:{debug:e=>window.console.log("[WUSE:DEBUG]",e),blockUpdate:(e,t)=>{if(di(e,Function)){window.Wuse.DEBUG&&window.Wuse.debug("blocking"),window.Wuse.RENDERING=!1;try{e(t)}catch(i){throw i}finally{window.Wuse.RENDERING=!0,window.Wuse.DEBUG&&window.Wuse.debug("unblocking")}}},register:e=>S.registerClasses(di(e,window.Array)?e:new window.Array(e)),instantiate:(e,t,i)=>S.instantiateClasses(di(e,window.Array)?e:new window.Array(e),t,i),isShadowElement:e=>{let t=window.Object.getPrototypeOf(e.constructor);return t===window.Wuse.OpenShadowElement||t===window.Wuse.ClosedShadowElement}}}),St.detectFeatures(p),St.initializeModules(p)})(),p);})();
