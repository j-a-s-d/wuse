(()=>{var as=Object.defineProperty;var os=(m,s,i)=>s in m?as(m,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[s]=i;var h=(m,s,i)=>(os(m,typeof s!="symbol"?s+"":s,i),i),Ne=(m,s,i)=>{if(!s.has(m))throw TypeError("Cannot "+i)};var e=(m,s,i)=>(Ne(m,s,"read from private field"),i?i.call(m):s.get(m)),a=(m,s,i)=>{if(s.has(m))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(m):s.set(m,i)},u=(m,s,i,t)=>(Ne(m,s,"write to private field"),t?t.call(m,i):s.set(m,i),i);var c=(m,s,i)=>(Ne(m,s,"access private method"),i);var Rt=class{static onDOMContentLoaded(s){if(s&&s.constructor===window.Function){let i=()=>{s(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",i),100)};window.addEventListener("DOMContentLoaded",i)}}static getUniqueId(s="WUSE"){let i="_"+(s||"")+"_";for(var t;window.document.getElementById(t=i+(""+window.Math.random()).substring(2))!==null;);return t}static removeChildren(s){if(s)for(;s.firstChild;)s.removeChild(s.firstChild)}static htmlEncode(s=""){return typeof s=="string"?s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):null}static getCSSVendorPrefix(){let s=window.getComputedStyle(window.document.body,""),t=window.Array.prototype.slice.call(s).filter(r=>r.charAt(0)==="-");return t.length?"-"+t[0].split("-")[1]+"-":""}};var Xt,T,ve=class{static get UNKNOWN_ERROR(){return e(this,T).call(this,0,s=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return e(this,T).call(this,1,s=>`Unsupported feature: ${s}.`)}static get UNREGISTERED_CLASS(){return e(this,T).call(this,2,s=>`Unregistered class: ${s}.`)}static get INVALID_CLASS(){return e(this,T).call(this,3,s=>`Invalid class: ${s}.`)}static get MISNAMED_CLASS(){return e(this,T).call(this,4,s=>`Misnamed class: ${s}.`)}static get INVALID_DEFINITION(){return e(this,T).call(this,10,s=>`Invalid definition: ${s}.`)}static get INVALID_ID(){return e(this,T).call(this,11,s=>`Invalid id: ${s}.`)}static get INVALID_KEY(){return e(this,T).call(this,12,s=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return e(this,T).call(this,13,s=>"Call first: this.allowRawContent(true).")}static get INEXISTENT_TEMPLATE(){return e(this,T).call(this,20,s=>`Inexistent template: #${s}.`)}static get EXTINCT_TEMPLATE(){return e(this,T).call(this,21,s=>`Extinct template: #${s}.`)}static get INVALID_TEMPLATE(){return e(this,T).call(this,22,s=>`Invalid template: #${s}.`)}static get UNESPECIFIED_SLOT(){return e(this,T).call(this,30,s=>`Unespecified slot: #${s}.`)}},et=ve;Xt=new WeakMap,T=new WeakMap,a(et,Xt,"[WUSE:ERROR]"),a(et,T,(s,i)=>({code:s,emit:t=>{let r=`${e(ve,Xt)} ${s} | ${i(t)}`;if(Wuse.FATALS||s<10)throw new window.Error(r);return window.console.error(r),null}}));var Tt,Ot,Nt,vt,ut=class{constructor(s){h(this,"rounds",0);a(this,Tt,0);a(this,Ot,null);a(this,Nt,!1);a(this,vt,null);u(this,vt,typeof s=="function"?s:()=>{})}compute(s){return this.rounds+=+u(this,Nt,e(this,Tt)==u(this,Ot,e(this,vt).call(this,s))),u(this,Tt,e(this,Ot)),e(this,Nt)}};Tt=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,vt=new WeakMap;var k,Ct,Ie,It=class{constructor(){a(this,Ct);a(this,k,new window.Object)}get length(){return c(this,Ct,Ie).call(this).length}key(s){return c(this,Ct,Ie).call(this)[s]||null}getItem(s){return e(this,k)[s]}setItem(s,i){e(this,k)[s]=i}removeItem(s){delete e(this,k)[s]}clear(){u(this,k,new window.Object)}hasItem(s){return e(this,k).hasOwnProperty(s)}};k=new WeakMap,Ct=new WeakSet,Ie=function(){return window.Object.keys(e(this,k))};var st,F,Y,qt,Ke,ft=class{constructor(s,i){a(this,qt);a(this,st,null);a(this,F,null);a(this,Y,null);if(s instanceof Node&&i instanceof Node)u(this,st,s),u(this,F,i),u(this,Y,i.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return e(this,F)}affiliate(){e(this,st).appendChild(e(this,F))}disaffiliate(){e(this,st).removeChild(e(this,F))}promote(s){e(this,Y).innerHTML=s,e(this,st).replaceChild(e(this,Y),e(this,F)),c(this,qt,Ke).call(this)}};st=new WeakMap,F=new WeakMap,Y=new WeakMap,qt=new WeakSet,Ke=function(){let s=e(this,Y);u(this,Y,e(this,F).cloneNode(!1)),u(this,F,s)};var it,nt,rt=class{constructor(s){h(this,"owner",null);a(this,it,!1);a(this,nt,"");this.owner=s}get invalidated(){return e(this,it)}reset(s){u(this,it,!1),u(this,nt,s)}append(s){u(this,nt,e(this,nt)+s)}verify(s){u(this,it,s(e(this,nt)))}process(){e(this,it)&&this.on_content_invalidation(e(this,nt))}on_content_invalidation(s){}};it=new WeakMap,nt=new WeakMap;var wt,te,Be,ie,X,Ge,ne,He,re,Ve,ae,ze,oe,Je,Et,ee,ce,Ce,We,Mt,he,Lt,Qt,Zt,q,ct,Pt,Ut,P,M,_t,g,gt,le,de,ht,xt,Ft,Dt,at,Q,U,R,b,j,p,yt,K,B,Z,$,G,jt,lt,H,_,v,V,z,f,St,$t,dt,x,kt,De,J,ot,ue,Ye,fe,Xe,me,qe,pe,Qe,tt,pt,Kt,Le,Bt,Pe,Gt,Ue,we,Ze,Ht,xe,Ee,_e,Vt,Fe,ge,ts,N,C,zt,je,bt,ye,es,At,se,Jt,$e,Se,mt,ss,be,is,Ae,ns,Re,rs,A,Wt,Me,Yt,w,Te,S,Oe,O,I,W,n=class{static get VERSION(){return"0.3.5"}static blockUpdate(s,i){if(n.isOf(s,Function)){n.DEBUG&&n.debug("blocking"),n.RENDERING=!1;try{s(i)}catch(t){throw t}finally{n.RENDERING=!0,n.DEBUG&&n.debug("unblocking")}}}static debug(s){window.console.log("[WUSE:DEBUG]",s)}static isOf(s,i){return!!(s&&s.constructor===i)}static isNonEmptyString(s){return typeof s=="string"&&!!s.length}static forcedStringSplit(s,i){return typeof s=="string"?s.split(i):new window.Array}static hasObjectKeys(s){return!!window.Object.keys(s).length}static buildArray(s){var i;return c(i=n,Wt,Me).call(i,new window.Array,s)}static buildObject(s){var i;return c(i=n,Wt,Me).call(i,new window.Object,s)}static register(s){return e(n,W).registerClasses(n.isOf(s,window.Array)?s:new window.Array(s))}static instantiate(s,i){return e(n,W).instantiateClasses(n.isOf(s,window.Array)?s:new window.Array(s),i)}static isShadowElement(s){let i=window.Object.getPrototypeOf(s.constructor);return i===n.OpenShadowElement||i===n.ClosedShadowElement}static get elementCount(){return e(n,I).instancesCount}},E=n;A=new WeakMap,Wt=new WeakSet,Me=function(s,i){return n.isOf(i,window.Function)&&i(s),s},Yt=new WeakMap,w=new WeakMap,Te=new WeakMap,S=new WeakMap,Oe=new WeakMap,O=new WeakMap,I=new WeakMap,W=new WeakMap,a(E,Wt),a(E,A,et),h(E,"WebHelpers",Rt),h(E,"tmp",new window.Object),h(E,"DEBUG",!1),h(E,"FATALS",!1),h(E,"MEASURE",!1),h(E,"RENDERING",!0),a(E,Yt,new window.Array),a(E,w,(Mt=class{static makeStyleNode(s,i){var t=window.document.createElement("style");return n.isNonEmptyString(s)&&t.setAttribute("media",s),n.isNonEmptyString(i)&&t.setAttribute("type",i),t.appendChild(window.document.createTextNode("")),t}static newRule(s,i){let t=n.isOf(s,window.Array)?s.join(","):""+s,r=n.isOf(i,window.Object)?i:e(this,Lt).parse(i);return t.length?{selector:t,properties:r,cache:null}:null}static newNestedRule(s,i,t){let r=n.isOf(s,window.Array)?s.join(","):""+s,o=n.isOf(i,window.Array)?i.join(","):""+i,l=n.isOf(t,window.Object)?t:e(this,Lt).parse(t);return!r.length||!o.length?null:{selector:r,nested:[{selector:o,properties:l}],cache:null}}static tryToJoinRules(s,i){if(s.selector===i.selector){for(let t in i.properties)s.properties[t]=i.properties[t];return s.cache=null,!0}return!1}static tryToJoinNestedRules(s,i){return n.isOf(s.nested,window.Array)&&s.selector===i.selector?(i.nested.forEach(t=>{var r=!1;for(let o in s.nested)if(r=s.nested[o].selector===t.selector){for(let l in t.properties)s.nested[o].properties[l]=t.properties[l];break}r||s.nested.push(t)}),s.cache=null,!0):!1}static makeMainNode(s){var i=window.document.createElement(s.tag);if(s.id.length&&i.setAttribute("id",s.id),s.classes.length&&i.setAttribute("class",s.classes.join(" ")),n.hasObjectKeys(s.style)){var t="";for(let r in s.style)t+=r+": "+s.style[r]+"; ";if(t.length){let r=t.trim();i.setAttribute("style",r.endsWith(";")?r.slice(0,-1):r)}}if(n.hasObjectKeys(s.attributes))for(let r in s.attributes)i.setAttribute(r,s.attributes[r]);return i}static newEvent(s,i){return typeof s=="string"&&typeof i=="boolean"?{kind:s,capture:i}:null}static performValidations(s){if(s.kind===e(n,S).TEMPLATES_KIND){if(!window.document.getElementById(s.id))return e(n,A).INEXISTENT_TEMPLATE.emit(s.id)}else if(s.kind===e(n,S).SLOTS_KIND){if(new String(s.attributes.slot).replaceAll('"',"").replaceAll("'","").length===0)return e(n,A).UNESPECIFIED_SLOT.emit(s.id)}else if(typeof s.id!="string"||s.id!==""&&window.document.getElementById(s.id)!==null)return e(n,A).INVALID_ID.emit(s.id);return s}static newChild(s,i){var t=e(this,he).parse(s.trimLeft());return t?(t.rules=n.isOf(i,window.Array)?i:new window.Array,t.rendering=!0,t.cache=null,t):e(n,A).INVALID_DEFINITION.emit(s)}static newDefinition(){return{kind:e(n,S).DEFAULT_KIND,tag:e(n,S).DEFAULT_TAG,id:"",classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:"",encode:!1}}},he=new WeakMap,Lt=new WeakMap,h(Mt,"PartsHolder",(Be=class extends window.Array{constructor(i){super();a(this,wt);h(this,"owner",null);h(this,"last",null);h(this,"version",0);this.owner=i}append(i){n.isOf(i,window.Object)&&(this.push(i),c(this,wt,te).call(this,i))}prepend(i){n.isOf(i,window.Object)&&(this.unshift(i),c(this,wt,te).call(this,i))}replace(i,t){i>-1&&n.isOf(t,window.Object)&&c(this,wt,te).call(this,this[i]=t)}on_version_change(){}persist(){let i=new window.Array;return window.Object.getOwnPropertyNames(this).forEach(t=>{switch(t){case"owner":case"last":case"length":break;case"version":i[t]=this[t];break;default:if(window.Number.isInteger(Number(t))){let r=window.Object.assign(new window.Object,this[t]);r.cache&&(r.cache=null),i.push(r)}break}}),i}restore(i){window.Object.getOwnPropertyNames(i).forEach(t=>{switch(t){case"length":break;case"version":this[t]=i[t];break;default:if(window.Number.isInteger(Number(t))){let r=window.Object.assign(new window.Object,i[t]);r.cache&&(r.cache=null),this.push(r)}break}})}},wt=new WeakSet,te=function(i){this.last=i,this.version++,this.on_version_change()},Be)),a(Mt,he,(X=class{static parse(s){if(n.isNonEmptyString(s)){var i=e(n,w).newDefinition();return s.charAt(0)==="%"?s.startsWith(e(n,S).TEMPLATES_KIND)?c(this,Et,ee).call(this,i,s.replace(i.kind=e(n,S).TEMPLATES_KIND,"")):s.startsWith(e(n,S).SLOTS_KIND)?c(this,Et,ee).call(this,i,s.replace(i.kind=e(n,S).SLOTS_KIND,"")):null:c(this,Et,ee).call(this,i,s)}return null}},ie=new WeakSet,Ge=function(s,i){let t=i.indexOf("["),r=i.indexOf("]");if(t>-1&&r>-1&&r>t){let l=i.substr(t,r-t+1),d=l.substr(1,l.length-2).split("|");for(var o in d){let y=d[o].split("=");y[0]==="style"?y[1].split(";").forEach(D=>{let L=D.split(":"),ke=L[0].trim();ke.length&&(s.style[ke]=L[1].trim())}):s.attributes[y[0]]=y[1]}return i.replace(l,"")}return i},ne=new WeakSet,He=function(s,i){let t=i.indexOf("=");return t>-1?(s.content=i.slice(t+1),!!s.content.length&&s.content.charAt(0)==="&"&&(s.content=s.content.slice(1),s.encode=!!s.content.length&&s.content.charAt(0)!=="&"),i.slice(0,t)):i},re=new WeakSet,Ve=function(s,i){let t=i.replaceAll("!"," ").split(" ");return t.slice(1).map(r=>{let[o,...l]=r.toLowerCase().split("+"),d=(l||e(n,Yt)).indexOf("capture")>-1;s.events.push(e(n,w).newEvent(o,d))}),t[0]},ae=new WeakSet,ze=function(s,i){let t=i.replaceAll("."," ").split(" ");return s.classes=t.slice(1),t[0]},oe=new WeakSet,Je=function(s,i){if(i!==""){let t=i.indexOf("#");t===-1?s.tag=i:(t>0&&(s.tag=i.substr(0,t)),s.id=i.substr(t+1))}return s},Et=new WeakSet,ee=function(s,i){return c(this,oe,Je).call(this,s,c(this,ae,ze).call(this,s,c(this,re,Ve).call(this,s,c(this,ne,He).call(this,s,c(this,ie,Ge).call(this,s,i)))))},a(X,ie),a(X,ne),a(X,re),a(X,ae),a(X,oe),a(X,Et),X)),a(Mt,Lt,(Ce=class{static parse(s){let i=new window.Object;return(n.isOf(s,window.Array)?s:n.forcedStringSplit(s,`
`).map(t=>t.trim()).join("").split(";")).forEach(t=>n.isNonEmptyString(t)&&c(this,ce,We).call(this,i,t.trim())),i}},ce=new WeakSet,We=function(s,i){if(!!i.length&&i.indexOf(":")>-1){let[t,...r]=i.split(":"),o=t.trim();if(o.length){let l=r.join(":").trim();s[o]=l.endsWith(";")?l.slice(0,-1):l}}},a(Ce,ce),Ce)),Mt)),a(E,Te,new It),h(E,"PerformanceMeasurement",(q=class{static initialize(){n.PerformanceMeasurement.DOMUpdate.overall=new(e(n.PerformanceMeasurement,Ut))("overall-dom-update"),n.PerformanceMeasurement.BrowserRender.overall=new(e(n.PerformanceMeasurement,Ut))("overall-browser-render")}},ct=new WeakMap,Pt=new WeakMap,Ut=new WeakMap,a(q,ct,s=>s>1e3?(s/1e3).toFixed(2)+"s":s.toFixed(2)+"ms"),a(q,Pt,class{constructor(){h(this,"round",0);h(this,"domTime",window.Number.MAX_SAFE_INTEGER);h(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var i,t;var s=new window.Object;return s.round=this.round,s.domTime=e(i=n.PerformanceMeasurement,ct).call(i,this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(s.renderTime=e(t=n.PerformanceMeasurement,ct).call(t,this.renderTime)),s}}),a(q,Ut,class{constructor(s){h(this,"name","");h(this,"rounds",0);h(this,"time",0);h(this,"average",0);this.name=s}compute(s){this.rounds++,this.time+=s,this.average=this.time/this.rounds}getDebugInfo(){var t,r;let s=e(t=n.PerformanceMeasurement,ct).call(t,this.time),i=e(r=n.PerformanceMeasurement,ct).call(r,this.average);return{name:this.name,rounds:this.rounds,spent:s,average:i}}}),h(q,"StopWatch",class{constructor(){h(this,"_begin",0);h(this,"_end",{dom:0,render:0});h(this,"rounds",0);h(this,"last",new(e(n.PerformanceMeasurement,Pt)));h(this,"best",new(e(n.PerformanceMeasurement,Pt)));h(this,"averages",{dom:0,render:0})}start(){(n.PerformanceMeasurement.DOMUpdate.check||n.PerformanceMeasurement.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(){n.PerformanceMeasurement.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,n.PerformanceMeasurement.DOMUpdate.overall.compute(this.last.domTime)),n.PerformanceMeasurement.BrowserRender.check?setTimeout(this.finish.bind(this)):n.DEBUG&&n.debug(JSON.stringify(this.getDebugInfo()),JSON.stringify(n.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo()))}finish(){this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,n.PerformanceMeasurement.BrowserRender.overall.compute(this.last.renderTime),n.DEBUG&&n.debug(JSON.stringify(this.getDebugInfo()),JSON.stringify(n.PerformanceMeasurement.BrowserRender.overall.getDebugInfo()))}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages,instances:n.elementCount}}}),h(q,"DOMUpdate",(Qt=class{},h(Qt,"check",!0),h(Qt,"overall",null),Qt)),h(q,"BrowserRender",(Zt=class{},h(Zt,"check",!1),h(Zt,"overall",null),Zt)),q)),h(E,"hashRoutine",s=>{var i=0;for(let t=0;t<s.length;t++)i=(i=(i<<5)-i+s.charCodeAt(t))&i;return i}),a(E,S,(P=class{},h(P,"TEMPLATES_KIND","%templates%"),h(P,"SLOTS_KIND","%slots%"),h(P,"TEXTNODE_TAG","^text^"),h(P,"DEFAULT_KIND",""),h(P,"DEFAULT_TAG","div"),h(P,"DEFAULT_STYLE_MEDIA","screen"),h(P,"DEFAULT_STYLE_TYPE","text/css"),h(P,"DEFAULT_REPLACEMENT_OPEN","~{"),h(P,"DEFAULT_REPLACEMENT_CLOSE","}~"),P)),h(E,"ReactiveFields",(Dt=class{static make(s,i,t,r,o){let l=(D,L)=>window.Object.defineProperty(s,i,{get:D,set:L,enumerable:!0,configurable:!0}),d=()=>delete s[i],y=(D,L)=>this.make(s,i,D,L,o);l(()=>t,D=>{y(D,r),n.isOf(r,window.Function)?r({renderize:L=>o(i,L),automate:()=>y(D,null),freeze:()=>l(()=>D,L=>{}),defreeze:()=>y(D,r),dereact:()=>l(()=>D,L=>{d(),s[i]=L}),remove:()=>d()}):o(i)})}},h(Dt,"ReplacementMarkers",(M=class{},h(M,"begin",e(n,S).DEFAULT_REPLACEMENT_OPEN),h(M,"end",e(n,S).DEFAULT_REPLACEMENT_CLOSE),h(M,"enclose",i=>M.begin+i+M.end),h(M,"makeRegExp",()=>new RegExp("(?<="+M.begin+").*?(?="+M.end+")","gs")),M)),h(Dt,"ReplacementsScanners",(_t=class{},h(_t,"rules",(s,i)=>n.buildArray(t=>s.forEach(r=>r.replacements.forEach(o=>o.field===i&&t.push(r))))),h(_t,"children",(s,i)=>n.buildArray(t=>{let r=o=>{let l=d=>d.forEach(y=>y.field===i&&t.push(o));["contents","classes","styles","attributes"].forEach(d=>l(o.replacements[d])),o.rules.forEach(d=>d.replacements.forEach(y=>y.field===i&&t.push(o)))};s.forEach(o=>o.rendering&&r(o))})),_t)),h(Dt,"ReplacementsExtractors",(g=class{},gt=new WeakMap,le=new WeakMap,de=new WeakMap,ht=new WeakMap,xt=new WeakMap,Ft=new WeakMap,a(g,gt,null),a(g,le,i=>i.match(e(g,gt)?e(g,gt):u(g,gt,n.ReactiveFields.ReplacementMarkers.makeRegExp()))),a(g,de,(i,t,r)=>i.push({at:t,find:n.ReactiveFields.ReplacementMarkers.enclose(r),field:r.trim()})),a(g,ht,(i,t,r)=>{var o;return n.isNonEmptyString(r)&&(e(o=g,le).call(o,r)||e(n,Yt)).forEach(l=>{var d;return e(d=g,de).call(d,i,t,l)})}),a(g,xt,(i,t,r)=>{var o;i[t]=new window.Array,e(o=g,ht).call(o,i[t],t,r)}),a(g,Ft,(i,t,r)=>{i[t]=new window.Array,window.Object.keys(r).forEach(o=>{var l,d;e(l=n.ReactiveFields.ReplacementsExtractors,ht).call(l,i[t],t,o),e(d=n.ReactiveFields.ReplacementsExtractors,ht).call(d,i[t],t,r[o])})}),h(g,"child",i=>n.buildObject(t=>{var r,o,l,d;e(r=g,xt).call(r,t,"contents",i.content),e(o=g,xt).call(o,t,"classes",i.classes.join(" ")),e(l=g,Ft).call(l,t,"styles",i.style),e(d=g,Ft).call(d,t,"attributes",i.attributes),i.rules.forEach(y=>y.replacements=n.ReactiveFields.ReplacementsExtractors.rule(y))})),h(g,"rule",i=>n.buildArray(t=>{var o;if(n.isOf(i.nested,window.Array))return i.nested.map(l=>n.ReactiveFields.ReplacementsExtractors.rule(l));var r="";for(let l in i.properties)r+=l+":"+i.properties[l]+";";e(o=g,ht).call(o,t,"rules",r)})),g)),Dt)),a(E,Oe,s=>{let i=window.document.getElementById(s);return i===null?e(n,A).EXTINCT_TEMPLATE.emit(s):i.tagName!=="TEMPLATE"?e(n,A).INVALID_TEMPLATE.emit(s):i.innerHTML}),a(E,O,(at=class{},h(at,"cacheInvalidator",s=>s.cache=null),h(at,"renderingIncluder",s=>s.rendering=!0),h(at,"renderingExcluder",s=>s.rendering=!1),h(at,"renderRule",(s,i)=>{if(n.isOf(i.nested,window.Array))return i.selector+"{"+i.nested.map(r=>e(n,O).renderRule(s,r)).join(`
`)+"}";if(i.selector!==""){var t="";for(let r in i.properties)t+=r+":"+i.properties[r]+";";return n.isOf(i.replacements,window.Array)&&!!i.replacements.length&&i.replacements.forEach(r=>t=s(t,r)),i.selector+"{"+t+"}"}return null}),h(at,"renderChild",(s,i)=>{var o;if(i.kind===e(n,S).TEMPLATES_KIND)return e(o=n,Oe).call(o,i.id);if(i.tag===e(n,S).TEXTNODE_TAG){var t=i.content;return i.replacements.contents.forEach(l=>t=s(t,l)),i.encode?n.WebHelpers.htmlEncode(t):t}var r=n.isNonEmptyString(i.id)?`<${i.tag} id='${i.id}'`:"<"+i.tag;if(i.classes.length){var t=i.classes.join(" ");i.replacements.classes.forEach(d=>t=s(t,d)),r+=` class='${t}'`}if(n.hasObjectKeys(i.style)){var t=" style='";for(let d in i.style)t+=d+": "+i.style[d]+"; ";t+="'",i.replacements.styles.forEach(d=>t=s(t,d)),r+=t}if(n.hasObjectKeys(i.attributes)){var t="";for(let d in i.attributes)t+=" "+d+"="+i.attributes[d];i.replacements.attributes.forEach(d=>t=s(t,d)),r+=t}if(typeof i.content=="string"){var t=i.content;i.replacements.contents.forEach(d=>t=s(t,d)),r+=`>${i.encode?n.WebHelpers.htmlEncode(t):t}</${i.tag}>`}else r+="/>";return r}),at)),a(E,I,(Q=class extends window.HTMLElement{constructor(t){super();a(this,kt);a(this,J);a(this,ue);a(this,fe);a(this,me);a(this,pe);a(this,tt);a(this,Kt);a(this,Bt);a(this,Gt);a(this,we);a(this,Ht);a(this,Ee);a(this,Vt);a(this,ge);a(this,N);a(this,zt);a(this,ye);a(this,At);a(this,Jt);a(this,U,"");a(this,R,new class extends e(n,w).PartsHolder{on_version_change(){var t;this.last.version=this.version,this.last.replacements=n.ReactiveFields.ReplacementsExtractors.rule(this.last),n.DEBUG&&c(t=this.owner,J,ot).call(t,`rules list version change: ${this.version}`)}}(this));a(this,b,new class extends e(n,w).PartsHolder{on_version_change(){var t,r;this.last.version=this.version,this.last.replacements=n.ReactiveFields.ReplacementsExtractors.child(this.last),u(t=this.owner,B,e(t,B)|this.last.kind===e(n,S).SLOTS_KIND),n.DEBUG&&c(r=this.owner,J,ot).call(r,`children list version change: ${this.version}`)}}(this));a(this,j,new class extends e(n,w).PartsHolder{on_version_change(){var t;n.DEBUG&&c(t=this.owner,J,ot).call(t,`fields list version change: ${this.version}`)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));a(this,p,{mainDefinition:e(n,w).newDefinition(),styleMedia:e(n,S).DEFAULT_STYLE_MEDIA,styleType:e(n,S).DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0});a(this,yt,new window.Object);a(this,K,!1);a(this,B,!1);a(this,Z,void 0);a(this,$,void 0);a(this,G,null);a(this,jt,n.isShadowElement(this));a(this,lt,!1);a(this,H,!1);a(this,_,e(n,Te));a(this,v,null);a(this,V,"");a(this,z,!1);a(this,f,{root:new class extends rt{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends rt{on_content_invalidation(t){e(this.owner,$).promote(t)}}(this),main:new class extends rt{on_content_invalidation(t){e(this.owner,Z).promote(t)}}(this),renderizers:{rule:t=>e(this,f).style.append(t.cache?t.cache:t.cache=e(n,O).renderRule(e(this,St),t)),children:{mixed:t=>e(this,jt)&&t.kind===e(n,S).SLOTS_KIND?e(this,f).renderizers.children.slot(t):e(this,f).renderizers.children.normal(t),slot:t=>{t.cache||(e(this,f).root.verify(r=>!0),e(this,f).root.append(t.cache=e(n,O).renderChild(e(this,St),t)))},normal:t=>{e(this,f).main.append(t.cache?t.cache:t.cache=e(n,O).renderChild(e(this,St),t)),t.rules.forEach(e(this,f).renderizers.rule)}}},gotModified:()=>e(this,f).root.invalidated||e(this,f).main.invalidated||e(this,f).style.invalidated,getDebugInfo:()=>`updated (root: ${e(this,f).root.invalidated}, main: ${e(this,f).main.invalidated}, style: ${e(this,f).style.invalidated})`});a(this,St,(t,r)=>t.replace(r.find,this[r.field]!==void 0?this[r.field]:""));a(this,$t,{bind:{key:()=>{let t=r=>{n.isNonEmptyString(r)&&(this[r]=c(this,Kt,Le).call(this,r))};return e(this,K)&&t(e(this,p).mainDefinition.id),r=>t(r.id)},event:"addEventListener"},unbind:{key:()=>{let t=r=>delete this[r];return e(this,K)&&t(e(this,p).mainDefinition.id),r=>t(r.id)},event:"removeEventListener"}});a(this,dt,{main:new ut(n.hashRoutine),style:new ut(n.hashRoutine)});a(this,x,{attachment:new n.PerformanceMeasurement.StopWatch,partial:new n.PerformanceMeasurement.StopWatch,full:new n.PerformanceMeasurement.StopWatch,dettachment:new n.PerformanceMeasurement.StopWatch});a(this,bt,()=>e(n,I).EVENT_NAMES.forEach(t=>e(this,yt)[t]=typeof this[t]=="function"));h(this,"info",{instanceNumber:++e(n,I).instancesCount,unmodifiedRounds:0,updatedRounds:0});u(this,G,t!==e(n,I).RootMode.REGULAR?this.attachShadow({mode:t}):this),e(this,bt).call(this),c(this,N,C).call(this,"on_create"),e(this,p).attributeKeys&&this.getAttributeNames().forEach(r=>this[r]=this.getAttribute(r)),c(this,ye,es).call(this)&&e(this,v).generation>1?c(this,N,C).call(this,"on_reconstruct",e(this,v)):c(this,N,C).call(this,"on_construct")}static get EVENT_NAMES(){return["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"]}get render(){return e(this,H)?c(this,we,Ze):c(this,kt,De)}get redraw(){return e(this,H)?c(this,Ee,_e):c(this,kt,De)}connectedCallback(){n.MEASURE&&e(this,x).attachment.start(),e(this,bt).call(this),c(this,N,C).call(this,"on_connect"),c(this,Ht,xe).call(this,"on_load"),e(this,z)&&this.persistToElementsStore(),n.MEASURE&&e(this,x).attachment.stop()}disconnectedCallback(){n.MEASURE&&e(this,x).dettachment.start(),c(this,tt,pt).call(this,!1),c(this,N,C).call(this,"on_disconnect"),n.MEASURE&&e(this,x).dettachment.stop()}getElementsStore(){return e(this,_)}setElementsStore(t){u(this,_,t)}hasElementsStoreKey(t){return e(this,z)}getElementsStoreKey(t){return e(this,V)}setElementsStoreKey(t){return u(this,z,n.isNonEmptyString(u(this,V,t))),this}persistToElementsStore(){if(c(this,Jt,$e).call(this)){let t=e(this,v);if(t)return e(this,j).snapshot(),t.data=new window.Object({options:e(this,p),html:e(this,U),children:e(this,b).persist(),rules:e(this,R).persist(),fields:e(this,j).persist(),slotted:e(this,B),identified:e(this,K)}),c(this,At,se).call(this),!0}return!1}restoreFromElementsStore(t){if(c(this,Jt,$e).call(this)){let r=e(this,v);if(r&&r.persisted&&r.data)return u(this,p,r.data.options),u(this,B,r.data.slotted),u(this,K,r.data.identified),u(this,U,r.data.html),e(this,b).restore(r.data.children),e(this,b).owner=this,e(this,R).restore(r.data.rules),e(this,R).owner=this,e(this,j).restore(r.data.fields),e(this,j).owner=this,e(this,j).recall(),t||(delete r.data,c(this,At,se).call(this)),!0}return!1}selectChildElement(t){return e(this,G).querySelector(t)}setMainAttribute(t,r){e(this,lt)&&e(this,Z).element.setAttribute(t,r)}setMainElement(t){let r=e(n,w).newChild(t);if(e(n,w).performValidations(r)){if(r.content!==""||!!r.events.length)return e(n,A).INVALID_DEFINITION.emit(t);u(this,K,!!r.id.length)&&(e(this,p).mainDefinition.id=r.id),r.tag.length&&(e(this,p).mainDefinition.tag=r.tag),r.classes.length&&(e(this,p).mainDefinition.classes=r.classes),r.style&&(e(this,p).mainDefinition.style=r.style),r.attributes&&(e(this,p).mainDefinition.attributes=r.attributes)}return this}setStyleOptions(t,r){return e(this,p).styleMedia=t||"",e(this,p).styleType=r||"",this}setElementsAsKeys(t){return e(this,p).elementKeys=!!t,this}setAttributesAsKeys(t){return e(this,p).attributeKeys=!!t,this}allowRawContent(t){return e(this,p).rawContent=!!t,this}setRawContent(t){return e(this,p).rawContent?u(this,U,t):e(n,A).ALLOW_HTML.emit(),this}appendRawContent(t){return e(this,p).rawContent?u(this,U,e(this,U)+t):e(n,A).ALLOW_HTML.emit(),this}prependRawContent(t){return e(this,p).rawContent?u(this,U,t+e(this,U)):e(n,A).ALLOW_HTML.emit(),this}appendCSSRule(t,r,o){if(o)return this.appendCSSNestedRule(t,r,o);let l=e(this,R).slice(-1),d=e(n,w).newRule(t,r);return(!l.length||!e(n,w).tryToJoinRules(l[0],d))&&e(this,R).append(d),this}prependCSSRule(t,r,o){if(o)return this.prependCSSNestedRule(t,r,o);let l=e(this,R).slice(0,1),d=e(n,w).newRule(t,r);return(!l.length||!e(n,w).tryToJoinRules(l[0],d))&&e(this,R).prepend(d),this}appendCSSNestedRule(t,r,o){let l=e(this,R).slice(-1),d=e(n,w).newNestedRule(t,r,o);return(!l.length||!e(n,w).tryToJoinNestedRules(l[0],d))&&e(this,R).append(d),this}prependCSSNestedRule(t,r,o){let l=e(this,R).slice(0,1),d=e(n,w).newNestedRule(t,r,o);return(!l.length||!e(n,w).tryToJoinNestedRules(l[0],d))&&e(this,R).prepend(d),this}appendChildElement(t,r){return e(this,b).append(e(n,w).performValidations(e(n,w).newChild(t,r))),this}prependChildElement(t,r){return e(this,b).prepend(e(n,w).performValidations(e(n,w).newChild(t,r))),this}replaceChildElement(t,r){return e(this,b).replace(e(this,b).findIndex(o=>o.id===t),e(n,w).newChild(r)),this}appendChildElements(t){return(n.isOf(t,window.Array)?t:n.forcedStringSplit(t,`
`)).forEach(r=>typeof r=="string"&&!!r.trim().length&&this.appendChildElement(r)),this}prependChildElements(t){return(n.isOf(t,window.Array)?t:n.forcedStringSplit(t,`
`)).forEach(r=>typeof r=="string"&&!!r.trim().length&&this.prependChildElement(r)),this}checkChildElementIsIncludedById(t,r,o){let l=d=>n.isOf(d,window.Function)?d():void 0;return e(this,b).some(d=>d.id===t&&d.rendering)?l(r):l(o),this}includeChildElementById(t){return e(this,b).forEach(r=>r.id===t&&e(n,O).renderingIncluder(r)),this}excludeChildElementById(t){return e(this,b).forEach(r=>r.id===t&&e(n,O).renderingExcluder(r)),this}invalidateChildElementsById(t){return e(this,b).forEach(r=>t.indexOf(r.id)>-1&&e(n,O).cacheInvalidator(r)),this}invalidateChildElements(t){return n.isOf(t,window.Array)&&t.forEach(e(n,O).cacheInvalidator),this}makeField(t,r){return this[t]=r,e(this,j).append({name:t,value:r}),this}makeReactiveField(t,r,o,l=!0){return c(this,ge,ts).call(this,t,r,o,l)}makeExternalReactiveField(t,r,o,l,d=!0){return this.makeReactiveField(r,t[r]||o,y=>{t[r]=this[r],l(y)},d)}},U=new WeakMap,R=new WeakMap,b=new WeakMap,j=new WeakMap,p=new WeakMap,yt=new WeakMap,K=new WeakMap,B=new WeakMap,Z=new WeakMap,$=new WeakMap,G=new WeakMap,jt=new WeakMap,lt=new WeakMap,H=new WeakMap,_=new WeakMap,v=new WeakMap,V=new WeakMap,z=new WeakMap,f=new WeakMap,St=new WeakMap,$t=new WeakMap,dt=new WeakMap,x=new WeakMap,kt=new WeakSet,De=function(){},J=new WeakSet,ot=function(t){e(this,K)&&n.debug(`#${e(this,p).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},ue=new WeakSet,Ye=function(){e(this,$)&&e(this,$).affiliate(),e(this,Z).affiliate(),u(this,lt,!0)},fe=new WeakSet,Xe=function(){u(this,$,e(this,R).length?new ft(e(this,G),e(n,w).makeStyleNode(e(this,p).styleMedia,e(this,p).styleType)):null),u(this,Z,new ft(e(this,G),e(n,w).makeMainNode(e(this,p).mainDefinition))),e(this,b).forEach(e(n,O).cacheInvalidator),e(this,R).forEach(e(n,O).cacheInvalidator)},me=new WeakSet,qe=function(){e(this,lt)&&(e(this,Z).disaffiliate(),e(this,$)&&e(this,$).disaffiliate(),e(this,B)&&e(this,jt)&&n.WebHelpers.removeChildren(this)),u(this,lt,!1)},pe=new WeakSet,Qe=function(t){return{key:e(this,p).elementKeys&&t.key(),event:(r,o,l)=>{let d=this[`on_${r}_${o}`];if(d){let y=c(this,Kt,Le).call(this,r);y&&y[t.event](o,d,l)}},slots:()=>this.on_slot_change&&e(this,G).querySelectorAll("slot").forEach(r=>r[t.event]("slotchange",this.on_slot_change))}},tt=new WeakSet,pt=function(t){if(e(this,H)&&!t||!e(this,H)&&t){let r=c(this,pe,Qe).call(this,t?e(this,$t).bind:e(this,$t).unbind);e(this,b).forEach(o=>{!o.rendering&&t||(r.key&&r.key(o),o.events.forEach(l=>l&&r.event(o.id,l.kind,l.capture)))}),e(this,B)&&r.slots(),u(this,H,t)}},Kt=new WeakSet,Le=function(t){return n.isNonEmptyString(t)?e(this,G).querySelector(`#${t}`):void 0},Bt=new WeakSet,Pe=function(){e(this,f).root.reset(""),e(this,f).style.reset(""),e(this,f).main.reset(e(this,U));let t=e(this,B)?e(this,f).renderizers.children.mixed:e(this,f).renderizers.children.normal;e(this,b).forEach(r=>r.rendering&&t(r)),e(this,R).forEach(e(this,f).renderizers.rule),e(this,f).main.verify(r=>!e(this,dt).main.compute(r)),e(this,f).style.verify(r=>!e(this,dt).style.compute(r))},Gt=new WeakSet,Ue=function(){e(this,f).root.process(),e(this,f).style.process(),e(this,f).main.process(),n.DEBUG&&c(this,J,ot).call(this,e(this,f).getDebugInfo())},we=new WeakSet,Ze=function(){!n.RENDERING||(n.MEASURE&&e(this,x).partial.start(),c(this,N,C).call(this,"on_prerender"),c(this,Bt,Pe).call(this),e(this,f).gotModified()?(c(this,tt,pt).call(this,!1),c(this,Gt,Ue).call(this),c(this,tt,pt).call(this,!0),this.info.updatedRounds++,c(this,N,C).call(this,"on_update"),c(this,zt,je).call(this,"on_refresh")):this.info.unmodifiedRounds++,n.DEBUG&&c(this,J,ot).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${e(this,dt).main.rounds}, style: ${e(this,dt).style.rounds}) | updated: ${this.info.updatedRounds}`),c(this,N,C).call(this,"on_postrender"),n.MEASURE&&e(this,x).partial.stop())},Ht=new WeakSet,xe=function(t){c(this,fe,Xe).call(this),c(this,ue,Ye).call(this),c(this,N,C).call(this,"on_inject"),c(this,Bt,Pe).call(this),e(this,f).style.verify(r=>!!e(this,$)),c(this,Gt,Ue).call(this),c(this,tt,pt).call(this,!0),c(this,N,C).call(this,t)},Ee=new WeakSet,_e=function(t){n.MEASURE&&e(this,x).full.start(),c(this,tt,pt).call(this,!1),c(this,me,qe).call(this),c(this,N,C).call(this,"on_unload"),e(this,bt).call(this),c(this,Ht,xe).call(this,"on_reload"),c(this,zt,je).call(this,"on_repaint"),n.MEASURE&&e(this,x).full.stop()},Vt=new WeakSet,Fe=function(t,r="$none"){if(e(this,H)){let o=n.ReactiveFields.ReplacementsScanners.rules(e(this,R),t);o.forEach(e(n,O).cacheInvalidator);let l=n.ReactiveFields.ReplacementsScanners.children(e(this,b),t);l.forEach(e(n,O).cacheInvalidator),n.DEBUG&&c(this,J,ot).call(this,`reactive render (label: ${r}, field: ${t}, children: ${l.length}, rules: ${o.length})`),(!!o.length||!!l.length)&&(l.some(d=>!!d.kind.length)&&e(this,b).forEach(d=>d.kind===e(n,S).SLOTS_KIND?e(n,O).cacheInvalidator(d):void 0),this.render())}},ge=new WeakSet,ts=function(t,r,o,l=!0){return n.ReactiveFields.make(this,t,r,o,(d,y)=>c(this,Vt,Fe).call(this,d,y||"$auto")),e(this,j).append({name:t,value:r}),l&&c(this,Vt,Fe).call(this,t,"$init"),this},N=new WeakSet,C=function(t,r){e(this,yt)[t]&&this[t].call(this,r)},zt=new WeakSet,je=function(t,r){e(this,z)&&this.persistToElementsStore(),e(this,yt)[t]&&window.requestAnimationFrame(()=>this[t].call(this,r))},bt=new WeakMap,ye=new WeakSet,es=function(){return e(this,z)?(u(this,v,e(this,_).hasItem(e(this,V))?e(this,_).getItem(e(this,V)):{generation:0,persisted:!1}),e(this,v).generation++,c(this,At,se).call(this),!0):!1},At=new WeakSet,se=function(){n.DEBUG&&(e(this,v).key=e(this,V)),e(this,v).persisted=!!e(this,v).data,e(this,_).setItem(e(this,V),e(this,v))},Jt=new WeakSet,$e=function(){return e(this,z)?!0:(e(n,A).INVALID_KEY.emit(),!1)},h(Q,"RootMode",class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}}),h(Q,"specializeClass",t=>class extends Q{constructor(){super(t)}}),h(Q,"instancesCount",0),Q)),a(E,W,(mt=class{static registerClasses(s){window.Array.prototype.forEach.call(s,c(e(n,W),be,is))}static instantiateClasses(s,i){window.Array.prototype.forEach.call(s,t=>{var r;return window.customElements.get(t.tag)?c(r=e(n,W),Re,rs).call(r,t,i):e(n,A).UNREGISTERED_CLASS.emit(t.name)})}},Se=new WeakSet,ss=function(s){return s.toLowerCase().replaceAll("_","-")},be=new WeakSet,is=function(s){var i;n.isNonEmptyString(s.name)&&s.name.indexOf("_")>0?s.tag=c(i=e(n,W),Se,ss).call(i,s.name):e(n,A).MISNAMED_CLASS.emit(s.name),window.HTMLElement.isPrototypeOf(s)?window.customElements.define(s.tag,s):e(n,A).INVALID_CLASS.emit(s.name)},Ae=new WeakSet,ns=function(s,i){let t=n.isNonEmptyString(i)?window.document.querySelector(i):window.document.body;t&&t.appendChild(window.document.createElement(s.tag))},Re=new WeakSet,rs=function(s,i){let t=()=>{var r;return c(r=e(n,W),Ae,ns).call(r,s,i)};window.document.body?t():n.WebHelpers.onDOMContentLoaded(t)},a(mt,Se),a(mt,be),a(mt,Ae),a(mt,Re),mt)),h(E,"NonShadowElement",e(n,I).specializeClass(e(n,I).RootMode.REGULAR)),h(E,"OpenShadowElement",e(n,I).specializeClass(e(n,I).RootMode.OPEN)),h(E,"ClosedShadowElement",e(n,I).specializeClass(e(n,I).RootMode.CLOSED)),(()=>{let s=(i,t)=>!i&&e(n,A).UNSUPPORTED_FEATURE.emit(t);try{s(n.isOf(window.document,window.HTMLDocument),"HTML Document"),s(n.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),n.WebHelpers.onDOMContentLoaded(()=>s(n.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(i){e(n,A).UNKNOWN_ERROR.emit()}n.PerformanceMeasurement.initialize()})(),window.Wuse=E;})();
