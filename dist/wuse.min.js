(()=>{var $i=Object.defineProperty;var Gi=(r,e,t)=>e in r?$i(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(Gi(r,typeof e!="symbol"?e+"":e,t),t),Ke=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var n=(r,e,t)=>(Ke(r,e,"read from private field"),t?t.call(r):e.get(r)),o=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},h=(r,e,t,i)=>(Ke(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var d=(r,e,t)=>(Ke(r,e,"access private method"),t);var ae,S,Be=class{static get UNKNOWN_ERROR(){return n(this,S).call(this,0,e=>"Unknown error.")}static get UNSUPPORTED_FEATURE(){return n(this,S).call(this,1,e=>`Unsupported feature: ${e}.`)}static get UNREGISTERED_CLASS(){return n(this,S).call(this,2,e=>`Unregistered class: ${e}.`)}static get UNREGISTRABLE_CLASS(){return n(this,S).call(this,3,e=>`Unregistrable class: ${e}.`)}static get INVALID_CLASS(){return n(this,S).call(this,4,e=>`Invalid class: ${e}.`)}static get MISNAMED_CLASS(){return n(this,S).call(this,5,e=>`Misnamed class: ${e}.`)}static get INVALID_DEFINITION(){return n(this,S).call(this,10,e=>`Invalid definition: ${e}.`)}static get INVALID_ID(){return n(this,S).call(this,11,e=>`Invalid id: ${e}.`)}static get INVALID_KEY(){return n(this,S).call(this,12,e=>"Call first: this.setElementsStoreKey(<your-valid-key>).")}static get ALLOW_HTML(){return n(this,S).call(this,13,e=>"Call first: this.allowRawContent(true).")}static get INVALID_STATE(){return n(this,S).call(this,14,e=>"Invalid state.")}static get INEXISTENT_TEMPLATE(){return n(this,S).call(this,20,e=>`Inexistent template: #${e}.`)}static get EXTINCT_TEMPLATE(){return n(this,S).call(this,21,e=>`Extinct template: #${e}.`)}static get INVALID_TEMPLATE(){return n(this,S).call(this,22,e=>`Invalid template: #${e}.`)}static get UNESPECIFIED_SLOT(){return n(this,S).call(this,30,e=>`Unespecified slot: #${e}.`)}static get LOCKED_DEFINITION(){return n(this,S).call(this,40,e=>`Locked definition: #${e}.`)}},y=Be;ae=new WeakMap,S=new WeakMap,o(y,ae,"[WUSE:ERROR]"),o(y,S,(e,t)=>({code:e,emit:i=>{let s=`${n(Be,ae)} ${e} | ${t(i)}`;if(window.Wuse&&window.Wuse.FATALS||e<10)throw new window.Error(s);return window.console.error(s),null}}));var le,de,si=(r,e)=>(typeof e=="function"&&e(r),r),c=class{static get EMPTY_STRING(){return n(this,le)}static get EMPTY_ARRAY(){return n(this,de)}static noop(){}static isNonEmptyString(e){return typeof e=="string"&&!!e.length}static forcedStringSplit(e,t){return typeof e=="string"?e.split(t):new window.Array}static buildArray(e){return si(new window.Array,e)}static buildObject(e){return si(new window.Object,e)}static ensureFunction(e,t=()=>{}){return typeof e=="function"?e:t}static isOf(e,t){return e!=null&&(e.constructor===t||t!=null&&e.constructor.name===t.name)}static hasObjectKeys(e){return!!(e&&!!window.Object.keys(e).length)}static cloneObject(e){return window.Object.assign(new window.Object,e)}static forEachOwnProperty(e,t){e&&window.Object.getOwnPropertyNames(e).forEach(t)}static isAssignedObject(e){return typeof e=="object"&&e!==null}static isAssignedArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"}static isNonEmptyArray(e){return typeof e=="object"&&e!==null&&e.constructor.name==="Array"&&!!e.length}};le=new WeakMap,de=new WeakMap,o(c,le,new window.String().valueOf()),o(c,de,window.Object.freeze(new window.Array));var bt,St,{noop:ri,ensureFunction:oi,isAssignedObject:Ki}=c,nt=class{static fetch(e){let t=window.document.getElementById(e);return t===null?n(this,bt).call(this,e):t.tagName!=="TEMPLATE"?n(this,St).call(this,e):t.innerHTML}static initialize(e){Ki(e)&&(h(this,bt,oi(e.onExtinctTemplate,n(this,bt))),h(this,St,oi(e.onInvalidTemplate,n(this,St))))}};bt=new WeakMap,St=new WeakMap,o(nt,bt,ri),o(nt,St,ri);var Tt,At,Ot,vt,Nt,ce,di,he,ci,ue,hi,fe,ui,{noop:Kt,ensureFunction:dt,isAssignedObject:ai,isAssignedArray:On,isNonEmptyArray:li}=c,Bi=r=>r.toLowerCase().replaceAll("_","-"),A=class{static registerClasses(e){li(e)&&window.Array.prototype.forEach.call(e,t=>typeof t=="function"?d(this,he,ci).call(this,t):n(this,Ot).call(this,t))}static instantiateClasses(e,t,i){li(e)&&window.Array.prototype.forEach.call(e,s=>window.customElements.get(s.tag)?d(this,fe,ui).call(this,s,t,ai(i)?i:new window.Object):n(this,Nt).call(this,s.name))}static initialize(e){ai(e)&&(h(this,Tt,dt(e.onDeferredInstantiation,n(this,Tt))),h(this,Ot,dt(e.onInvalidClass,n(this,Ot))),h(this,At,dt(e.onMisnamedClass,n(this,At))),h(this,vt,dt(e.onUnregistrableClass,n(this,vt))),h(this,Nt,dt(e.onUnregisteredClass,n(this,Nt))))}};Tt=new WeakMap,At=new WeakMap,Ot=new WeakMap,vt=new WeakMap,Nt=new WeakMap,ce=new WeakSet,di=function(e){window.HTMLElement.isPrototypeOf(e)?window.customElements.define(e.tag,e):n(this,vt).call(this,e.name)},he=new WeakSet,ci=function(e){e.name.indexOf("_")>0?(e.tag=Bi(e.name),d(this,ce,di).call(this,e)):n(this,At).call(this,e.name)},ue=new WeakSet,hi=function(e,t,i){let s=null;try{s=window.document.querySelector(t)}catch(u){if(dt(i.onBadTarget)(t)===!1)return}finally{s=s||window.document.body}let l=window.document.createElement(e.tag);dt(i.onElementInstantiated)(l,t),s.appendChild(l)},fe=new WeakSet,ui=function(e,t,i){let s=()=>d(this,ue,hi).call(this,e,t,i);window.document.body?s():n(this,Tt).call(this,s)},o(A,ce),o(A,he),o(A,ue),o(A,fe),o(A,Tt,Kt),o(A,At,Kt),o(A,Ot,Kt),o(A,vt,Kt),o(A,Nt,Kt);var O=class{static get TEMPLATES_KIND(){return"%templates%"}static get SLOTS_KIND(){return"%slots%"}static get TEXTNODE_TAG(){return"^text^"}static get DEFAULT_KIND(){return""}static get DEFAULT_TAG(){return"div"}static get DEFAULT_STYLE_MEDIA(){return"screen"}static get DEFAULT_STYLE_TYPE(){return"text/css"}static get DEFAULT_REPLACEMENT_OPEN(){return"~{"}static get DEFAULT_REPLACEMENT_CLOSE(){return"}~"}};var Bt,we,ct,Ht,Pt,{EMPTY_ARRAY:Hi,buildArray:He,buildObject:Pi,isNonEmptyString:zi,isOf:Yi}=c,_t=class{static initialize(e,t){this.begin=e,this.end=t}},z=_t;a(z,"begin",null),a(z,"end",null),a(z,"enclose",e=>_t.begin+e+_t.end),a(z,"makeRegExp",()=>new window.RegExp("(?<="+_t.begin+").*?(?="+_t.end+")","gs"));var Ji=["contents","classes","styles","attributes"],Dt=class{};a(Dt,"rules",(e,t)=>He(i=>e.forEach(s=>s.replacements.forEach(l=>l.field===t&&i.push(s))))),a(Dt,"children",(e,t)=>He(i=>{let s=l=>{let u=f=>f.forEach(T=>T.field===t&&i.push(l));Ji.forEach(f=>u(l.replacements[f])),l.rules.forEach(f=>f.replacements.forEach(T=>T.field===t&&i.push(l)))};e.forEach(l=>l.included&&s(l))}));var v=class{static initialize(e){h(this,Bt,e)}},U=v;Bt=new WeakMap,we=new WeakMap,ct=new WeakMap,Ht=new WeakMap,Pt=new WeakMap,o(U,Bt,null),o(U,we,(e,t,i)=>e.push({at:t,field:i.trim(),find:z.enclose(i)})),o(U,ct,(e,t,i)=>zi(i)&&(i.match(n(v,Bt))||Hi).forEach(s=>{var l;return n(l=v,we).call(l,e,t,s)})),o(U,Ht,(e,t,i)=>{var s;e[t]=new window.Array,n(s=v,ct).call(s,e[t],t,i)}),o(U,Pt,(e,t,i)=>{e[t]=new window.Array,window.Object.keys(i).forEach(s=>{var l,u;n(l=v,ct).call(l,e[t],t,s),n(u=v,ct).call(u,e[t],t,i[s])})}),a(U,"child",e=>Pi(t=>{var i,s,l,u;n(i=v,Ht).call(i,t,"contents",e.content),n(s=v,Ht).call(s,t,"classes",e.classes.join(" ")),n(l=v,Pt).call(l,t,"styles",e.style),n(u=v,Pt).call(u,t,"attributes",e.attributes),e.rules.forEach(f=>f.replacements=v.rule(f))})),a(U,"rule",e=>He(t=>{var s;if(Yi(e.nested,window.Array))return e.nested.map(l=>v.rule(l));var i="";for(let l in e.properties)i+=`${l}:${e.properties[l]};`;n(s=v,ct).call(s,t,"rules",i)}));var L=class{static initialize(e,t){z.initialize(e,t),U.initialize(z.makeRegExp())}};a(L,"extractReplacementsFromRule",U.rule),a(L,"extractReplacementsFromChild",U.child),a(L,"scanRulesForReplacements",Dt.rules),a(L,"scanChildrenForReplacements",Dt.children);var ht=class{static onDOMContentLoaded(e){if(e&&e.constructor===window.Function){let t=()=>{e(),setTimeout(()=>window.removeEventListener("DOMContentLoaded",t),100)};window.addEventListener("DOMContentLoaded",t)}}static getUniqueId(e="WUSE"){let t="_"+(e||"")+"_";for(var i;window.document.getElementById(i=t+(""+window.Math.random()).substring(2))!==null;);return i}static removeChildren(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static htmlEncode(e=""){return typeof e!="string"?null:e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static getCSSVendorPrefix(){let e=window.getComputedStyle(window.document.body,""),i=window.Array.prototype.slice.call(e).filter(s=>s.charAt(0)==="-");return i.length?"-"+i[0].split("-")[1]+"-":""}};var Ct,{noop:Vi,isOf:Xi,hasObjectKeys:fi,isNonEmptyString:wi,isNonEmptyArray:qi,isAssignedObject:Qi,ensureFunction:Zi}=c,{htmlEncode:pi}=ht,{TEMPLATES_KIND:tn,TEXTNODE_TAG:en}=O,pe=class{static initialize(e){Qi(e)&&h(this,Ct,Zi(e.onFetchTemplate,n(this,Ct)))}},g=pe;Ct=new WeakMap,o(g,Ct,Vi),a(g,"cacheInvalidator",e=>e.cache=null),a(g,"renderingIncluder",e=>e.included=!0),a(g,"renderingExcluder",e=>e.included=!1),a(g,"renderRule",(e,t)=>{if(Xi(t.nested,window.Array))return`${t.selector}{${t.nested.map(s=>pe.renderRule(e,s)).join(`
`)}}`;if(wi(t.selector)&&!t.nested){var i=new window.String;for(let s in t.properties)i+=`${s}:${t.properties[s]};`;return qi(t.replacements)&&t.replacements.forEach(s=>i=e(i,s)),`${t.selector}{${i}}`}return null}),a(g,"renderChild",(e,t)=>{var l;if(t.kind===tn)return n(l=pe,Ct).call(l,t.id);if(t.tag===en){var i=t.content;return t.replacements.contents.forEach(u=>i=e(i,u)),t.encode?pi(i):i}var s=wi(t.id)?`<${t.tag} id='${t.id}'`:`<${t.tag}`;if(t.classes.length){var i=t.classes.join(" ");t.replacements.classes.forEach(f=>i=e(i,f)),s+=` class='${i}'`}if(fi(t.style)){var i=" style='";for(let f in t.style)i+=f+": "+t.style[f]+"; ";i+="'",t.replacements.styles.forEach(f=>i=e(i,f)),s+=i}if(fi(t.attributes)){var i=new window.String;for(let f in t.attributes)i+=` ${f}=${t.attributes[f]}`;t.replacements.attributes.forEach(f=>i=e(i,f)),s+=i}if(typeof t.content=="string"){var i=t.content;t.replacements.contents.forEach(f=>i=e(i,f)),s+=`>${t.encode?pi(i):i}</${t.tag}>`}else s+="/>";return s});var zt,Yt,Jt,Vt,Lt=class{constructor(e){a(this,"rounds",0);o(this,zt,0);o(this,Yt,null);o(this,Jt,!1);o(this,Vt,null);h(this,Vt,typeof e=="function"?e:()=>{})}compute(e){return this.rounds+=+h(this,Jt,n(this,zt)==h(this,Yt,n(this,Vt).call(this,e))),h(this,zt,n(this,Yt)),n(this,Jt)}};zt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,Vt=new WeakMap;var ut,B,st,me,mi,Rt=class{constructor(e,t){o(this,me);o(this,ut,null);o(this,B,null);o(this,st,null);if(e instanceof Node&&t instanceof Node)h(this,ut,e),h(this,B,t),h(this,st,t.cloneNode(!1));else throw new Error("[WUSE:ERROR] Wrong arguments supplied.")}get element(){return n(this,B)}affiliate(){n(this,ut).appendChild(n(this,B))}disaffiliate(){n(this,ut).removeChild(n(this,B))}promote(e){n(this,st).innerHTML=e,n(this,ut).replaceChild(n(this,st),n(this,B)),d(this,me,mi).call(this)}};ut=new WeakMap,B=new WeakMap,st=new WeakMap,me=new WeakSet,mi=function(){let e=n(this,st);h(this,st,n(this,B).cloneNode(!1)),h(this,B,e)};var ft,wt,pt=class{constructor(e){a(this,"owner",null);o(this,ft,!1);o(this,wt,"");this.owner=e}get invalidated(){return n(this,ft)}reset(e){h(this,ft,!1),h(this,wt,e)}append(e){h(this,wt,n(this,wt)+e)}verify(e){h(this,ft,e(n(this,wt)))}process(e){(e||n(this,ft))&&this.on_content_invalidation(n(this,wt))}on_content_invalidation(e){}};ft=new WeakMap,wt=new WeakMap;var Mt,Ee,{isOf:Pe,cloneObject:Ei,forEachOwnProperty:gi,buildArray:nn}=c,mt=class extends window.Array{constructor(t){super();o(this,Mt);a(this,"owner",null);a(this,"last",null);a(this,"version",0);a(this,"locked",!1);this.owner=t}append(t){this.locked?this.on_forbidden_change():Pe(t,window.Object)&&(this.push(t),d(this,Mt,Ee).call(this,t))}prepend(t){this.locked?this.on_forbidden_change():Pe(t,window.Object)&&(this.unshift(t),d(this,Mt,Ee).call(this,t))}replace(t,i){this.locked?this.on_forbidden_change():t>-1&&Pe(i,window.Object)&&d(this,Mt,Ee).call(this,this[t]=i)}persist(){return nn(t=>gi(this,i=>{switch(i){case"owner":case"last":case"length":break;case"version":case"locked":t[i]=this[i];break;default:if(window.Number.isInteger(window.Number(i))){let s=Ei(this[i]);s.cache&&(s.cache=null),t.push(s)}break}}))}restore(t){gi(t,i=>{switch(i){case"length":break;case"version":case"locked":this[i]=t[i];break;default:if(window.Number.isInteger(window.Number(i))){let s=Ei(t[i]);s.cache&&(s.cache=null),this.push(s)}break}})}on_version_change(){}on_forbidden_change(){}};Mt=new WeakSet,Ee=function(t){this.last=t,this.version++,this.on_version_change()};var Ie,Si,be,Ti,Se,Ai,Te,Oi,Ae,vi,Ut,ye,Oe,Ni,{EMPTY_STRING:W,EMPTY_ARRAY:sn,noop:ge,buildArray:Gn,buildObject:rn,isOf:N,hasObjectKeys:yi,isNonEmptyString:Y,forcedStringSplit:on}=c,{DEFAULT_TAG:an,DEFAULT_KIND:ln,TEMPLATES_KIND:ze,SLOTS_KIND:Ye}=O,rt={onInvalidDefinition:ge,onInexistentTemplate:ge,onUnespecifiedSlot:ge,onInvalidId:ge},J=class{static parse(e){if(Y(e)){let t=e.trimLeft(),i=Ii();return t.charAt(0)==="%"?t.startsWith(ze)?d(this,Ut,ye).call(this,i,t.replace(i.kind=ze,W)):t.startsWith(Ye)?d(this,Ut,ye).call(this,i,t.replace(i.kind=Ye,W)):null:d(this,Ut,ye).call(this,i,t)}return null}};Ie=new WeakSet,Si=function(e,t){let i=t.indexOf("["),s=t.indexOf("]");if(i>-1&&s>-1&&s>i){let l=t.substr(i,s-i+1),u=l.substr(1,l.length-2).split("|");for(let f in u){let T=u[f].split("=");T[0]==="style"?T[1].split(";").forEach(K=>{let ii=K.split(":"),ni=ii[0].trim();ni.length&&(e.style[ni]=ii[1].trim())}):e.attributes[T[0]]=T[1]}return t.replace(l,W)}return t},be=new WeakSet,Ti=function(e,t){let i=t.indexOf("=");return i>-1?(e.content=t.slice(i+1),!!e.content.length&&e.content.charAt(0)==="&"&&(e.content=e.content.slice(1),e.encode=!!e.content.length&&e.content.charAt(0)!=="&"),t.slice(0,i)):t},Se=new WeakSet,Ai=function(e,t){let i=t.replaceAll("!"," ").split(" ");return i.slice(1).map(s=>{let[l,...u]=s.toLowerCase().split("+"),f=(u||sn).indexOf("capture")>-1;e.events.push(bi(l,f))}),i[0]},Te=new WeakSet,Oi=function(e,t){let i=t.replaceAll("."," ").split(" ");return e.classes=i.slice(1),i[0]},Ae=new WeakSet,vi=function(e,t){if(Y(t)){let i=t.indexOf("#");i===-1?e.tag=t:(i>0&&(e.tag=t.substr(0,i)),e.id=t.substr(i+1))}return e},Ut=new WeakSet,ye=function(e,t){return d(this,Ae,vi).call(this,e,d(this,Te,Oi).call(this,e,d(this,Se,Ai).call(this,e,d(this,be,Ti).call(this,e,d(this,Ie,Si).call(this,e,t)))))},o(J,Ie),o(J,be),o(J,Se),o(J,Te),o(J,Ae),o(J,Ut);var Xt=class{static parse(e){return rn(t=>(N(e,window.Array)?e:on(e,`
`).map(i=>i.trim()).join(W).split(";")).forEach(i=>Y(i)&&d(this,Oe,Ni).call(this,t,i.trim())))}};Oe=new WeakSet,Ni=function(e,t){if(!!t.length&&t.indexOf(":")>-1){let[i,...s]=t.split(":"),l=i.trim();if(l.length){let u=s.join(":").trim();e[l]=u.endsWith(";")?u.slice(0,-1):u}}},o(Xt,Oe);var Ii=()=>({kind:ln,tag:an,id:W,classes:new window.Array,attributes:new window.Object,style:new window.Object,events:new window.Array,content:W,encode:!1}),dn=()=>({generation:0,persisted:!1}),bi=(r,e)=>typeof r=="string"&&typeof e=="boolean"?{kind:r,capture:e}:null,cn=(r,e)=>{let t=J.parse(r);return t?(t.rules=N(e,window.Array)?e:new window.Array,t.included=!0,t.cache=null,t):rt.onInvalidDefinition(r)},hn=r=>{if(r!==null){if(r.kind===ze){if(!window.document.getElementById(r.id))return rt.onInexistentTemplate(r.id)}else if(r.kind===Ye){if(new window.String(r.attributes.slot).replaceAll('"',W).replaceAll("'",W).length===0)return rt.onUnespecifiedSlot(r.id)}else if(typeof r.id!="string"||Y(r.id)&&window.document.getElementById(r.id)!==null)return rt.onInvalidId(r.id)}return r},un=r=>{if(!N(r,window.Object))return null;let e=window.document.createElement(r.tag);if(r.id.length&&e.setAttribute("id",r.id),r.classes.length&&e.setAttribute("class",r.classes.join(" ")),yi(r.style)){var t=new window.String;for(let i in r.style)t+=i+": "+r.style[i]+"; ";if(t.length){let i=t.trim();e.setAttribute("style",i.endsWith(";")?i.slice(0,-1):i)}}if(yi(r.attributes))for(let i in r.attributes)e.setAttribute(i,r.attributes[i]);return e},fn=(r,e)=>{let t=window.document.createElement("style");return Y(r)&&t.setAttribute("media",r),Y(e)&&t.setAttribute("type",e),t.appendChild(window.document.createTextNode(W)),t},wn=(r,e)=>{let t=N(r,window.Array)?r.join(","):Y(r)?r:W;return t.length?{selector:t,properties:N(e,window.Object)?e:Xt.parse(e),cache:null}:null},pn=(r,e,t)=>{let i=N(r,window.Array)?r.join(","):Y(r)?r:W,s=N(e,window.Array)?e.join(","):Y(e)?e:W;return!i.length||!s.length?null:{selector:i,nested:[{selector:s,properties:N(t,window.Object)?t:Xt.parse(t)}],cache:null}},mn=(r,e)=>{if(r.selector===e.selector){for(let t in e.properties)r.properties[t]=e.properties[t];return r.cache=null,!0}return!1},En=(r,e)=>N(r.nested,window.Array)&&r.selector===e.selector?(e.nested.forEach(t=>{var i=!1;for(let s in r.nested)if(i=r.nested[s].selector===t.selector){for(let l in t.properties)r.nested[s].properties[l]=t.properties[l];break}i||r.nested.push(t)}),r.cache=null,!0):!1,w=class{static initialize(e){N(e,window.Object)&&(N(e.onInvalidDefinition,window.Function)&&(rt.onInvalidDefinition=e.onInvalidDefinition),N(e.onInexistentTemplate,window.Function)&&(rt.onInexistentTemplate=e.onInexistentTemplate),N(e.onUnespecifiedSlot,window.Function)&&(rt.onUnespecifiedSlot=e.onUnespecifiedSlot),N(e.onInvalidId,window.Function)&&(rt.onInvalidId=e.onInvalidId))}};a(w,"makeStyleNode",fn),a(w,"newRule",wn),a(w,"newNestedRule",pn),a(w,"tryToJoinRules",mn),a(w,"tryToJoinNestedRules",En),a(w,"performValidations",hn),a(w,"makeMainNode",un),a(w,"newChild",cn),a(w,"newDefinition",Ii),a(w,"newEvent",bi),a(w,"newState",dn);var R=class{static get REGULAR(){return"regular"}static get OPEN(){return"open"}static get CLOSED(){return"closed"}};a(R,"specializeClass",(e,t)=>class extends e{constructor(){super(t)}});var x,b,I,k,p,Ft,V,X,ot,P,q,qt,Et,Q,gt,at,_,Z,tt,m,kt,Qt,yt,$,j,H,De,_i,_e,Ci,Ce,Li,Le,Ri,lt,Wt,Zt,Je,te,Ve,ee,Xe,Re,Mi,ie,qe,Me,Ui,ne,Qe,C,F,se,Ze,jt,Ue,Wi,xt,ve,We,Fi,$t,Ne;function Di(r,e,t,i,s){let l=(T,K)=>window.Object.defineProperty(r,e,{get:T,set:K,enumerable:!0,configurable:!0}),u=()=>delete r[e],f=(T,K)=>Di(r,e,T,K,s);l(()=>t,T=>{f(T,i),c.isOf(i,window.Function)?i({renderize:K=>s(e,K),automate:()=>f(T,null),freeze:()=>l(()=>T,K=>{}),defreeze:()=>f(T,i),dereact:()=>l(()=>T,K=>{u(),r[e]=K}),remove:()=>u()}):s(e)})}var gn=["on_create","on_construct","on_reconstruct","on_connect","on_inject","on_load","on_prerender","on_update","on_postrender","on_refresh","on_unload","on_reload","on_repaint","on_disconnect"],D={onInvalidState:c.noop,onInvalidKey:c.noop,onInvalidDefinition:c.noop,onLockedDefinition:c.noop,onAllowHTML:c.noop},ti=class extends window.HTMLElement{constructor(t){super();o(this,j);o(this,De);o(this,_e);o(this,Ce);o(this,Le);o(this,lt);o(this,Zt);o(this,te);o(this,ee);o(this,Re);o(this,ie);o(this,Me);o(this,ne);o(this,C);o(this,se);o(this,Ue);o(this,xt);o(this,We);o(this,$t);o(this,x,new window.String);o(this,b,new class extends mt{on_version_change(){var t;this.last.version=this.version,this.last.replacements=L.extractReplacementsFromRule(this.last),window.Wuse.DEBUG&&d(t=this.owner,j,H).call(t,`rules list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,j,H).call(t,"rules list is locked and can not be changed"),D.onLockedDefinition(n(this,p).mainDefinition.id)}}(this));o(this,I,new class extends mt{on_version_change(){var t,i;this.last.version=this.version,this.last.replacements=L.extractReplacementsFromChild(this.last),h(t=this.owner,X,n(t,X)|this.last.kind===O.SLOTS_KIND),window.Wuse.DEBUG&&d(i=this.owner,j,H).call(i,`children list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,j,H).call(t,"children list is locked and can not be changed"),D.onLockedDefinition(n(this,p).mainDefinition.id)}}(this));o(this,k,new class extends mt{on_version_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,j,H).call(t,`fields list version change: ${this.version}`)}on_forbidden_change(){var t;window.Wuse.DEBUG&&d(t=this.owner,j,H).call(t,"fields list is locked and can not be changed"),D.onLockedDefinition(n(this,p).mainDefinition.id)}snapshot(){this.forEach(t=>t.value=this.owner[t.name])}recall(){this.forEach(t=>this.owner[t.name]=t.value)}}(this));o(this,p,{mainDefinition:w.newDefinition(),styleMedia:O.DEFAULT_STYLE_MEDIA,styleType:O.DEFAULT_STYLE_TYPE,rawContent:!1,attributeKeys:!1,elementKeys:!0});o(this,Ft,new window.Object);o(this,V,!1);o(this,X,!1);o(this,ot,void 0);o(this,P,void 0);o(this,q,null);o(this,qt,window.Wuse.isShadowElement(this));o(this,Et,!1);o(this,Q,!1);o(this,gt,!0);o(this,at,window.Wuse.elementsStorage);o(this,_,null);o(this,Z,new window.String);o(this,tt,!1);o(this,m,{root:new class extends pt{on_content_invalidation(t){this.owner.innerHTML=t}}(this),style:new class extends pt{on_content_invalidation(t){n(this.owner,P).promote(t)}}(this),main:new class extends pt{on_content_invalidation(t){n(this.owner,ot).promote(t)}}(this),renderizers:{rule:t=>n(this,m).style.append(t.cache?t.cache:t.cache=g.renderRule(n(this,kt),t)),children:{mixed:t=>n(this,qt)&&t.kind===O.SLOTS_KIND?n(this,m).renderizers.children.slot(t):n(this,m).renderizers.children.normal(t),slot:t=>{t.cache||(n(this,m).root.verify(i=>!0),n(this,m).root.append(t.cache=g.renderChild(n(this,kt),t)))},normal:t=>{n(this,m).main.append(t.cache?t.cache:t.cache=g.renderChild(n(this,kt),t)),t.rules.forEach(n(this,m).renderizers.rule)}}},gotModified:()=>n(this,m).root.invalidated||n(this,m).main.invalidated||n(this,m).style.invalidated,getDebugInfo:()=>`updated (root: ${n(this,m).root.invalidated}, main: ${n(this,m).main.invalidated}, style: ${n(this,m).style.invalidated})`});o(this,kt,(t,i)=>t.replace(i.find,this[i.field]!==void 0?this[i.field]:c.EMPTY_STRING));o(this,Qt,{bind:{key:()=>{let t=i=>{c.isNonEmptyString(i)&&(this[i]=d(this,Zt,Je).call(this,i))};return n(this,V)&&t(n(this,p).mainDefinition.id),i=>t(i.id)},event:"addEventListener"},unbind:{key:()=>{let t=i=>delete this[i];return n(this,V)&&t(n(this,p).mainDefinition.id),i=>t(i.id)},event:"removeEventListener"}});o(this,yt,{main:new Lt(window.Wuse.hashRoutine),style:new Lt(window.Wuse.hashRoutine)});o(this,$,{attachment:new window.Wuse.PerformanceMeasurement.StopWatch,partial:new window.Wuse.PerformanceMeasurement.StopWatch,full:new window.Wuse.PerformanceMeasurement.StopWatch,dettachment:new window.Wuse.PerformanceMeasurement.StopWatch});o(this,jt,()=>gn.forEach(t=>n(this,Ft)[t]=typeof this[t]=="function"));a(this,"info",{instanceNumber:++ti.instancesCount,unmodifiedRounds:0,updatedRounds:0});h(this,q,t!==R.REGULAR?this.attachShadow({mode:t}):this),n(this,jt).call(this),d(this,C,F).call(this,"on_create"),n(this,p).attributeKeys&&this.getAttributeNames().forEach(i=>this[i]=this.getAttribute(i)),d(this,Ue,Wi).call(this)&&n(this,_).generation>1?d(this,C,F).call(this,"on_reconstruct",n(this,_)):d(this,C,F).call(this,"on_construct")}get render(){return n(this,Q)?d(this,Re,Mi):c.noop}get redraw(){return n(this,Q)?d(this,Me,Ui):c.noop}connectedCallback(){window.Wuse.MEASURE&&n(this,$).attachment.start(),n(this,jt).call(this),d(this,C,F).call(this,"on_connect"),d(this,ie,qe).call(this,"on_load"),n(this,tt)&&this.persistToElementsStore(),window.Wuse.MEASURE&&n(this,$).attachment.stop(window.Wuse.DEBUG)}disconnectedCallback(){window.Wuse.MEASURE&&n(this,$).dettachment.start(),d(this,lt,Wt).call(this,!1),d(this,C,F).call(this,"on_disconnect"),window.Wuse.MEASURE&&n(this,$).dettachment.stop(window.Wuse.DEBUG)}getElementsStore(){return n(this,at)}setElementsStore(t){return h(this,at,t),this}hasElementsStoreKey(t){return n(this,tt)}getElementsStoreKey(t){return n(this,Z)}setElementsStoreKey(t){return h(this,tt,c.isNonEmptyString(h(this,Z,t))),this}persistToElementsStore(){if(d(this,$t,Ne).call(this)){let t=n(this,_);if(c.isOf(t,window.Object))return n(this,k).snapshot(),t.data=new window.Object({options:n(this,p),html:n(this,x),children:n(this,I).persist(),rules:n(this,b).persist(),fields:n(this,k).persist(),slotted:n(this,X),identified:n(this,V)}),d(this,xt,ve).call(this),!0}return!1}restoreFromElementsStore(){if(d(this,$t,Ne).call(this)){let t=n(this,_);if(c.isOf(t,window.Object)&&t.persisted&&t.data)return h(this,p,t.data.options),h(this,X,t.data.slotted),h(this,V,t.data.identified),h(this,x,t.data.html),n(this,I).restore(t.data.children),n(this,I).owner=this,n(this,b).restore(t.data.rules),n(this,b).owner=this,n(this,k).restore(t.data.fields),n(this,k).owner=this,n(this,k).recall(),!0}return!1}removeFromElementsStore(){return d(this,$t,Ne).call(this)&&d(this,We,Fi).call(this)}selectChildElement(t){return n(this,q).querySelector(t)}setMainAttribute(t,i){n(this,Et)&&n(this,ot).element.setAttribute(t,i)}setMainElement(t){let i=w.performValidations(w.newChild(t));if(i!==null){if(c.isNonEmptyString(i.content)||c.isNonEmptyArray(i.events))return D.onInvalidDefinition(t);h(this,V,c.isNonEmptyString(i.id))&&(n(this,p).mainDefinition.id=i.id),c.isNonEmptyString(i.tag)&&(n(this,p).mainDefinition.tag=i.tag),c.isNonEmptyArray(i.classes)&&(n(this,p).mainDefinition.classes=i.classes),c.isOf(i.style,window.Object)&&(n(this,p).mainDefinition.style=i.style),c.isOf(i.attributes,window.Array)&&(n(this,p).mainDefinition.attributes=i.attributes)}return this}setStyleOptions(t,i){return n(this,p).styleMedia=c.isNonEmptyString(t)?t:c.EMPTY_STRING,n(this,p).styleType=c.isNonEmptyString(i)?i:c.EMPTY_STRING,this}setElementsAsKeys(t){return n(this,p).elementKeys=!!t,this}setAttributesAsKeys(t){return n(this,p).attributeKeys=!!t,this}allowRawContent(t){return n(this,p).rawContent=!!t,this}setRawContent(t){return n(this,p).rawContent?h(this,x,t):D.onAllowHTML(),this}appendRawContent(t){return n(this,p).rawContent?h(this,x,n(this,x)+t):D.onAllowHTML(),this}prependRawContent(t){return n(this,p).rawContent?h(this,x,t+n(this,x)):D.onAllowHTML(),this}lockCSSRules(){return n(this,b).locked=!0,this}unlockCSSRules(){return n(this,b).locked=!1,this}appendCSSRule(t,i,s){if(s)return this.appendCSSNestedRule(t,i,s);let l=n(this,b).slice(-1),u=w.newRule(t,i);return(!l.length||!w.tryToJoinRules(l[0],u))&&n(this,b).append(u),this}prependCSSRule(t,i,s){if(s)return this.prependCSSNestedRule(t,i,s);let l=n(this,b).slice(0,1),u=w.newRule(t,i);return(!l.length||!w.tryToJoinRules(l[0],u))&&n(this,b).prepend(u),this}appendCSSNestedRule(t,i,s){let l=n(this,b).slice(-1),u=w.newNestedRule(t,i,s);return(!l.length||!w.tryToJoinNestedRules(l[0],u))&&n(this,b).append(u),this}prependCSSNestedRule(t,i,s){let l=n(this,b).slice(0,1),u=w.newNestedRule(t,i,s);return(!l.length||!w.tryToJoinNestedRules(l[0],u))&&n(this,b).prepend(u),this}lockChildElements(){return n(this,I).locked=!0,this}unlockChildElements(){return n(this,I).locked=!1,this}appendChildElement(t,i){let s=w.performValidations(w.newChild(t,i));return s!==null&&n(this,I).append(s),this}prependChildElement(t,i){let s=w.performValidations(w.newChild(t,i));return s!==null&&n(this,I).prepend(s),this}appendChildElements(t){return(c.isOf(t,window.Array)?t:c.forcedStringSplit(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.appendChildElement(i)),this}prependChildElements(t){return(c.isOf(t,window.Array)?t:c.forcedStringSplit(t,`
`)).forEach(i=>typeof i=="string"&&!!i.trim().length&&this.prependChildElement(i)),this}replaceChildElementById(t,i,s){let l=w.newChild(i,s);return l!==null&&n(this,I).replace(n(this,I).findIndex(u=>u.id===t),l),this}checkChildElementIsIncludedById(t,i,s){let l=u=>c.isOf(u,window.Function)?u():void 0;return n(this,I).some(u=>u.id===t&&u.included)?l(i):l(s),this}includeChildElementById(t){return n(this,I).forEach(i=>i.id===t&&g.renderingIncluder(i)),this}excludeChildElementById(t){return n(this,I).forEach(i=>i.id===t&&g.renderingExcluder(i)),this}invalidateChildElementsById(t){return n(this,I).forEach(i=>t.indexOf(i.id)>-1&&g.cacheInvalidator(i)),this}invalidateChildElements(t){return c.isOf(t,window.Array)&&t.forEach(g.cacheInvalidator),this}lockInstanceFields(){return n(this,k).locked=!0,this}unlockInstanceFields(){return n(this,k).locked=!1,this}makeField(t,i){return this[t]=i,n(this,k).append({name:t,value:i}),this}makeReactiveField(t,i,s,l=!0){return Di(this,t,i,s,(u,f)=>d(this,ne,Qe).call(this,u,f||"$auto")),n(this,k).append({name:t,value:i}),l&&d(this,ne,Qe).call(this,t,"$init"),this}makeExternalReactiveField(t,i,s,l,u=!0){return this.makeReactiveField(i,t[i]||s,f=>{t[i]=this[i],l(f)},u)}suspendRender(){return h(this,gt,!1),this}resumeRender(t=!0){return h(this,gt,!0),t&&this.render(),this}isRenderSuspended(){return!n(this,gt)}static initialize(t){if(L.initialize(O.DEFAULT_REPLACEMENT_OPEN,O.DEFAULT_REPLACEMENT_CLOSE),c.isOf(t,window.Object)){c.isOf(t.onFetchTemplate,window.Function)&&g.initialize({onFetchTemplate:t.onFetchTemplate}),c.isOf(t.onAllowHTML,window.Function)&&(D.onAllowHTML=t.onAllowHTML),c.isOf(t.onInvalidKey,window.Function)&&(D.onInvalidKey=t.onInvalidKey),c.isOf(t.onInvalidState,window.Function)&&(D.onInvalidState=t.onInvalidState),c.isOf(t.onLockedDefinition,window.Function)&&(D.onLockedDefinition=t.onLockedDefinition);let i={onInvalidDefinition:c.noop,onInexistentTemplate:c.noop,onUnespecifiedSlot:c.noop,onInvalidId:c.noop};c.isOf(t.onInvalidDefinition,window.Function)&&(D.onInvalidDefinition=t.onInvalidDefinition,i.onInvalidDefinition=t.onInvalidDefinition),c.isOf(t.onInexistentTemplate,window.Function)&&(i.onInexistentTemplate=t.onInexistentTemplate),c.isOf(t.onUnespecifiedSlot,window.Function)&&(i.onUnespecifiedSlot=t.onUnespecifiedSlot),c.isOf(t.onInvalidId,window.Function)&&(i.onInvalidId=t.onInvalidId),w.initialize(i)}}},G=ti;x=new WeakMap,b=new WeakMap,I=new WeakMap,k=new WeakMap,p=new WeakMap,Ft=new WeakMap,V=new WeakMap,X=new WeakMap,ot=new WeakMap,P=new WeakMap,q=new WeakMap,qt=new WeakMap,Et=new WeakMap,Q=new WeakMap,gt=new WeakMap,at=new WeakMap,_=new WeakMap,Z=new WeakMap,tt=new WeakMap,m=new WeakMap,kt=new WeakMap,Qt=new WeakMap,yt=new WeakMap,$=new WeakMap,j=new WeakSet,H=function(t){n(this,V)&&window.Wuse.debug(`#${n(this,p).mainDefinition.id} (${this.info.instanceNumber}) | ${typeof t=="string"?t:JSON.stringify(t)}`)},De=new WeakSet,_i=function(){n(this,P)&&n(this,P).affiliate(),n(this,ot).affiliate(),h(this,Et,!0)},_e=new WeakSet,Ci=function(){h(this,P,n(this,b).length?new Rt(n(this,q),w.makeStyleNode(n(this,p).styleMedia,n(this,p).styleType)):null),h(this,ot,new Rt(n(this,q),w.makeMainNode(n(this,p).mainDefinition))),n(this,I).forEach(g.cacheInvalidator),n(this,b).forEach(g.cacheInvalidator)},Ce=new WeakSet,Li=function(){n(this,Et)&&(n(this,ot).disaffiliate(),n(this,P)&&n(this,P).disaffiliate(),n(this,X)&&n(this,qt)&&window.Wuse.WebHelpers.removeChildren(this)),h(this,Et,!1)},Le=new WeakSet,Ri=function(t){return{key:n(this,p).elementKeys&&t.key(),event:(i,s,l)=>{let u=this[`on_${i}_${s}`];if(u){let f=d(this,Zt,Je).call(this,i);f&&f[t.event](s,u,l)}},slots:()=>this.on_slot_change&&n(this,q).querySelectorAll("slot").forEach(i=>i[t.event]("slotchange",this.on_slot_change))}},lt=new WeakSet,Wt=function(t){if(n(this,Q)&&!t||!n(this,Q)&&t){let i=d(this,Le,Ri).call(this,t?n(this,Qt).bind:n(this,Qt).unbind);n(this,I).forEach(s=>{!s.included&&t||(i.key&&i.key(s),s.events.forEach(l=>l&&i.event(s.id,l.kind,l.capture)))}),n(this,X)&&i.slots(),h(this,Q,t)}},Zt=new WeakSet,Je=function(t){return c.isNonEmptyString(t)?n(this,q).querySelector(`#${t}`):void 0},te=new WeakSet,Ve=function(){n(this,m).root.reset(c.EMPTY_STRING),n(this,m).style.reset(c.EMPTY_STRING),n(this,m).main.reset(n(this,x));let t=n(this,X)?n(this,m).renderizers.children.mixed:n(this,m).renderizers.children.normal;n(this,I).forEach(i=>i.included&&t(i)),n(this,b).forEach(n(this,m).renderizers.rule),n(this,m).main.verify(i=>!n(this,yt).main.compute(i)),n(this,m).style.verify(i=>!n(this,yt).style.compute(i))},ee=new WeakSet,Xe=function(t,i,s){n(this,m).root.process(t),n(this,m).style.process(i),n(this,m).main.process(s),window.Wuse.DEBUG&&d(this,j,H).call(this,n(this,m).getDebugInfo())},Re=new WeakSet,Mi=function(){!window.Wuse.RENDERING||!n(this,gt)||(window.Wuse.MEASURE&&n(this,$).partial.start(),d(this,C,F).call(this,"on_prerender"),d(this,te,Ve).call(this),n(this,m).gotModified()?(d(this,lt,Wt).call(this,!1),d(this,ee,Xe).call(this,!1,!1,!1),d(this,lt,Wt).call(this,!0),this.info.updatedRounds++,d(this,C,F).call(this,"on_update"),d(this,se,Ze).call(this,"on_refresh")):this.info.unmodifiedRounds++,window.Wuse.DEBUG&&d(this,j,H).call(this,`unmodified: ${this.info.unmodifiedRounds} (main: ${n(this,yt).main.rounds}, style: ${n(this,yt).style.rounds}) | updated: ${this.info.updatedRounds}`),d(this,C,F).call(this,"on_postrender"),window.Wuse.MEASURE&&n(this,$).partial.stop(window.Wuse.DEBUG))},ie=new WeakSet,qe=function(t){d(this,_e,Ci).call(this),d(this,De,_i).call(this),d(this,C,F).call(this,"on_inject"),d(this,te,Ve).call(this),d(this,ee,Xe).call(this,!1,!!n(this,P),!0),d(this,lt,Wt).call(this,!0),d(this,C,F).call(this,t)},Me=new WeakSet,Ui=function(){window.Wuse.MEASURE&&n(this,$).full.start(),d(this,lt,Wt).call(this,!1),d(this,Ce,Li).call(this),d(this,C,F).call(this,"on_unload"),n(this,jt).call(this),d(this,ie,qe).call(this,"on_reload"),d(this,se,Ze).call(this,"on_repaint"),window.Wuse.MEASURE&&n(this,$).full.stop(window.Wuse.DEBUG)},ne=new WeakSet,Qe=function(t,i="$none"){if(n(this,Q)){let s=L.scanRulesForReplacements(n(this,b),t);s.forEach(g.cacheInvalidator);let l=L.scanChildrenForReplacements(n(this,I),t);l.forEach(g.cacheInvalidator),window.Wuse.DEBUG&&d(this,j,H).call(this,`reactive render (label: ${i}, field: ${t}, children: ${l.length}, rules: ${s.length})`),(!!s.length||!!l.length)&&(l.some(u=>!!u.kind.length)&&n(this,I).forEach(u=>u.kind===O.SLOTS_KIND?g.cacheInvalidator(u):void 0),this.render())}},C=new WeakSet,F=function(t,i){n(this,Ft)[t]&&this[t].call(this,i)},se=new WeakSet,Ze=function(t,i){n(this,tt)&&this.persistToElementsStore(),n(this,Ft)[t]&&window.requestAnimationFrame(()=>this[t].call(this,i))},jt=new WeakMap,Ue=new WeakSet,Wi=function(){if(n(this,tt)){let t=n(this,at).hasItem(n(this,Z))?n(this,at).getItem(n(this,Z)):w.newState();if(c.isOf(t,window.Object))return h(this,_,t),n(this,_).generation++,d(this,xt,ve).call(this),!0;D.onInvalidState()}return!1},xt=new WeakSet,ve=function(){window.Wuse.DEBUG&&(n(this,_).key=n(this,Z)),n(this,_).persisted=!!n(this,_).data,n(this,at).setItem(n(this,Z),n(this,_))},We=new WeakSet,Fi=function(){let t=n(this,_);return c.isOf(t,window.Object)&&t.persisted&&t.data?(delete t.data,d(this,xt,ve).call(this),!0):!1},$t=new WeakSet,Ne=function(){return n(this,tt)?!0:(D.onInvalidKey(),!1)},a(G,"instancesCount",0);var ki=(r,e)=>window.Object.getOwnPropertyNames(e).forEach(t=>Object.defineProperty(r,t,{value:e[t],writable:!1,configurable:!1,enumerable:!1})),It=class{static detectFeatures(e){let t=(i,s)=>!i&&y.UNSUPPORTED_FEATURE.emit(s);try{t(e.JsHelpers.isOf(window.document,window.HTMLDocument),"HTML Document"),t(e.JsHelpers.isOf(window.customElements,window.CustomElementRegistry),"Custom Elements"),e.WebHelpers.onDOMContentLoaded(()=>t(e.JsHelpers.isOf(window.document.body.attachShadow,window.Function),"Shadow DOM"))}catch(i){y.UNKNOWN_ERROR.emit()}}static initializeModules(e){e.PerformanceMeasurement.initialize((t,i)=>e.debug(JSON.stringify(e.JsHelpers.buildArray(s=>{switch(s.push({instances:e.elementCount}),s.push(t.getDebugInfo()),i){case"stop":s.push(e.PerformanceMeasurement.DOMUpdate.overall.getDebugInfo());break;case"finish":s.push(e.PerformanceMeasurement.BrowserRender.overall.getDebugInfo());break}})))),nt.initialize({onExtinctTemplate:y.EXTINCT_TEMPLATE.emit,onInvalidTemplate:y.INVALID_TEMPLATE.emit}),A.initialize({onMisnamedClass:y.MISNAMED_CLASS.emit,onUnregistrableClass:y.UNREGISTRABLE_CLASS.emit,onUnregisteredClass:y.UNREGISTERED_CLASS.emit,onInvalidClass:y.INVALID_CLASS.emit,onDeferredInstantiation:e.WebHelpers.onDOMContentLoaded}),G.initialize({onAllowHTML:y.ALLOW_HTML.emit,onInvalidKey:y.INVALID_KEY.emit,onInvalidDefinition:y.INVALID_DEFINITION.emit,onLockedDefinition:y.LOCKED_DEFINITION.emit,onInexistentTemplate:y.INEXISTENT_TEMPLATE.emit,onUnespecifiedSlot:y.UNESPECIFIED_SLOT.emit,onInvalidId:y.INVALID_ID.emit,onInvalidState:y.INVALID_STATE.emit,onFetchTemplate:nt.fetch})}static declareUnwritableMembers(e,t){ki(e,t.fields),ki(e,t.methods)}};var Ge,xi,ji,xe,$e,Gt,Fe=r=>r>1e3?(r/1e3).toFixed(2)+"s":r.toFixed(2)+"ms",ke=class{constructor(){a(this,"round",0);a(this,"domTime",window.Number.MAX_SAFE_INTEGER);a(this,"renderTime",window.Number.MAX_SAFE_INTEGER)}getDebugInfo(){var e=new window.Object;return e.round=this.round,e.domTime=Fe(this.domTime),this.renderTime!==window.Number.MAX_SAFE_INTEGER&&(e.renderTime=Fe(this.renderTime)),e}},je=class{constructor(e){a(this,"name","");a(this,"rounds",0);a(this,"time",0);a(this,"average",0);this.name=e}compute(e){this.rounds++,this.time+=e,this.average=this.time/this.rounds}getDebugInfo(){let e=Fe(this.time),t=Fe(this.average);return{name:this.name,rounds:this.rounds,spent:e,average:t}}},M=class{static initialize(e){typeof e=="function"&&h(M,Gt,e),M.DOMUpdate.overall=new je("overall-dom-update"),M.BrowserRender.overall=new je("overall-browser-render")}},et=M;Gt=new WeakMap,o(et,Gt,()=>{}),a(et,"StopWatch",(ji=class{constructor(){o(this,Ge);a(this,"_begin",0);a(this,"_end",{dom:0,render:0});a(this,"rounds",0);a(this,"last",new ke);a(this,"best",new ke);a(this,"averages",{dom:0,render:0})}start(){(M.DOMUpdate.check||M.BrowserRender.check)&&(this.last.round=++this.rounds,this._begin=performance.now())}stop(e){var t;M.DOMUpdate.check&&(this.best.domTime>(this.last.domTime=(this._end.dom=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.domTime=this.last.domTime),this.averages.dom=(this.averages.dom*(this.rounds-1)+this.last.domTime)/this.rounds,M.DOMUpdate.overall.compute(this.last.domTime)),M.BrowserRender.check?setTimeout(()=>d(this,Ge,xi).bind(this)(e)):e&&n(t=M,Gt).call(t,this,"stop")}getDebugInfo(){return{rounds:this.rounds,last:this.last.getDebugInfo(),best:this.best.getDebugInfo(),averages:this.averages}}},Ge=new WeakSet,xi=function(e){var t;this.best.renderTime>(this.last.renderTime=(this._end.render=performance.now())-this._begin)&&(this.best.round=this.last.round,this.best.renderTime=this.last.renderTime),this.averages.render=(this.averages.render*(this.rounds-1)+this.last.renderTime)/this.rounds,M.BrowserRender.overall.compute(this.last.renderTime),e&&n(t=M,Gt).call(t,this,"finish")},ji)),a(et,"DOMUpdate",(xe=class{},a(xe,"check",!0),a(xe,"overall",null),xe)),a(et,"BrowserRender",($e=class{},a($e,"check",!1),a($e,"overall",null),$e));var it,oe,ei,re=class{constructor(){o(this,oe);o(this,it,new window.Object)}get length(){return d(this,oe,ei).call(this).length}key(e){return d(this,oe,ei).call(this)[e]||null}getItem(e){return n(this,it)[e]}setItem(e,t){n(this,it)[e]=t}removeItem(e){delete n(this,it)[e]}clear(){h(this,it,new window.Object)}hasItem(e){return n(this,it).hasOwnProperty(e)}};it=new WeakMap,oe=new WeakSet,ei=function(){return window.Object.keys(n(this,it))};var E;window.Wuse=(E=class{static get VERSION(){return"0.5.4"}static get elementCount(){return G.instancesCount}},a(E,"DEBUG",!1),a(E,"FATALS",!1),a(E,"MEASURE",!1),a(E,"RENDERING",!0),a(E,"hashRoutine",e=>{var t=0;for(let i=0;i<e.length;i++)t=(t=(t<<5)-t+e.charCodeAt(i))&t;return t}),a(E,"elementsStorage",new re),a(E,"tmp",null),a(E,"WebHelpers",null),a(E,"JsHelpers",null),a(E,"PerformanceMeasurement",null),a(E,"NonShadowElement",null),a(E,"OpenShadowElement",null),a(E,"ClosedShadowElement",null),a(E,"debug",c.noop),a(E,"blockUpdate",c.noop),a(E,"register",c.noop),a(E,"instantiate",c.noop),a(E,"isShadowElement",c.noop),(()=>{It.declareUnwritableMembers(E,{fields:{tmp:new window.Object,WebHelpers:ht,JsHelpers:c,PerformanceMeasurement:et,NonShadowElement:R.specializeClass(G,R.REGULAR),OpenShadowElement:R.specializeClass(G,R.OPEN),ClosedShadowElement:R.specializeClass(G,R.CLOSED)},methods:{debug:e=>window.console.log("[WUSE:DEBUG]",e),blockUpdate:(e,t)=>{if(c.isOf(e,Function)){window.Wuse.DEBUG&&window.Wuse.debug("blocking"),window.Wuse.RENDERING=!1;try{e(t)}catch(i){throw i}finally{window.Wuse.RENDERING=!0,window.Wuse.DEBUG&&window.Wuse.debug("unblocking")}}},register:e=>A.registerClasses(c.isOf(e,window.Array)?e:new window.Array(e)),instantiate:(e,t,i)=>A.instantiateClasses(c.isOf(e,window.Array)?e:new window.Array(e),t,i),isShadowElement:e=>{let t=window.Object.getPrototypeOf(e.constructor);return t===window.Wuse.OpenShadowElement||t===window.Wuse.ClosedShadowElement}}}),It.detectFeatures(E),It.initializeModules(E)})(),E);})();
